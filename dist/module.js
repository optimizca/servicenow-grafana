define(["@grafana/data","@grafana/runtime","lodash","rxjs","react","@grafana/ui"],((e,t,a,l,r,n)=>(()=>{var o={6539:(e,t,a)=>{var l=a(7400).Symbol;e.exports=l},9349:e=>{e.exports=function(e,t,a){switch(a.length){case 0:return e.call(t);case 1:return e.call(t,a[0]);case 2:return e.call(t,a[0],a[1]);case 3:return e.call(t,a[0],a[1],a[2])}return e.apply(t,a)}},8213:(e,t,a)=>{var l=a(4701),r=a(2900),n=a(9785),o=a(3854),s=a(2383),i=a(8519),u=Object.prototype.hasOwnProperty;e.exports=function(e,t){var a=n(e),c=!a&&r(e),p=!a&&!c&&o(e),d=!a&&!c&&!p&&i(e),m=a||c||p||d,g=m?l(e.length,String):[],v=g.length;for(var y in e)!t&&!u.call(e,y)||m&&("length"==y||p&&("offset"==y||"parent"==y)||d&&("buffer"==y||"byteLength"==y||"byteOffset"==y)||s(y,v))||g.push(y);return g}},9736:(e,t,a)=>{var l=a(6539),r=a(4840),n=a(1258),o=l?l.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":o&&o in Object(e)?r(e):n(e)}},5829:(e,t,a)=>{var l=a(9736),r=a(2360);e.exports=function(e){return r(e)&&"[object Arguments]"==l(e)}},6729:(e,t,a)=>{var l=a(8338),r=a(9678),n=a(1611),o=a(6532),s=/^\[object .+?Constructor\]$/,i=Function.prototype,u=Object.prototype,c=i.toString,p=u.hasOwnProperty,d=RegExp("^"+c.call(p).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!n(e)||r(e))&&(l(e)?d:s).test(o(e))}},6972:(e,t,a)=>{var l=a(9736),r=a(4194),n=a(2360),o={};o["[object Float32Array]"]=o["[object Float64Array]"]=o["[object Int8Array]"]=o["[object Int16Array]"]=o["[object Int32Array]"]=o["[object Uint8Array]"]=o["[object Uint8ClampedArray]"]=o["[object Uint16Array]"]=o["[object Uint32Array]"]=!0,o["[object Arguments]"]=o["[object Array]"]=o["[object ArrayBuffer]"]=o["[object Boolean]"]=o["[object DataView]"]=o["[object Date]"]=o["[object Error]"]=o["[object Function]"]=o["[object Map]"]=o["[object Number]"]=o["[object Object]"]=o["[object RegExp]"]=o["[object Set]"]=o["[object String]"]=o["[object WeakMap]"]=!1,e.exports=function(e){return n(e)&&r(e.length)&&!!o[l(e)]}},9464:(e,t,a)=>{var l=a(1611),r=a(6016),n=a(1586),o=Object.prototype.hasOwnProperty;e.exports=function(e){if(!l(e))return n(e);var t=r(e),a=[];for(var s in e)("constructor"!=s||!t&&o.call(e,s))&&a.push(s);return a}},1197:(e,t,a)=>{var l=a(1137),r=a(1871),n=a(3132);e.exports=function(e,t){return n(r(e,t,l),e+"")}},4459:(e,t,a)=>{var l=a(551),r=a(2630),n=a(1137),o=r?function(e,t){return r(e,"toString",{configurable:!0,enumerable:!1,value:l(t),writable:!0})}:n;e.exports=o},4701:e=>{e.exports=function(e,t){for(var a=-1,l=Array(e);++a<e;)l[a]=t(a);return l}},9334:e=>{e.exports=function(e){return function(t){return e(t)}}},4937:(e,t,a)=>{var l=a(7400)["__core-js_shared__"];e.exports=l},2630:(e,t,a)=>{var l=a(1822),r=function(){try{var e=l(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=r},9120:(e,t,a)=>{var l="object"==typeof a.g&&a.g&&a.g.Object===Object&&a.g;e.exports=l},1822:(e,t,a)=>{var l=a(6729),r=a(5371);e.exports=function(e,t){var a=r(e,t);return l(a)?a:void 0}},4840:(e,t,a)=>{var l=a(6539),r=Object.prototype,n=r.hasOwnProperty,o=r.toString,s=l?l.toStringTag:void 0;e.exports=function(e){var t=n.call(e,s),a=e[s];try{e[s]=void 0;var l=!0}catch(e){}var r=o.call(e);return l&&(t?e[s]=a:delete e[s]),r}},5371:e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},2383:e=>{var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,a){var l=typeof e;return!!(a=null==a?9007199254740991:a)&&("number"==l||"symbol"!=l&&t.test(e))&&e>-1&&e%1==0&&e<a}},7535:(e,t,a)=>{var l=a(5638),r=a(68),n=a(2383),o=a(1611);e.exports=function(e,t,a){if(!o(a))return!1;var s=typeof t;return!!("number"==s?r(a)&&n(t,a.length):"string"==s&&t in a)&&l(a[t],e)}},9678:(e,t,a)=>{var l,r=a(4937),n=(l=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||""))?"Symbol(src)_1."+l:"";e.exports=function(e){return!!n&&n in e}},6016:e=>{var t=Object.prototype;e.exports=function(e){var a=e&&e.constructor;return e===("function"==typeof a&&a.prototype||t)}},1586:e=>{e.exports=function(e){var t=[];if(null!=e)for(var a in Object(e))t.push(a);return t}},8125:(e,t,a)=>{e=a.nmd(e);var l=a(9120),r=t&&!t.nodeType&&t,n=r&&e&&!e.nodeType&&e,o=n&&n.exports===r&&l.process,s=function(){try{return n&&n.require&&n.require("util").types||o&&o.binding&&o.binding("util")}catch(e){}}();e.exports=s},1258:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},1871:(e,t,a)=>{var l=a(9349),r=Math.max;e.exports=function(e,t,a){return t=r(void 0===t?e.length-1:t,0),function(){for(var n=arguments,o=-1,s=r(n.length-t,0),i=Array(s);++o<s;)i[o]=n[t+o];o=-1;for(var u=Array(t+1);++o<t;)u[o]=n[o];return u[t]=a(i),l(e,this,u)}}},7400:(e,t,a)=>{var l=a(9120),r="object"==typeof self&&self&&self.Object===Object&&self,n=l||r||Function("return this")();e.exports=n},3132:(e,t,a)=>{var l=a(4459),r=a(9591)(l);e.exports=r},9591:e=>{var t=Date.now;e.exports=function(e){var a=0,l=0;return function(){var r=t(),n=16-(r-l);if(l=r,n>0){if(++a>=800)return arguments[0]}else a=0;return e.apply(void 0,arguments)}}},6532:e=>{var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},551:e=>{e.exports=function(e){return function(){return e}}},236:(e,t,a)=>{var l=a(1197),r=a(5638),n=a(7535),o=a(3893),s=Object.prototype,i=s.hasOwnProperty,u=l((function(e,t){e=Object(e);var a=-1,l=t.length,u=l>2?t[2]:void 0;for(u&&n(t[0],t[1],u)&&(l=1);++a<l;)for(var c=t[a],p=o(c),d=-1,m=p.length;++d<m;){var g=p[d],v=e[g];(void 0===v||r(v,s[g])&&!i.call(e,g))&&(e[g]=c[g])}return e}));e.exports=u},5638:e=>{e.exports=function(e,t){return e===t||e!=e&&t!=t}},1137:e=>{e.exports=function(e){return e}},2900:(e,t,a)=>{var l=a(5829),r=a(2360),n=Object.prototype,o=n.hasOwnProperty,s=n.propertyIsEnumerable,i=l(function(){return arguments}())?l:function(e){return r(e)&&o.call(e,"callee")&&!s.call(e,"callee")};e.exports=i},9785:e=>{var t=Array.isArray;e.exports=t},68:(e,t,a)=>{var l=a(8338),r=a(4194);e.exports=function(e){return null!=e&&r(e.length)&&!l(e)}},3854:(e,t,a)=>{e=a.nmd(e);var l=a(7400),r=a(7714),n=t&&!t.nodeType&&t,o=n&&e&&!e.nodeType&&e,s=o&&o.exports===n?l.Buffer:void 0,i=(s?s.isBuffer:void 0)||r;e.exports=i},8338:(e,t,a)=>{var l=a(9736),r=a(1611);e.exports=function(e){if(!r(e))return!1;var t=l(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},4194:e=>{e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},1611:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},2360:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},8519:(e,t,a)=>{var l=a(6972),r=a(9334),n=a(8125),o=n&&n.isTypedArray,s=o?r(o):l;e.exports=s},3893:(e,t,a)=>{var l=a(8213),r=a(9464),n=a(68);e.exports=function(e){return n(e)?l(e,!0):r(e)}},7714:e=>{e.exports=function(){return!1}},3305:t=>{"use strict";t.exports=e},3545:e=>{"use strict";e.exports=t},7388:e=>{"use strict";e.exports=n},5980:e=>{"use strict";e.exports=a},2650:e=>{"use strict";e.exports=r},1177:e=>{"use strict";e.exports=l}},s={};function i(e){var t=s[e];if(void 0!==t)return t.exports;var a=s[e]={id:e,loaded:!1,exports:{}};return o[e](a,a.exports,i),a.loaded=!0,a.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var a in t)i.o(t,a)&&!i.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.nmd=e=>(e.paths=[],e.children||(e.children=[]),e);var u={};return(()=>{"use strict";i.r(u),i.d(u,{plugin:()=>Se});var e=i(3305),t=i(236),a=i.n(t),l=i(3545),r=i(5980),n=i.n(r);const o={selectedQueryCategory:{label:"Metrics",value:"Metrics",description:"Get Timeseries metrics."},basic_sysparam:[],getAlertCount:{label:"No",value:"false"},cacheOverride:"",compressLogs:!1,grafanaTimerange:!1,sortDirection:"ASC",metricValueType:"timeseries",page:0,rowLimit:"2000",topology_child_depth:"3",topology_parent_depth:"3",relationshipTypes:[],excludedClasses:[],basicSysparm:[{column:null,operator:null,value:null,separator:null}]};var s=i(1177);const c=["sys_created_on","created_on","last_event_time","sys_updated_on","time","start_time","end_time","start_date","end_date","Updated","work_start","work_end"];function p(e,t){let a=(0,l.getTemplateSrv)().replace(e,t,"csv"),r=a.indexOf(",");if(r>=0){for(;r>=0;)a=a.replace(",","|"),r=a.indexOf(",");a="("+a+")"}return a.startsWith("(")&&a.endsWith(")")?"/"+a+"/":a}function d(e,t){return(0,l.getTemplateSrv)().replace(e,t,"csv")}function m(t,a,l,r,n){const o={name:e.TIME_SERIES_TIME_FIELD_NAME,type:e.FieldType.time,config:{custom:{}},values:new e.ArrayVector(t.map((e=>e[1])))};let s;e.FieldType.string,s=new e.ArrayVector(t.map((e=>e[0])));const i=[o,{name:e.TIME_SERIES_VALUE_FIELD_NAME,type:null!=n?n:e.FieldType.number,labels:{},config:{displayName:a,custom:{}},values:s}];return{name:a,refId:l.refId,fields:i,length:t.length}}function g(e){console.log(e)}function v(e){return")"===e.charAt(e.length-2)&&"("===e.charAt(1)&&(e=e.charAt(0)+e.slice(2,-2)+e.charAt(e.length-1)),e}function y(e){console.log("inside createRegEx"),console.log("Input: "+e);let t="";if(console.log("Input Length: "+e.length),1===e.length)return console.log("Using original input value"),e[0];if("string"==typeof e)return console.log("Its a string"),e;for(let a=0;a<e.length;a++)t+="|"+e[a];return"|"===t.charAt(0)&&(t=t.substring(1,t.length),t="/"+t+"/"),console.log("New Regex Expression: "+t),t}function h(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}let b=(f=i(5980))&&f.__esModule?f:{default:f};var f;class E{request(e){e.withCredentials=this.requestOptions.withCredentials,e.headers=this.requestOptions.headers;let t=e.url;e.url=this.requestOptions.url+t;const a=(0,l.getBackendSrv)().fetch(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},l=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(l=l.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),l.forEach((function(t){h(e,t,a[t])}))}return e}({},e));return(0,s.lastValueFrom)(a)}mapResponseToVariable(e,t,a){let l=b.default.map(e,(function(e,t){if(void 0!==e.name&&void 0!==e.id)return""!==e.name&&null!==e.name||(e.name="NULL"),""!==e.id&&null!==e.id||(e.id="NULL"),{text:e.name,value:e.id};{let t=Object.keys(e);return""!==e[t[0]]&&null!==e[t[0]]||(e[t[0]]="NULL"),!t[1]||""!==e[t[1]]&&null!==e[t[1]]||(e[t[1]]="NULL"),{text:e[t[0]],value:t[1]?e[t[1]]:e[t[0]]}}}));return!l.some((e=>"NULL"===e.text&&"NULL"===e.value))&&a&&l.push({text:"NULL",value:"NULL"}),t&&l.push({text:"*",value:"*"}),l}mapChecksToValue(e){return b.default.map(e,(function(e,t){if(void 0!==e.name&&void 0!==e.id)return""!==e.name&&null!==e.name||(e.name="NULL"),""!==e.id&&null!==e.id||(e.id="NULL"),{label:e.name,value:e.id};{let t=Object.keys(e);return""!==e[t[0]]&&null!==e[t[0]]||(e[t[0]]="NULL"),!t[1]||""!==e[t[1]]&&null!==e[t[1]]||(e[t[1]]="NULL"),{label:e[t[0]],value:t[1]?e[t[1]]:e[t[0]]}}}))}mapChecksToValuePlusSuffix(e){return b.default.map(e,(function(e,t){let a=Object.keys(e);return{label:e[a[0]],value:a[1]?e[a[1]]:e[a[0]],suffix:e[a[2]]}}))}mapValueSuffixToColumns(e){let t=b.default.map(e,((e,t)=>({label:e.label+":display",value:e.value+":d"}))),a=b.default.map(e,((e,t)=>({label:e.label+":value",value:e.value+":v"}))),l=t.concat(a);return l=n().orderBy(l,["label"],["asc"]),l}mapValueAsSuffix(e,t){let a=b.default.map(e,(e=>{let a={label:t?e.label+" ("+e.type+")":e.label,value:e.value,description:e.value};return void 0!==e.options&&(a.options=b.default.map(e.options,(e=>({label:t?e.label+" ("+e.type+")":e.label,value:e.value,description:e.value})))),a}));return a=n().orderBy(a,["label"],["asc"]),a}mapSuffixToLabel(e){return b.default.map(e,(e=>({label:e.label+" ("+e.suffix+")",value:e.value})))}appendInstanceNameToResponse(e,t){return b.default.map(e,(function(e,a){return e.instanceName=t,e}))}mapToTextValue(e){return b.default.map(e,(function(e,t){return e&&e.text&&e.value?{text:e.text,value:e.value}:b.default.isObject(e)?{text:e,value:t}:{text:e,value:e}}))}mapOutageResponseToFrame(t,a){return t.map((t=>{let l=t.ci;return console.log(l),m(t.datapoints,l,a,0,e.FieldType.string)}))}mapTrendResponseToFrame(t,a){return Object.keys(t[0]).map((l=>m(t[0][l].datapoints,l,a,0,e.FieldType.number)))}mapMetricsResponseToFrame(t,a){return t.map((t=>{let l=t.source+":"+t.metricName;return t.type.length>0&&(l+=":"+t.type),m(t.datapoints,l,a,0,e.FieldType.number)}))}mapAnamMetricsResponseToFrame(t,a){let l=t.map((t=>{let l=t.ci_name,r=t.metric_name;return t.data.series.map((t=>{let n=l+":"+r+":"+t.type;return function(t,a,l,r,n){const o={name:e.TIME_SERIES_TIME_FIELD_NAME,type:e.FieldType.time,config:{custom:{}},values:new e.ArrayVector(t.map((e=>e.time)))};let s;e.FieldType.string,s=new e.ArrayVector(t.map((e=>e.value)));const i=[o,{name:e.TIME_SERIES_VALUE_FIELD_NAME,type:n||e.FieldType.number,labels:{},config:{displayName:a,custom:{}},values:s}];return{name:a,refId:l.refId,fields:i,length:t.length}}(t.data,n,a,0,e.FieldType.number)}))}));return l=[].concat.apply([],l),l}mapTextResponseToFrame(t,a){const l=new e.MutableDataFrame({fields:[],refId:a});if(g("You are Inside mapTextResponseToFrame"),console.log(t),!(t.length>0))return[];console.log(t);let r=Object.keys(t[0]);for(let a=0;a<r.length;a++){let s=t.map((e=>e[r[a]]));"new"!==r[a]&&"value:display"!==r[a]||(s=this.sanitizeValues(s));let i=e.FieldType.string;s.length>=0&&(n=s[0],o=r[a],i=c.includes(o)?e.FieldType.time:"number"==typeof n?e.FieldType.number:e.FieldType.string),l.addField({name:r[a],type:i,values:s})}var n,o;return g(l),l}createTopologyFrame(e,t){const a=[{columns:[{text:"type"},{type:"time",text:"Time"},{text:"app"},{text:"target_app"},{text:"req_rate"},{text:"error_rate"}],rows:e.rows,refId:t||void 0,meta:void 0}];return console.log("topology frame: ",a),a}sanitizeValues(e){let t=[];return e.map((e=>{for(;-1!==e.indexOf("[code]");){let t=e.substring(0,e.indexOf("[code]")),a=e.substring(e.indexOf("[/code]")+7,e.length);if(-1!==e.indexOf("<a")){let l=e.substring(e.indexOf("<a"),e.indexOf("</a>",e.indexOf("<a"))),r=l.substring(l.indexOf(">")+1,l.length);-1!==r.indexOf("<")&&(r=r.substring(0,r.indexOf("<"))),e=t+r+a}else e=t+a}t.push(e)})),t}constructor(e,t,a,l){h(this,"requestOptions",void 0),h(this,"lastCacheDuration",void 0),h(this,"cacheTimeout",void 0),this.requestOptions={headers:e,withCredentials:t,url:a},this.cacheTimeout=l}}function S(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class T{queryNodeGraph(t,a,l){console.log("queryNodeGraph"),console.log("target: ",t);let r=null==t.selectedServiceList?"":d(t.selectedServiceList.value,a.scopedVars),n=t.relationshipTypes.map((e=>d(e.value,a.scopedVars))),o=t.excludedClasses.map((e=>d(e.value,a.scopedVars))),s={starting_point:r,parent_limit:""===t.topology_parent_depth?0:parseInt(d(t.topology_parent_depth,a.scopedVars),10),child_limit:""===t.topology_child_depth?0:parseInt(d(t.topology_child_depth,a.scopedVars),10),relationship_types:n,excluded_classes:o};return console.log("requestBody: ",s),this.apiClient.request({url:this.apiPath+"/v1/query/node-graph",data:s,method:"POST",cacheOverride:""===l?null:l}).then((a=>{if(console.log("print queryNodeGraph response from SNOW"),console.log(a),a.data.result.error.length>0)throw new Error(a.data.result.error);return function(t,a){let l=[];if(t.result.nodes.length>0){let r=new e.MutableDataFrame;r.name="Nodes",r.refId=a,r.meta={preferredVisualisationType:"nodeGraph"};for(let a in t.result.nodes[0]){let l=t.result.nodes[0][a],n=e.FieldType.string;"object"==typeof l?n=e.FieldType.other:isNaN(l)||(n=e.FieldType.number);let o={};switch(a){case"id":o={links:[{url:"/d/AEOITnWnz?var-ci=${__data.fields.id}&var-ciClasses=${__data.fields.subtitle}",title:"Generic CI 360 Degree View",targetBlank:!0}]};break;case"arc__impact_clear":case"arc__impact_ok":o={color:{mode:"fixed",fixedColor:"#77B27B"}};break;case"arc__impact_critical":o={color:{mode:"fixed",fixedColor:"#DD8581"}};break;case"arc__impact_major":o={color:{mode:"fixed",fixedColor:"#EABA75"}};break;case"arc__impact_minor":o={color:{mode:"fixed",fixedColor:"#E3D960"}};break;case"arc__impact_warning":o={color:{mode:"fixed",fixedColor:"#68ABDB"}};break;default:o={}}let s={name:a,type:n,config:o,values:new e.ArrayVector(t.result.nodes.map((e=>e[a])))};r.addField(s)}l.push(r)}if(t.result.edges.length>0){let r=new e.MutableDataFrame;r.name="Edges",r.refId=a,r.meta={preferredVisualisationType:"nodeGraph"};for(let a in t.result.edges[0]){let l={name:a,type:e.FieldType.string,config:{},values:new e.ArrayVector(t.result.edges.map((e=>e[a])))};r.addField(l)}l.push(r)}return l}(a.data,t.refId)})).catch((e=>{throw console.error("queryNodeGraph query error: ",e),new Error(e.data.error)}))}getTopology(e,t,a){console.log("inside get Topology"),console.log("print target"),console.log(e),console.log("print options"),console.log(t);let l="";e.selectedServiceList&&e.selectedServiceList.value&&(l=d(e.selectedServiceList.value,t.scopedVars));let r="";e.topology_child_depth&&(r=p(e.topology_child_depth,t.scopedVars));let n="";e.topology_parent_depth&&(n=p(e.topology_parent_depth,t.scopedVars));let o="";if(e.sysparam_query){let a=this.singleSysParamQuery(e.sysparam_query);console.log("NULL SYS PARAM: ",a),o=this.parseBasicSysparm(a,t.scopedVars),console.log(o,"PARSE BASIC SYSPARM")}let s=`{"targets":[{"target":"${l}","child_depth":"${r}","parent_depth":"${n}","sysparm_query":"${o}"}]}`;return console.log("startingPoint after replace"),console.log(l),console.log(s),this.apiClient.request({url:this.apiPath+"/v1/query/topology",data:s,method:"POST",cacheOverride:""===a?null:a}).then((t=>(g("print topology response from SNOW"),g(t),g("~~~~~~~~~~~~~~~~"),this.apiClient.createTopologyFrame(t.data,e.refId)))).catch((e=>{throw console.error("topology query error: ",e),new Error(e.data.error.message)}))}getMetrics(e,t,a,l,r){console.log("isnide getMetrics"),console.log("print target"),console.log(e);let n=!1,o="",s=[],i="",u=[],c="",d="",m="";if(e.selectedSourceList){let t=[];e.selectedSourceList.map((e=>{t.push(p(e.value,l.scopedVars))})),o=y(t),console.log("ciIds: ",o)}if(e.selectedMetricTypeList&&(e.selectedMetricTypeList.map((e=>{s.push(p(e.value,l.scopedVars))})),i=y(s),console.log("resourceNames: ",i)),e.selectedMetricNameList&&(e.selectedMetricNameList.map((e=>{u.push(p(e.value,l.scopedVars))})),c=y(u)),e.selectedMetricAnomalyList&&e.selectedMetricAnomalyList.value&&(d=p(e.selectedMetricAnomalyList.value,l.scopedVars),"true"===d&&(n=!0)),e.sysparam_query){let t=this.singleSysParamQuery(e.sysparam_query);console.log("NULL SYS PARAM: ",t),m=this.parseBasicSysparm(t,l.scopedVars),console.log("PARSE BASIC SYSPARM: ",m)}c=v(c),o=v(o);let g=`{"targets":[{"target":"${o}","resourceName":"${i}","metricName":"${c}","sysparm_query":"${m}"}]}`,h=this.apiPath+"/v1/query/single_metric?startTime="+t+"&endTime="+a;return"latest"===e.metricValueType&&(h=this.apiPath+"/v1/query/latest_single_metric?startTime="+t+"&endTime="+a),"*"===c&&(h=this.apiPath+"/v1/query/all_metrics?startTime="+t+"&endTime="+a),!0===n&&(h=this.apiPath+"/v1/query/anomaly_metrics?startTime="+t+"&endTime="+a),console.log("source after replace"),console.log(h),console.log(o),console.log(g),this.apiClient.request({url:h,data:g,method:"POST",cacheOverride:""===r?null:r}).then((t=>(console.log("metric response: ",t),!0===n?this.apiClient.mapAnamMetricsResponseToFrame(t.data,e):this.apiClient.mapMetricsResponseToFrame(t.data,e)))).catch((e=>{throw console.error("metric query error: ",e),new Error(e)}))}getAlerts(e,t,a,l,r,n){console.log("isnide GetAlerts"),console.log("print target"),console.log(e),console.log("print options scoped Vars"),console.log(l.scopedVars);let o="";e.selectedServiceList&&e.selectedServiceList.value&&(o=d(e.selectedServiceList.value,l.scopedVars));let s="";if(e.selectedSourceList){let t=[];e.selectedSourceList.map((e=>{t.push(p(e.value,l.scopedVars))})),s=y(t),console.log("ciIds: ",s)}let i=o,u="All",c="none",m="";if(e.selectedAlertStateList&&e.selectedAlertStateList.value&&(u=e.selectedAlertStateList.value),e.selectedAlertTypeList&&("CI"===e.selectedAlertTypeList.value?(c="ci",i=s):"OS"===e.selectedAlertTypeList.value?(c="os",i=s,-1!==i.indexOf("(")&&(i=i.substring(i.indexOf("(")+1,i.indexOf(")")))):"None"===e.selectedAlertTypeList.value&&(c="none")),e.sysparam_query){let t=this.singleSysParamQuery(e.sysparam_query);console.log("NULL SYS PARAM: ",t),m=this.parseBasicSysparm(t,l.scopedVars),console.log("PARSE BASIC SYSPARM: ",m)}let v="";if(e.tagKeys&&e.tagValues)for(let t=0;t<e.tagKeys.length;t++)if("$"===e.tagKeys[t].value.charAt(0))d(e.tagKeys[t].value,l.scopedVars).split(",").map((t=>{for(let a=0;a<e.tagValues.length;a++)if("$"===e.tagValues[a].value.charAt(0))d(e.tagValues[a].value,l.scopedVars).split(",").map((e=>{""!==t&&""!==e&&(console.log("tagString: ",t+"="+e+","),v+=t+"="+e+",")}));else{let l=e.tagValues[a].value;""!==t&&""!==l&&(console.log("tagString: ",t+"="+l+","),v+=t+"="+l+",")}}));else{let a=e.tagKeys[t].value;for(let t=0;t<e.tagValues.length;t++)if("$"===e.tagValues[t].value.charAt(0))d(e.tagValues[t].value,l.scopedVars).split(",").map((e=>{""!==a&&""!==e&&(console.log("tagString: ",a+"="+e+","),v+=a+"="+e+",")}));else{let l=e.tagValues[t].value;""!==a&&""!==l&&(console.log("tagString: ",a+"="+l+","),v+=a+"="+l+",")}}","===v.charAt(v.length-1)&&(v=v.substring(0,v.length-1)),console.log("FINAL tagString: ",v);let h="",b="";e.sortBy&&e.sortDirection&&e.sortBy.value&&(h=d(e.sortBy.value,l.scopedVars),b=e.sortDirection);let f=9999;e.rowLimit&&e.rowLimit>0&&e.rowLimit<1e4&&(f=e.rowLimit);let E=0;e.page&&e.page>=0&&(E=e.page);let S="sys_updated_on";e.grafanaTimerangeColumn&&e.grafanaTimerangeColumn.value&&(S=d(e.grafanaTimerangeColumn.value,l.scopedVars));let T=`{"targets":[{"target":"${i}","sysparm_query":"${m}","alertType":"${c}","alertState":"${u}","sortBy":"${h}","sortDirection":"${b}","limit":${f},"page":${E},"tagFilters":"${v}"}]}`,O=this.apiPath+"/v1/query/alerts";return e.grafanaTimerange&&(O+="?startTime="+t+"&endTime="+a+"&timerangeColumn="+S),console.log("source after replace"),console.log(o),console.log(T),console.log(O),this.apiClient.request({url:O,data:T,method:"POST",cacheOverride:""===n?null:n}).then((t=>(g("print alerts response from SNOW"),g(t),g(t=this.apiClient.appendInstanceNameToResponse(t.data,r)),this.apiClient.mapTextResponseToFrame(t,e.refId)))).catch((e=>{throw console.error("alert query error: ",e),new Error(e.data.error.message)}))}queryTable(e,t,a,l,r){console.log("queryTable target: ",e);let n="";e.tableName&&e.tableName.value&&(n=p(e.tableName.value,l.scopedVars));let o="";e.selectedtableColumns&&(e.selectedtableColumns.map((e=>{o+=p(e.value,l.scopedVars)+","})),","===o.charAt(o.length-1)&&(o=o.substring(0,o.length-1)));let s="";-1!==e.basicSysparm.constructor.toString().indexOf("Array")&&(s=this.parseBasicSysparm(e.basicSysparm,l),console.log("PARSE BASIC SYSPARM: ",s));let i=9999;e.rowLimit&&e.rowLimit>0&&e.rowLimit<1e4&&(i=e.rowLimit);let u=0;e.page&&e.page>=0&&(u=e.page);let c="",m="";e.sortBy&&e.sortDirection&&e.sortBy.value&&(c=d(e.sortBy.value,l.scopedVars),m=e.sortDirection);let v="false";e.getAlertCount&&(v=e.getAlertCount.value);let y="sys_updated_on";e.grafanaTimerangeColumn&&e.grafanaTimerangeColumn.value&&(y=d(e.grafanaTimerangeColumn.value,l.scopedVars));let h=`{"targets":[{"target":"${n}","columns":"${o}","sysparm":"${s}","limit":${i},"page":${u},"sortBy":"${c}","sortDirection":"${m}","getAlertCount":${v}}]}`,b=this.apiPath+"/v1/query/table";return e.grafanaTimerange&&(b+="?startTime="+t+"&endTime="+a+"&timerangeColumn="+y),console.log(e),console.log(h),this.apiClient.request({url:b,data:h,method:"POST",cacheOverride:""===r?null:r}).then((t=>(g("print table query response from SNOW"),g(t),this.apiClient.mapTextResponseToFrame(t.data,e.refId)))).catch((e=>{throw console.error("table query error: ",e),new Error(e.data.error.message)}))}getRowCount(e,t,a,l,r){let n="";e.tableName&&e.tableName.value&&(n=p(e.tableName.value,l.scopedVars));let o="";if(e.sysparam_query){let t=this.singleSysParamQuery(e.sysparam_query);console.log("NULL SYS PARAM: ",t),o=this.parseBasicSysparm(t,l.scopedVars),console.log("PARSE BASIC SYSPARM: ",o)}let s="sys_updated_on";e.grafanaTimerangeColumn&&e.grafanaTimerangeColumn.value&&(s=d(e.grafanaTimerangeColumn.value,l.scopedVars));let i=`{"targets":[{"target":"${n}","sysparm":"${o}"}]}`,u=this.apiPath+"/v1/query/row_count";return e.grafanaTimerange&&(u+="?startTime="+t+"&endTime="+a+"&timerangeColumn="+s),console.log(e),console.log(i),this.apiClient.request({url:u,data:i,method:"POST",cacheOverride:""===r?null:r}).then((t=>(g("print row count response from SNOW"),g(t),this.apiClient.mapTextResponseToFrame(t.data,e.refId)))).catch((e=>{throw console.error("row count query error: ",e),new Error(e.data.error.message)}))}getAggregateQuery(e,t,a,l,r){let n="",o="",s="",i="",u="";if(e.tableName&&e.tableName.value&&(n=p(e.tableName.value,l.scopedVars)),"string"==typeof e.groupBy?""!==e.groupBy&&(o=d(e.groupBy,l.scopedVars)):e.groupBy&&e.groupBy.value&&(o=d(e.groupBy.value,l.scopedVars)),e.selectedAggregateType&&e.selectedAggregateType.value&&(s=e.selectedAggregateType.value),e.aggregateColumn&&e.aggregateColumn.value&&(i=d(e.aggregateColumn.value,l.scopedVars)),e.sysparam_query){let t=this.singleSysParamQuery(e.sysparam_query);console.log("NULL SYS PARAM: ",t),u=this.parseBasicSysparm(t,l.scopedVars),console.log("PARSE BASIC SYSPARM: ",u)}let c=9999;e.rowLimit&&e.rowLimit>0&&e.rowLimit<1e4&&(c=e.rowLimit);let m="sys_updated_on";e.grafanaTimerangeColumn&&e.grafanaTimerangeColumn.value&&(m=d(e.grafanaTimerangeColumn.value,l.scopedVars));let g=`{"targets":[{"target":"${n}","type":"${s}","column":"${i}","groupBy":"${o}","sysparm":"${u}","limit":${c}}]}`,v=this.apiPath+"/v1/query/aggregate";return e.grafanaTimerange&&(v+="?startTime="+t+"&endTime="+a+"&timerangeColumn="+m),console.log("getAggregate target: ",e),console.log("getAggregate bodyData: ",g),this.apiClient.request({url:v,data:g,method:"POST",cacheOverride:""===r?null:r}).then((t=>(console.log("print aggregate query response from SNOW: ",t),this.apiClient.mapTextResponseToFrame(t.data.result,e.refId)))).catch((e=>{throw console.error("aggregate query error: ",e),new Error(e.data.error.message)}))}getGeohashMap(e,t,a){let l="",r="",n="";if(e.tableName&&e.tableName.value&&(l=p(e.tableName.value,t.scopedVars)),"string"==typeof e.groupBy?""!==e.groupBy&&(r=d(e.groupBy,t.scopedVars)):"object"==typeof e.groupBy&&null!==e.groupBy&&""!==e.groupBy.value&&(r=d(e.groupBy.value,t.scopedVars)),e.sysparam_query){let a=this.singleSysParamQuery(e.sysparam_query);console.log("NULL SYS PARAM: ",a),n=this.parseBasicSysparm(a,t.scopedVars),console.log("PARSE BASIC SYSPARM: ",n)}let o=`{"targets":[{"target":"${l}","column":"${r}","sysparm":"${n}"}]}`;return console.log(e),console.log(o),this.apiClient.request({url:this.apiPath+"/v1/query/geohash_map",data:o,method:"POST",cacheOverride:""===a?null:a}).then((t=>(g("print geohash_map response from SNOW"),g(t),this.apiClient.mapTextResponseToFrame(t.data,e.refId)))).catch((e=>{throw console.error("geohash_map query error: ",e),new Error(e.data.error.message)}))}queryLogData(e,t,a,l,r){let n=e.compressLogs,o="";-1!==e.basicSysparm.constructor.toString().indexOf("Array")&&(o=this.parseBasicSysparm(e.basicSysparm,l),console.log("PARSE BASIC SYSPARM: ",o));let s=9999;e.rowLimit&&e.rowLimit>0&&e.rowLimit<1e4&&(s=e.rowLimit);let i=0;e.page&&e.page>=0&&(i=e.page);let u="",c="";e.sortBy&&e.sortDirection&&e.sortBy.value&&(u=d(e.sortBy.value,l.scopedVars),c=e.sortDirection);let p="";e.elasticSearch&&(p=d(e.elasticSearch,l.scopedVars));let m=`{"targets":[{"sysparm":"${o}","limit":${s},"page":${i},"sortBy":"${u}","sortDirection":"${c}","esSearch":"${p}","startTime":${t},"endTime":${a},"compressLog":${n}}]}`;return console.log(e),console.log(m),this.apiClient.request({url:this.apiPath+"/v1/query/logs",data:m,method:"POST",cacheOverride:""===r?null:r}).then((t=>(g("print query log data response from SNOW"),g(t),this.apiClient.mapTextResponseToFrame(t.data,e.refId)))).catch((e=>{throw console.error("log query error: ",e),new Error(e.data.error.message)}))}getTrendData(e,t,a,l,r){console.log(e);let n="",o="",s="",i="",u="",c="",m=1;e.tableName&&e.tableName.value&&(n=p(e.tableName.value,l.scopedVars)),-1!==e.basicSysparm.constructor.toString().indexOf("Array")&&(o=this.parseBasicSysparm(e.basicSysparm,l),console.log("PARSE BASIC SYSPARM: ",o)),e.elasticSearch&&(s=d(e.elasticSearch,l.scopedVars)),"string"==typeof e.groupBy?""!==e.groupBy&&(i=d(e.groupBy,l.scopedVars)):"object"==typeof e.groupBy&&null!==e.groupBy&&""!==e.groupBy.value&&(i=d(e.groupBy.value,l.scopedVars)),e.selectedTrendColumn&&e.selectedTrendColumn.value&&(u=d(e.selectedTrendColumn.value,l.scopedVars)),e.selectedTrendBy&&e.selectedTrendBy.value&&(c=d(e.selectedTrendBy.value,l.scopedVars)),e.trendPeriod&&e.trendPeriod>0&&(m=e.trendPeriod);let v=`{"targets":[{"target":"${n}","sysparm":"${o}","esSearch":"${s}","trendColumn":"${u}","trendBy":"${c}","period":${m},"groupBy":"${i}"}]}`;return console.log(e),console.log(v),this.apiClient.request({url:this.apiPath+"/v1/query/trend?startTime="+t+"&endTime="+a,data:v,method:"POST",cacheOverride:""===r?null:r}).then((t=>(g("print trend data response from SNOW"),g(t),this.apiClient.mapTrendResponseToFrame(t.data,e)))).catch((e=>{throw console.error("trend query error: ",e),new Error(e.data.error.message)}))}getOutageStatus(e,t,a,l,r){let n="";e.selectedServiceList&&e.selectedServiceList.value&&(n=d(e.selectedServiceList.value,l.scopedVars));let o=!1;"boolean"==typeof e.showPercent&&(o=e.showPercent);let s="";if(e.sysparam_query){let t=this.singleSysParamQuery(e.sysparam_query);console.log("NULL SYS PARAM: ",t),s=this.parseBasicSysparm(t,l.scopedVars),console.log("PARSE BASIC SYSPARM: ",s)}let i=9999;e.rowLimit&&e.rowLimit>0&&e.rowLimit<1e4&&(i=e.rowLimit);let u=0;e.page&&e.page>=0&&(u=e.page);let c=`{"targets":[{"target":"${n}","showPercent":${o},"sysparm":"${s}","limit":${i},"page":${u}}]}`;return console.log(c),this.apiClient.request({url:this.apiPath+"/v1/query/outage",data:c,method:"POST",cacheOverride:""===r?null:r}).then((t=>(g("print outage status response from SNOW"),g(t),o?this.apiClient.mapTextResponseToFrame(t.data,e.refId):this.apiClient.mapOutageResponseToFrame(t.data,e)))).catch((e=>{throw console.error("outage query error: ",e),new Error(e.data.error.message)}))}getAnomaly(e,t,a,l,r){console.log("query anomaly"),console.log(e);let n="";e.selectedtableColumns&&e.selectedtableColumns.length>0&&(e.selectedtableColumns.map((e=>{n+=p(e.value,l.scopedVars)+","})),","===n.charAt(n.length-1)&&(n=n.substring(0,n.length-1)));let o="";-1!==e.basicSysparm.constructor.toString().indexOf("Array")&&(o=this.parseBasicSysparm(e.basicSysparm,l),console.log("PARSE BASIC SYSPARM: ",o));let s=9999;e.rowLimit&&e.rowLimit>0&&e.rowLimit<1e4&&(s=e.rowLimit);let i=0;e.page&&e.page>=0&&(i=e.page);let u="",c="";e.sortBy&&e.sortDirection&&e.sortBy.value&&(u=d(e.sortBy.value,l.scopedVars),c=e.sortDirection);let m=`{"targets":[{"columns":"${n}","sysparm":"${o}","limit":${s},"page":${i},"sortBy":"${u}","sortDirection":"${c}"}]}`;return console.log(e),console.log(m),this.apiClient.request({url:this.apiPath+"/v1/query/anomaly",data:m,method:"POST",cacheOverride:""===r?null:r}).then((t=>(g("print anomaly query response from SNOW"),g(t),this.apiClient.mapTextResponseToFrame(t.data,e.refId)))).catch((e=>{throw console.error("anomaly query error: ",e),new Error(e.data.error.message)}))}getGroupByVariable(e,t,a,l,r){let n={tableName:e,groupBy:t,sysparam:a},o=this.apiPath+"/v1/variable/groupby";return console.log("getGroupByVariable bodyData: ",n),this.apiClient.request({url:o,data:n,method:"POST",cacheOverride:null}).then((e=>(console.log("print getGroupByVariable query response from SNOW: ",e),this.apiClient.mapResponseToVariable(e.data.result,l,r)))).catch((e=>{throw console.error("getGroupByVariable query error: ",e),new Error(e.data.error.message)}))}getGenericVariable(e,t,a,l,r,n,o){let s=`{"targets":[{"tableName":"${e}","nameColumn":"${t}","idColumn":"${a}","sysparm":"${l}","limit":${r}}]}`;return console.log(s),this.apiClient.request({url:this.apiPath+"/v1/variable/generic",data:s,method:"POST"}).then((e=>(g(e),this.apiClient.mapResponseToVariable(e.data,n,o)))).catch((e=>{throw console.error("generic variable error: ",e),new Error(e.data.error.message)}))}getMetricNamesInCIs(e,t,a,l){console.log("inside getMetricNamesInCIs"),console.log("print target"),console.log(e);let r=y(t);r=v(r);let n='{"targets":[{"target":"'+r+'","metricType":"'+e+'"}]}',o=this.apiPath+"/v1/variable/metrics";return console.log("source after replace"),console.log(r),console.log(n),this.apiClient.request({url:o,data:n,method:"POST"}).then((e=>(g(e),this.apiClient.mapResponseToVariable(e.data,a,l)))).catch((e=>{throw console.error("metric variable error: ",e),new Error(e.data.error.message)}))}getNestedCIS(e,t,a){let l=`{"targets":[{"ci": "${e.ci}",\n      "parentDepth":"${e.parentDepth}",\n      "childDepth":"${e.childDepth}",\n      "sysparm":"${e.sysparam}",\n      "type":"ci"}]}`;return console.log("get nested cis"),console.log(l),this.apiClient.request({url:this.apiPath+"/v1/variable/nested_value",data:l,method:"POST"}).then((e=>(g(e),this.apiClient.mapResponseToVariable(e.data,t,a)))).catch((e=>{throw console.error("nested cis variable error: ",e),new Error(e.data.error.message)}))}getNestedClasses(e,t,a){let l=`{"targets":[{"ci": "${e.ci}",\n      "parentDepth":"${e.parentDepth}",\n      "childDepth":"${e.childDepth}",\n      "sysparm":"${e.sysparam}",\n      "type":"class"}]}`;return console.log("get nested classes"),console.log(l),this.apiClient.request({url:this.apiPath+"/v1/variable/nested_value",data:l,method:"POST"}).then((e=>(g(e),this.apiClient.mapResponseToVariable(e.data,t,a)))).catch((e=>{throw console.error("nested classes variable error: ",e),new Error(e.data.error.message)}))}getV2NestedValues(e,t,a){return console.log("getV2NestedValues bodyObj: ",e),this.apiClient.request({url:this.apiPath+"/v2/variable/nested_value",data:e,method:"POST"}).then((e=>(console.log("getV2NestedValues response: ",e),this.apiClient.mapResponseToVariable(e.data.result,t,a)))).catch((e=>{throw console.error("getV2NestedValues error: ",e),new Error(e.data.error.message)}))}getMetricAnomalyOptions(){return[{label:"true",value:"true"},{label:"false",value:"false"}]}getAlertTypeOptions(){return[{label:"CI",value:"CI",description:"Get Alerts at the CI level"},{label:"Service",value:"Service",description:"Get Alerts at the Service level"},{label:"None",value:"None",description:"Ignore CI selection and use sysparam_query"}]}getAlertStateOptions(){return[{label:"Active",value:"Active",description:"Get Open and Reopen Alerts"},{label:"All",value:"All",description:"Get All alerts Open,Reopen, and Closed"}]}getAggregateTypeOptions(){return[{label:"AVG",value:"AVG"},{label:"COUNT",value:"COUNT"},{label:"MIN",value:"MIN"},{label:"MAX",value:"MAX"},{label:"STDDEV",value:"STDDEV"},{label:"SUM",value:"SUM"}]}getOperatorOptions(e){return"True/False"===e?[{label:"is",value:"=",description:"="},{label:"is not",value:"!=",description:"!="},{label:"is empty",value:"ISEMPTY",description:"ISEMPTY"},{label:"is not empty",value:"ISNOTEMPTY",description:"ISNOTEMPTY"},{label:"is anything",value:"ANYTHING",description:"ANYTHING"},{label:"is same",value:"SAMEAS",description:"SAMEAS"},{label:"is different",value:"NSAMEAS",description:"NSAMEAS"}]:"Integer"===e||"Long"===e||"Decimal"===e||"Floating Point Number"===e?[{label:"is",value:"=",description:"="},{label:"is not",value:"!=",description:"!="},{label:"is empty",value:"ISEMPTY",description:"ISEMPTY"},{label:"is not empty",value:"ISNOTEMPTY",description:"ISNOTEMPTY"},{label:"less than",value:"<",description:"<"},{label:"greater than",value:">",description:">"},{label:"less than or is",value:"<=",description:"<="},{label:"greater than or is",value:">=",description:">="},{label:"between",value:"BETWEEN",description:"BETWEEN"},{label:"is anything",value:"ANYTHING",description:"ANYTHING"},{label:"is same",value:"SAMEAS",description:"SAMEAS"},{label:"is different",value:"NSAMEAS",description:"NSAMEAS"},{label:"greater than field",value:"GT_FIELD",description:"GT_FIELD"},{label:"less than field",value:"LT_FIELD",description:"LT_FIELD"},{label:"greater than or is field",value:"GT_OR_EQUALS_FIELD",description:"GT_OR_EQUALS_FIELD"},{label:"less than or is field",value:"LT_OR_EQUALS_FIELD",description:"LT_OR_EQUALS_FIELD"}]:"Date/Time"===e||"Date"===e||"Time"===e?[{label:"on",value:"ON",description:"ON"},{label:"not on",value:"NOTON",description:"NOTON"},{label:"before",value:"<",description:"<"},{label:"at or before",value:"<=",description:"<="},{label:"after",value:">",description:">"},{label:"at or after",value:">=",description:">="},{label:"between",value:"BETWEEN",description:"BETWEEN"},{label:"relative (on or after)",value:"RELATIVEGE",description:"RELATIVEGE"},{label:"relative (on or before)",value:"RELATIVELE",description:"RELATIVELE"},{label:"relative (after)",value:"RELATIVEGT",description:"RELATIVEGT"},{label:"relative (before)",value:"RELATIVELT",description:"RELATIVELT"},{label:"relative (on)",value:"RELATIVEEE",description:"RELATIVEEE"},{label:"is empty",value:"ISEMPTY",description:"ISEMPTY"},{label:"is not empty",value:"ISNOTEMPTY",description:"ISNOTEMPTY"},{label:"is anything",value:"ANYTHING",description:"ANYTHING"},{label:"is same",value:"SAMEAS",description:"SAMEAS"},{label:"is different",value:"NSAMEAS",description:"NSAMEAS"},{label:"is more than",value:"MORETHAN",description:"MORETHAN"},{label:"is less than",value:"LESSTHAN",description:"LESSTHAN"}]:"Choice"===e?[{label:"is",value:"=",description:"="},{label:"is not",value:"!=",description:"!="},{label:"is one of",value:"IN",description:"IN"},{label:"is not one of",value:"NOT IN",description:"NOT IN"},{label:"contains",value:"LIKE",description:"LIKE"},{label:"does not contain",value:"NOT LIKE",description:"NOT LIKE"},{label:"starts with",value:"STARTSWITH",description:"STARTSWITH"},{label:"ends with",value:"ENDSWITH",description:"ENDSWITH"},{label:"is anything",value:"ANYTHING",description:"ANYTHING"},{label:"is same",value:"SAMEAS",description:"SAMEAS"},{label:"is different",value:"NSAMEAS",description:"NSAMEAS"},{label:"less than",value:"<",description:"<"},{label:"greater than",value:">",description:">"},{label:"less than or is",value:"<=",description:"<="},{label:"greater than or is",value:">=",description:">="},{label:"between",value:"BETWEEN",description:"BETWEEN"}]:"Reference"===e?[{label:"is",value:"=",description:"="},{label:"is not",value:"!=",description:"!="},{label:"is empty",value:"ISEMPTY",description:"ISEMPTY"},{label:"is not empty",value:"ISNOTEMPTY",description:"ISNOTEMPTY"},{label:"starts with",value:"STARTSWITH",description:"STARTSWITH"},{label:"ends with",value:"ENDSWITH",description:"ENDSWITH"},{label:"contains",value:"LIKE",description:"LIKE"},{label:"does not contain",value:"NOT LIKE",description:"NOT LIKE"},{label:"is one of",value:"IN",description:"IN"},{label:"is not one of",value:"NOT IN",description:"NOT IN"},{label:"is anything",value:"ANYTHING",description:"ANYTHING"},{label:"is same",value:"SAMEAS",description:"SAMEAS"},{label:"is different",value:"NSAMEAS",description:"NSAMEAS"},{label:"is empty string",value:"EMPTYSTRING",description:"EMPTYSTRING"},{label:"is (dynamic)",value:"DYNAMIC",description:"DYNAMIC"}]:[{label:"is",value:"=",description:"="},{label:"is not",value:"!=",description:"!="},{label:"is empty",value:"ISEMPTY",description:"ISEMPTY"},{label:"is not empty",value:"ISNOTEMPTY",description:"ISNOTEMPTY"},{label:"starts with",value:"STARTSWITH",description:"STARTSWITH"},{label:"ends with",value:"ENDSWITH",description:"ENDSWITH"},{label:"contains",value:"LIKE",description:"LIKE"},{label:"does not contain",value:"NOT LIKE",description:"NOT LIKE"},{label:"is one of",value:"IN",description:"IN"},{label:"is not one of",value:"NOT IN",description:"NOT IN"},{label:"is empty",value:"ISEMPTY",description:"ISEMPTY"},{label:"is not empty",value:"ISNOTEMPTY",description:"ISNOTEMPTY"},{label:"is empty string",value:"EMPTYSTRING",description:"EMPTYSTRING"},{label:"is anything",value:"ANYTHING",description:"ANYTHING"},{label:"less than or is",value:"<=",description:"<="},{label:"greater than or is",value:">=",description:">="},{label:"between",value:"BETWEEN",description:"BETWEEN"},{label:"is same",value:"SAMEAS",description:"SAMEAS"},{label:"is different",value:"NSAMEAS",description:"NSAMEAS"}]}getSysparmTypeOptions(){return[{label:"is",value:"=",description:"="},{label:"is not",value:"!=",description:"!="},{label:"starts with",value:"STARTSWITH",description:"STARTSWITH"},{label:"ends with",value:"ENDSWITH",description:"ENDSWITH"},{label:"contains",value:"LIKE",description:"LIKE"},{label:"does not contain",value:"NOT LIKE",description:"NOT LIKE"},{label:"is empty",value:"ISEMPTY",description:"ISEMPTY"},{label:"is not empty",value:"ISNOTEMPTY",description:"ISNOTEMPTY"},{label:"is anything",value:"ANYTHING",description:"ANYTHING"},{label:"is one of",value:"IN",description:"IN"},{label:"is not one of",value:"NOT IN",description:"NOT IN"},{label:"is empty string",value:"EMPTYSTRING",description:"EMPTYSTRING"},{label:"less than or is",value:"<=",description:"<="},{label:"greater than or is",value:">=",description:">="},{label:"between",value:"BETWEEN",description:"BETWEEN"},{label:"instance of",value:"INSTANCEOF",description:"INSTANCEOF"}]}getTrendByOptions(){return[{label:"Minute",value:"minute"},{label:"Week",value:"week"}]}loadServiceOptions(e){let t=`{"targets":[{"target":"cmdb_ci_service","columns":"name:d,sys_id:v","sysparm":"operational_status=1^name!=All^nameLIKE${e||""}","limit":100,"sortBy":"name","sortDirection":"ASC"}]}`;return console.log(t),console.log("loadServiceOptions"),this.apiClient.request({url:this.apiPath+"/v1/query/table",data:t,method:"POST"}).then((e=>(g("print loadServiceOptions response from SNOW"),g(e),this.apiClient.mapChecksToValue(e.data)))).catch((e=>{throw console.error("loadServiceOptions error: ",e),new Error(e.data.error.message)}))}loadCIOptions(e,t){let a=t||"",l="";return l=e?`{"targets":[{"target":"em_impact_graph","columns":"child_name:d,child_id:v,child_id:d","sysparm":"business_service=${e}^child_nameLIKE${a}","limit":100,"sortBy":"ci_name","sortDirection":"ASC"}]}`:`{"targets":[{"target":"cmdb_ci","columns":"name:d,sys_id:v,sys_class_name:d","sysparm":"nameLIKE${a}^name!=NULL","limit":100,"sortBy":"cmdb_ci.name","sortDirection":"ASC"}]}`,console.log(l),console.log("loadCIOptions"),this.apiClient.request({url:this.apiPath+"/v1/query/table",data:l,method:"POST"}).then((e=>{g("print loadCIOptions response from SNOW"),g(e);let t=this.apiClient.mapChecksToValuePlusSuffix(e.data);return g(t),this.apiClient.mapSuffixToLabel(t)})).catch((e=>{throw console.error("loadCIOptions error: ",e),new Error(e.data.error.message)}))}loadResourceOptions(e,t){let a="",l=t||"";if(e){let t=e.map((e=>e.value));console.log(t),a=`{"targets":[{"target":"sa_metric_map","columns":"resource_id:d,resource_id:v","sysparm":"cmdb_ciIN${t}^resource_idLIKE${l}^resource_id!=NULL","limit":100,"sortBy":"resource_id","sortDirection":"ASC"}]}`}return this.apiClient.request({url:this.apiPath+"/v1/query/table",data:a,method:"POST"}).then((e=>{g("print loadResourceOptions response from SNOW"),g(e);let t=[{label:"*",value:"*"}].concat(this.apiClient.mapChecksToValue(e.data));return t=t.filter(((e,t,a)=>t===a.findIndex((t=>t.value===e.value)))),t})).catch((e=>{throw console.error("loadResourceOptions error: ",e),new Error(e.data.error.message)}))}loadMetricOptions(e,t){let a="",l=t||"";if(void 0!==e){let t=e.map((e=>e.value));console.log(t),a=`{"targets":[{"target":"sa_metric_map","columns":"metric_type_id.metric_type_tiny_name:d,metric_type_id:v","sysparm":"cmdb_ciIN${t}^metric_type_id.metric_type_tiny_nameLIKE${l}","limit":100,"sortBy":"","sortDirection":"ASC"}]}`}return this.apiClient.request({url:this.apiPath+"/v1/query/table",data:a,method:"POST"}).then((e=>{g("print loadMetricOptions response from SNOW"),g(e);let t=[{label:"*",value:"*"}].concat(this.apiClient.mapChecksToValue(e.data));return t=t.filter(((e,t,a)=>t===a.findIndex((t=>t.value===e.value)))),t})).catch((e=>{throw console.error("loadMetricOptions error: ",e),new Error(e.data.error.message)}))}loadColumnChoices(e,t,a,l){if(!t)return[];if("True/False"===l)return[{label:"True",value:"true"},{label:"False",value:"false"}];let r=`{"targets":[{"target":"sys_choice","columns":"label,value","sysparm":"name=${e}^element!=NULL^elementLIKE${t}^labelLIKE${a}^language=en","limit":100,"sortBy":"label","sortDirection":"ASC"}]}`;return console.log("loadColumnChoices bodyData: ",r),this.apiClient.request({url:this.apiPath+"/v1/query/table",data:r,method:"POST"}).then((e=>(console.log("loadColumnChoices response: ",e),this.apiClient.mapChecksToValue(e.data)))).catch((e=>{throw console.error("loadColumnChoices error: ",e),new Error(e.data.error.message)}))}getDateTimePresetChoices(){return[{label:"Today",value:"Today@javascript:gs.beginningOfToday()@javascript:gs.endOfToday()"},{label:"Yesterday",value:"Yesterday@javascript:gs.beginningOfYesterday()@javascript:gs.endOfYesterday()"},{label:"Tomorrow",value:"Tomorrow@javascript:gs.beginningOfTomorrow()@javascript:gs.endOfTomorrow()"},{label:"This Week",value:"This week@javascript:gs.beginningOfThisWeek()@javascript:gs.endOfThisWeek()"},{label:"Last Week",value:"Last week@javascript:gs.beginningOfLastWeek()@javascript:gs.endOfLastWeek()"},{label:"Next Week",value:"Next week@javascript:gs.beginningOfNextWeek()@javascript:gs.endOfNextWeek()"},{label:"This Month",value:"This month@javascript:gs.beginningOfThisMonth()@javascript:gs.endOfThisMonth()"},{label:"Last Week",value:"Last month@javascript:gs.beginningOfLastMonth()@javascript:gs.endOfLastMonth()"},{label:"Next Month",value:"Next month@javascript:gs.beginningOfNextMonth()@javascript:gs.endOfNextMonth()"},{label:"Last 3 Months",value:"Last 3 months@javascript:gs.beginningOfLast3Months()@javascript:gs.endOfLast3Months()"},{label:"Last 6 Months",value:"Last 6 months@javascript:gs.beginningOfLast6Months()@javascript:gs.endOfLast6Months()"},{label:"Last 9 Months",value:"Last 9 months@javascript:gs.beginningOfLast9Months()@javascript:gs.endOfLast9Months()"},{label:"Last 12 Months",value:"Last 12 months@javascript:gs.beginningOfLast12Months()@javascript:gs.endOfLast12Months()"},{label:"This Quarter",value:"This quarter@javascript:gs.beginningOfThisQuarter()@javascript:gs.endOfThisQuarter()"},{label:"Last Quarter",value:"Last quarter@javascript:gs.beginningOfLastQuarter()@javascript:gs.endOfLastQuarter()"},{label:"Last 2 Quarters",value:"Last 2 quarters@javascript:gs.beginningOfLast2Quarters()@javascript:gs.endOfLast2Quarters()"},{label:"Next Quarter",value:"Next quarter@javascript:gs.beginningOfNextQuarter()@javascript:gs.endOfNextQuarter()"},{label:"Next 2 Quarter",value:"Next 2 quarters@javascript:gs.beginningOfNext2Quarters()@javascript:gs.endOfNext2Quarters()"},{label:"This Year",value:"This year@javascript:gs.beginningOfThisYear()@javascript:gs.endOfThisYear()"},{label:"Next Year",value:"Next year@javascript:gs.beginningOfNextYear()@javascript:gs.endOfNextYear()"},{label:"Last Year",value:"Last year@javascript:gs.beginningOfLastYear()@javascript:gs.endOfLastYear()"},{label:"Last 2 Years",value:"Last 2 years@javascript:gs.beginningOfLast2Years()@javascript:gs.endOfLast2Years()"},{label:"Last 7 Days",value:"Last 7 days@javascript:gs.beginningOfLast7Days()@javascript:gs.endOfLast7Days()"},{label:"Last 30 Days",value:"Last 30 days@javascript:gs.beginningOfLast30Days()@javascript:gs.endOfLast30Days()"},{label:"Last 60 Days",value:"Last 60 days@javascript:gs.beginningOfLast60Days()@javascript:gs.endOfLast60Days()"},{label:"Last 90 Days",value:"Last 90 days@javascript:gs.beginningOfLast90Days()@javascript:gs.endOfLast90Days()"},{label:"Last 30 Days",value:"Last 30 days@javascript:gs.beginningOfLast30Days()@javascript:gs.endOfLast30Days()"},{label:"Last 30 Days",value:"Last 30 days@javascript:gs.beginningOfLast30Days()@javascript:gs.endOfLast30Days()"},{label:"Last 30 Days",value:"Last 30 days@javascript:gs.beginningOfLast30Days()@javascript:gs.endOfLast30Days()"},{label:"Last 30 Days",value:"Last 30 days@javascript:gs.beginningOfLast30Days()@javascript:gs.endOfLast30Days()"},{label:"Last 30 Days",value:"Last 30 days@javascript:gs.beginningOfLast30Days()@javascript:gs.endOfLast30Days()"},{label:"Last 30 Days",value:"Last 30 days@javascript:gs.beginningOfLast30Days()@javascript:gs.endOfLast30Days()"},{label:"Last 30 Days",value:"Last 30 days@javascript:gs.beginningOfLast30Days()@javascript:gs.endOfLast30Days()"}]}getTableColumnOptions(e,t=""){if(void 0===e)return[];let a=`{"targets":[{"table":"${e}", "typeFilter":"${t}"}]}`;return console.log(a),this.apiClient.request({url:this.apiPath+"/v1/select/table_columns",data:a,method:"POST"}).then((e=>(g("print getTableColumnOptions response from SNOW"),g(e),this.apiClient.mapValueAsSuffix(e.data,!0)))).catch((e=>{throw console.error("getTableColumnOptions error: ",e),new Error(e.data.error.message)}))}loadTableOptions(e){let t=`{"targets":[{"target":"sys_db_object","columns":"label,name","sysparm":"nameLIKE${e}^ORlabelLIKE${e}","limit":100}]}`;return console.log(t),console.log("loadTableOptions"),this.apiClient.request({url:this.apiPath+"/v1/query/table",data:t,method:"POST"}).then((e=>{g("print loadTableOptions response from SNOW"),g(e);let t=this.apiClient.mapChecksToValue(e.data);return g(t),this.apiClient.mapValueAsSuffix(t,!1)})).catch((e=>{throw console.error("loadTableOptions error: ",e),new Error(e.data.error.message)}))}getRelationshipTypeOptions(){let e='{"targets":[{"tableName":"cmdb_rel_type","nameColumn":"name","idColumn":"sys_id","sysparm":"","limit":500}]}';return console.log(e),this.apiClient.request({url:this.apiPath+"/v1/variable/generic",data:e,method:"POST"}).then((e=>(console.log("getRelationshipTypeOptions response: ",e),this.apiClient.mapChecksToValue(e.data)))).catch((e=>{throw console.error("generic variable error: ",e),new Error(e.data.error.message)}))}loadStartingPointOptions(e){console.log("loadStartingPointOptions search: ",e);let t=`{"targets":[{"tableName":"cmdb_ci","nameColumn":"name","idColumn":"sys_id","sysparm":"nameLIKE${e}","limit":50}]}`;return console.log(t),this.apiClient.request({url:this.apiPath+"/v1/variable/generic",data:t,method:"POST"}).then((e=>(console.log("loadStartingPointOptions response: ",e),this.apiClient.mapChecksToValue(e.data)))).catch((e=>{throw console.error("loadStartingPointOptions error: ",e),new Error(e.data.error.message)}))}loadClassOptions(e){let t=`{"targets":[{"tableName":"sys_db_object","nameColumn":"label","idColumn":"name","sysparm":"nameSTARTSWITHcmdb_ci^labelLIKE${e}","limit":50}]}`;return console.log(t),this.apiClient.request({url:this.apiPath+"/v1/variable/generic",data:t,method:"POST"}).then((e=>(console.log("loadClassOptions response: ",e),this.apiClient.mapChecksToValue(e.data)))).catch((e=>{throw console.error("loadClassOptions error: ",e),new Error(e.data.error.message)}))}getTopologyCISummary(e){let t='{"targets":[{"target":"'+e+'"}]}';return console.log("source after replace"),console.log(t),this.apiClient.request({url:this.apiPath+"/query/ci_summary",data:t,method:"POST"}).then((e=>(g("print alerts response from SNOW"),g(e),e.data)))}removeFiltersWithAll(e){console.log("inside removeFiltersWithAll"),console.log("starting sysparam: ",e);const t=e.split("^").filter((e=>!e.includes("*")));return e=t.length>1?t.join("^"):t[0]||"",console.log("return sysparam: ",e),e}parseBasicSysparm(e,t){console.log("START OF PARSE BASIC SYSPARM: ",e);let a=[];e.forEach(((e,l)=>{var r,n,o;if(null===e.column)return;let s="",i=e.column;(null===(r=i)||void 0===r?void 0:r.value)&&(s=d(i.value,t.scopedVars));let u="",c=e.operator;(null===(n=c)||void 0===n?void 0:n.value)&&(u=d(c.value,t.scopedVars));let p="",m=e.value;(null===(o=m)||void 0===o?void 0:o.value)&&(p=d(m.value,t.scopedVars));let g=this.queryInstanceFormatter(s,u,p);""!==g.trim()&&a.push(g)}));const l=a.join("^");return console.log("END OF PARSE BASIC SYSPARM: ",l),l}singleSysParamQuery(e){const t=e.split("^"),a=["=","!=","ISEMPTY","ISNOTEMPTY","ANYTHING","SAMEAS","NSAMEAS","<",">","<=",">=","BETWEEN","GT_FIELD","LT_FIELD","GT_OR_EQUALS_FIELD","LT_OR_EQUALS_FIELD","ON","NOTON","RELATIVEGE","RELATIVELE","RELATIVEGT","RELATIVELT","RELATIVEEE","MORETHAN","LESSTHAN","IN","NOT IN","LIKE","NOT LIKE","STARTSWITH","ENDSWITH","EMPTYSTRING","DYNAMIC"];a.sort(((e,t)=>t.length-e.length));const l=[],r=[];for(const e of t)for(const t of a){const a=e.indexOf(t);if(-1!==a){const r=e.slice(0,a).trim(),n=e.slice(a+t.length).trim();l.push({column:r,operator:t,value:n});break}}for(const e of l){const{column:t,operator:a,value:l}=e,n={column:{value:t},operator:{value:a},value:{value:l},separator:{value:"^"}};r.push(n)}return r}queryInstanceFormatter(e,t,a){let l="",r="";if(console.log("INSIDE QueryInstanceFormatter"),console.log("STARTING SYSPARAM QUERY INSTANCE: ",e+t+a),a.includes("*"))return"";if(a.includes("NULL")){let n=",",o=a.split(n);r="^OR"+e+("IN"===t||"LIKE"===t?"=":"NOT IN"===t||"NOT LIKE"===t?"!=":t)+"NULL",l=e+t+(a=o.filter((e=>"NULL"!==e)).join(n))+r}else l=e+t+a;return console.log("RETURNING SYSPARAM QUERY INSTANCE: ",l),l}constructor(e){S(this,"apiClient",void 0),S(this,"apiPath",void 0);const{withCredentials:t,url:a,apiPath:l,cacheTimeout:r}=e;this.apiPath=l,this.apiClient=new E({"Content-Type":"application/json"},t,a,r)}}function O(e,t,a,l,r,n,o){try{var s=e[n](o),i=s.value}catch(e){return void a(e)}s.done?t(i):Promise.resolve(i).then(l,r)}function w(e){return function(){var t=this,a=arguments;return new Promise((function(l,r){var n=e.apply(t,a);function o(e){O(n,l,r,o,s,"next",e)}function s(e){O(n,l,r,o,s,"throw",e)}o(void 0)}))}}function C(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class I extends e.DataSourceApi{metricFindQuery(e,t){var a=this;return w((function*(){console.log("inside template variables metricFindQuery");let r=e.showAsterisk,n=e.showNull;if("global_image"===e.namespace)return[{label:a.globalImage,value:a.globalImage}];if("global_instance_name"===e.namespace)return[{label:a.instanceName,value:a.instanceName}];if("group_by"===e.namespace){if(console.log("inside group_by variable query"),void 0!==e.rawQuery){let o=e.rawQuery.split("||"),s=void 0===o[0]?"":(0,l.getTemplateSrv)().replace(o[0],t.scopedVars,"csv"),i=void 0===o[1]?"":(0,l.getTemplateSrv)().replace(o[1],t.scopedVars,"csv"),u=void 0===o[2]?"":(0,l.getTemplateSrv)().replace(o[2],t.scopedVars,"csv");return a.snowConnection.getGroupByVariable(s,i,u,r,n)}return[]}if("generic"===e.namespace){if(console.log("inside generic variable query"),void 0!==e.rawQuery){let o=e.rawQuery.split("||"),s=void 0===o[0]?"":(0,l.getTemplateSrv)().replace(o[0],t.scopedVars,"csv"),i=void 0===o[1]?"":(0,l.getTemplateSrv)().replace(o[1],t.scopedVars,"csv"),u=void 0===o[2]?"":(0,l.getTemplateSrv)().replace(o[2],t.scopedVars,"csv"),c=void 0===o[3]?"":(0,l.getTemplateSrv)().replace(o[3],t.scopedVars,"csv"),p=void 0===o[4]?"9999":(0,l.getTemplateSrv)().replace(o[4],t.scopedVars,"csv"),d=a.snowConnection.singleSysParamQuery(c);return c=a.snowConnection.parseBasicSysparm(d,t),a.snowConnection.getGenericVariable(s,i,u,c,p,r,n)}return[]}if("metric_names"===e.namespace){console.log("inside metric name variables metricFindQuery"),console.log(t);let o=(0,l.getTemplateSrv)().replace(e.rawQuery,t.scopedVars,"csv");console.log("RawQuery replacedValue= "+o);let s=o.split(",");return a.snowConnection.getMetricNamesInCIs("",s,r,n)}if("golden_metric_names"===e.namespace){console.log("inside metric name variables metricFindQuery"),console.log(t);let o=(0,l.getTemplateSrv)().replace(e.rawQuery,t.scopedVars,"csv");console.log("RawQuery replacedValue= "+o);let s=o.split(",");return a.snowConnection.getMetricNamesInCIs("GOLDEN",s,r,n)}if("custom_kpis"===e.namespace){console.log("inside metric name variables metricFindQuery"),console.log(t);let o=(0,l.getTemplateSrv)().replace(e.rawQuery,t.scopedVars,"csv");console.log("RawQuery replacedValue= "+o);let s=o.split(",");return a.snowConnection.getMetricNamesInCIs("CUSTOM_KPIS",s,r,n)}if("nested_cis"===e.namespace){console.log("inside nested cis variable query");let o=e.rawQuery.split("||");o.map(((e,a)=>{o[a]=(0,l.getTemplateSrv)().replace(e,t.scopedVars,"csv"),0===o[a].indexOf("$")&&(o=o.splice(a))}));let s=void 0===o[3]?"":(0,l.getTemplateSrv)().replace(o[3],t.scopedVars,"csv"),i=a.snowConnection.singleSysParamQuery(s);s=a.snowConnection.parseBasicSysparm(i,t);let u={ci:void 0===o[0]?"":o[0],parentDepth:void 0===o[1]?"":o[1],childDepth:void 0===o[2]?"":o[2],sysparam:s};console.log(u);let c=a.snowConnection.getNestedCIS(u,r,n);return console.log("nested cis return: ",c),c}if("nested_classes"===e.namespace){console.log("inside nested cis variable query");let o=e.rawQuery.split("||");o.map(((e,a)=>{o[a]=(0,l.getTemplateSrv)().replace(e,t.scopedVars,"csv"),0===o[a].indexOf("$")&&(o=o.splice(a))}));let s=void 0===o[3]?"":(0,l.getTemplateSrv)().replace(o[3],t.scopedVars,"csv"),i=a.snowConnection.singleSysParamQuery(s);s=a.snowConnection.parseBasicSysparm(i,t);let u={ci:void 0===o[0]?"":o[0],parentDepth:void 0===o[1]?"":o[1],childDepth:void 0===o[2]?"":o[2],sysparam:s};return console.log(u),a.snowConnection.getNestedClasses(u,r,n)}if("v2_nested_cis"===e.namespace||"v2_nested_classes"===e.namespace){console.log("inside v2_nested_values variable query. namespace: ",e.namespace);let o=e.rawQuery.split("||");o.map(((e,a)=>{o[a]=(0,l.getTemplateSrv)().replace(e,t.scopedVars,"csv"),0===o[a].indexOf("$")&&(o=o.splice(a))}));let s=void 0===o[3]?"":(0,l.getTemplateSrv)().replace(o[3],t.scopedVars,"csv"),i=a.snowConnection.singleSysParamQuery(s);s=a.snowConnection.parseBasicSysparm(i,t);let u={starting_point:void 0===o[0]?"":o[0],relationship_types:void 0===o[1]?"":o[1],excluded_classes:void 0===o[2]?"":o[2],parent_limit:s,child_limit:void 0===o[4]?"":o[4],type:"v2_nested_cis"===e.namespace?"ci":"class"},c=yield a.snowConnection.getV2NestedValues(u,r,n);return console.log("nested_values final value: ",c),c}}))()}query(t){var l=this;return w((function*(){const{range:r}=t,s=r.from.valueOf(),i=r.to.valueOf(),u=n().map(t.targets,(e=>{if(e.hide)return[];let r=n().cloneDeep(e);const u=a()(r,o);let c=u.selectedQueryCategory.value,p=u.cacheOverride;switch(void 0!==u.basic_sysparam&&null!==u.basic_sysparam&&u.basic_sysparam.length>0&&(u.basicSysparm=l.basicSysparmBackwardsCompatFix(u.basic_sysparam)),c){case"Topology":return l.snowConnection.getTopology(r,t,p);case"Node_Graph":return l.snowConnection.queryNodeGraph(r,t,p);case"Metrics":return l.snowConnection.getMetrics(r,s,i,t,p);case"Alerts":return l.snowConnection.getAlerts(r,s,i,t,l.instanceName,p);case"Table":return l.snowConnection.queryTable(r,s,i,t,p);case"Row_Count":return l.snowConnection.getRowCount(r,s,i,t,p);case"Aggregate":return l.snowConnection.getAggregateQuery(r,s,i,t,p);case"Geohash_Map":return l.snowConnection.getGeohashMap(r,t,p);case"Log_Data":return l.snowConnection.queryLogData(r,s,i,t,p);case"Trend_Data":return l.snowConnection.getTrendData(r,s,i,t,p);case"Outage_Status":return l.snowConnection.getOutageStatus(r,s,i,t,p);case"Anomaly":return l.snowConnection.getAnomaly(r,s,i,t,p);default:return[]}}));return Promise.all(n().flatten(u)).then(n().flatten).then((a=>({data:a,state:e.LoadingState.Done,key:t.requestId})))}))()}testDatasource(){return this.snowConnection.apiClient.request({url:this.apiPath,method:"GET"}).then((()=>({status:"success",message:"Data source connection is successful",title:"Success"}))).catch((e=>(console.log("Datasource test failed. Error: ",e),{status:"error",message:`Data source connection failed: ${e.statusText}`,title:"Error"})))}basicSysparmBackwardsCompatFix(e){return e.map((e=>({column:e[1]||null,operator:e[2]||null,value:e[3]||null,separator:e[4]||{label:"AND",value:"^"}})))}constructor(e){super(e),C(this,"snowConnection",void 0),C(this,"annotations",void 0),C(this,"instanceName",void 0),C(this,"globalImage",void 0),C(this,"apiPath",void 0);const t={type:e.type,url:e.url,name:e.name,basicAuth:e.basicAuth,withCredentials:e.withCredentials,apiPath:e.jsonData.apiPath,cacheTimeout:e.jsonData.cacheTimeout};this.globalImage=e.jsonData.imageURL,this.instanceName=e.jsonData.instanceName,this.apiPath=t.apiPath,this.snowConnection=new T(t),this.annotations={}}}var L=i(2650),A=i.n(L),N=i(7388);function _(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function P(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},l=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(l=l.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),l.forEach((function(t){_(e,t,a[t])}))}return e}function V(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);a.push.apply(a,l)}return a}(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))})),e}const F=({value:e,updateQuery:t})=>A().createElement(A().Fragment,null,A().createElement(N.InlineFieldRow,null,A().createElement(N.InlineField,{label:"Query Alert Count",labelWidth:20,tooltip:"Extra query per row to get the number of alerts on a ci. Adds extra processing, use wisely!"},A().createElement(N.RadioButtonGroup,{value:e.value,options:[{label:"No",value:"false"},{label:"Yes",value:"true"}],onChange:e=>t("getAlertCount",{label:e,value:e})})))),x=({updateQuery:e,defaultValue:t})=>A().createElement(A().Fragment,null,A().createElement(N.InlineFieldRow,null,A().createElement(N.InlineField,{label:"Elastic Search Query",labelWidth:20},A().createElement(N.Input,{name:"elasticSearch",width:60,defaultValue:t,onBlur:t=>e("elasticSearch",t.target.value)}))));function R(e,t,a,l,r,n,o){try{var s=e[n](o),i=s.value}catch(e){return void a(e)}s.done?t(i):Promise.resolve(i).then(l,r)}const M=({query:e,updateQuery:t,datasource:a})=>{const[l,r]=(0,L.useState)(e.groupBy),[n,o]=(0,L.useState)([{label:"Loading ...",value:""}]);return(0,L.useEffect)((()=>{let t=[],l=!1;function r(){var n;return n=function*(){var r;t=yield a.snowConnection.getTableColumnOptions(null===(r=e.tableName)||void 0===r?void 0:r.value),l||t.length>0&&o(t)},r=function(){var e=this,t=arguments;return new Promise((function(a,l){var r=n.apply(e,t);function o(e){R(r,a,l,o,s,"next",e)}function s(e){R(r,a,l,o,s,"throw",e)}o(void 0)}))},r.apply(this,arguments)}return function(){r.apply(this,arguments)}(),()=>{l=!0}}),[a.snowConnection,e.tableName]),A().createElement(A().Fragment,null,A().createElement(N.InlineFieldRow,null,A().createElement(N.InlineField,{labelWidth:20,label:"Group By",tooltip:"Select a column which will be used to group the results by."},A().createElement(N.Select,{width:40,isMulti:!1,options:n,isClearable:!0,value:l,isSearchable:!0,menuPlacement:"top",maxMenuHeight:200,allowCustomValue:!0,defaultValue:l,backspaceRemovesValue:!0,onChange:e=>{r(e),t("groupBy",e)},onCreateOption:e=>{r({label:e,value:e}),t("groupBy",{label:e,value:e})}}))))},j=({updateQuery:e,defaultValue:t})=>A().createElement(A().Fragment,null,A().createElement(N.InlineFieldRow,null,A().createElement(N.InlineField,{label:"Limit",labelWidth:20,tooltip:"Limit the number of results. Expects a number between 1 - 9999"},A().createElement(N.Input,{name:"limit",type:"number",max:9999,min:1,width:20,defaultValue:t,onBlur:t=>e("rowLimit",t.target.value)})))),D=({defaultValue:e,updateQuery:t})=>A().createElement(A().Fragment,null,A().createElement(N.InlineFieldRow,null,A().createElement(N.InlineField,{label:"Page",labelWidth:20,tooltip:"Page number used for pagination. Starts at page 0"},A().createElement(N.Input,{name:"page",type:"number",max:9999,min:0,width:20,defaultValue:e,onBlur:e=>t("page",e.target.valueAsNumber)}))));function Q(e,t,a,l,r,n,o){try{var s=e[n](o),i=s.value}catch(e){return void a(e)}s.done?t(i):Promise.resolve(i).then(l,r)}const q=({query:e,updateQuery:t,datasource:a})=>{const l=a.snowConnection.getAggregateTypeOptions(),[r,n]=(0,L.useState)([{label:"Loading ...",value:""}]);return(0,L.useEffect)((()=>{let t=[];console.log("SelectTableColumns - UseEffect");let l=!1;function r(){var o;return o=function*(){var r;t=yield a.snowConnection.getTableColumnOptions(null===(r=e.tableName)||void 0===r?void 0:r.value),l||t.length>0&&(console.log("Setting tableColumn options: ",t),e.aggregateColumn&&e.aggregateColumn.length>0&&(t=t.concat(e.aggregateColumn)),n(t))},r=function(){var e=this,t=arguments;return new Promise((function(a,l){var r=o.apply(e,t);function n(e){Q(r,a,l,n,s,"next",e)}function s(e){Q(r,a,l,n,s,"throw",e)}n(void 0)}))},r.apply(this,arguments)}return function(){r.apply(this,arguments)}(),()=>{l=!0}}),[a.snowConnection,e.tableName,e.aggregateColumn]),A().createElement(A().Fragment,null,A().createElement(N.InlineFieldRow,null,A().createElement(N.InlineField,{label:"Aggregate Function",labelWidth:20,tooltip:"Choose your aggregation function then the column to run this function on"},A().createElement(N.Select,{width:20,options:l,value:e.selectedAggregateType,defaultValue:e.selectedAggregateType,isSearchable:!0,isClearable:!0,isMulti:!1,backspaceRemovesValue:!0,allowCustomValue:!0,onCreateOption:e=>t("selectedAggregateType",{label:e,value:e}),onChange:e=>t("selectedAggregateType",e),maxMenuHeight:200})),A().createElement(N.InlineField,null,A().createElement(N.Select,{options:r,value:e.aggregateColumn,defaultValue:e.aggregateColumn,width:40,isSearchable:!0,isClearable:!0,isMulti:!1,backspaceRemovesValue:!0,allowCustomValue:!0,onChange:e=>t("aggregateColumn",e),onCreateOption:a=>{let l=[];void 0!==e.aggregateColumn?(l=[...e.aggregateColumn],l[l.length]={label:a,value:a}):l=[{label:a,value:a}],t("aggregateColumn",l)},maxMenuHeight:200}))))};function B(e,t,a,l,r,n,o){try{var s=e[n](o),i=s.value}catch(e){return void a(e)}s.done?t(i):Promise.resolve(i).then(l,r)}const $=({query:e,updateQuery:t,datasource:a,table:l})=>{const[r,n]=(0,L.useState)([{label:"Loading ...",value:""}]);return(0,L.useEffect)((()=>{let t=[];console.log("SelectTableColumns - UseEffect");let r=!1;function o(){var s;return s=function*(){var o;t=yield a.snowConnection.getTableColumnOptions(null===(o=l)||void 0===o?void 0:o.value),r||t.length>0&&(console.log("Setting tableColumn options: ",t),e.sortBy&&e.sortBy.length>0&&(t=t.concat(e.sortBy)),n(t))},o=function(){var e=this,t=arguments;return new Promise((function(a,l){var r=s.apply(e,t);function n(e){B(r,a,l,n,o,"next",e)}function o(e){B(r,a,l,n,o,"throw",e)}n(void 0)}))},o.apply(this,arguments)}return function(){o.apply(this,arguments)}(),()=>{r=!0}}),[a.snowConnection,l,e.sortBy]),A().createElement(A().Fragment,null,A().createElement(N.InlineFieldRow,null,A().createElement(N.InlineField,{label:"Sort By",labelWidth:20},A().createElement(N.Select,{width:40,options:r,value:e.sortBy,defaultValue:e.sortBy,isSearchable:!0,isClearable:!0,isMulti:!1,backspaceRemovesValue:!0,allowCustomValue:!0,onChange:e=>t("sortBy",e),onCreateOption:e=>t("sortBy",{label:e,value:e}),maxMenuHeight:200,menuPlacement:"top"})),A().createElement(N.InlineField,null,A().createElement(N.RadioButtonGroup,{value:e.sortDirection,options:[{label:"ASC",value:"ASC",icon:"arrow-up"},{label:"DESC",value:"DESC",icon:"arrow-down"}],onChange:e=>t("sortDirection",e)}))))};function W(e,t,a,l,r,n,o){try{var s=e[n](o),i=s.value}catch(e){return void a(e)}s.done?t(i):Promise.resolve(i).then(l,r)}const Y=({updateQuery:e,trendByOptions:t,query:a,datasource:l})=>{const[r,n]=(0,L.useState)([{label:"Loading ...",value:""}]);return(0,L.useEffect)((()=>{let e=[],t=!1;function r(){var o;return o=function*(){var r;e=yield l.snowConnection.getTableColumnOptions(null===(r=a.tableName)||void 0===r?void 0:r.value,"glide_date_time"),t||e.length>0&&n(e)},r=function(){var e=this,t=arguments;return new Promise((function(a,l){var r=o.apply(e,t);function n(e){W(r,a,l,n,s,"next",e)}function s(e){W(r,a,l,n,s,"throw",e)}n(void 0)}))},r.apply(this,arguments)}return function(){r.apply(this,arguments)}(),()=>{t=!0}}),[l.snowConnection,a.tableName]),A().createElement(A().Fragment,null,A().createElement(N.InlineFieldRow,null,A().createElement(N.InlineField,{label:"Trend",labelWidth:20},A().createElement(N.Select,{width:40,options:r,value:a.selectedTrendColumn,defaultValue:a.selectedTrendColumn,isSearchable:!0,isClearable:!0,backspaceRemovesValue:!0,allowCustomValue:!0,onChange:t=>e("selectedTrendColumn",t),onCreateOption:t=>e("selectedTrendColumn",{label:t,value:t}),maxMenuHeight:200})),A().createElement(N.InlineField,null,A().createElement(N.Select,{width:20,options:t,value:a.selectedTrendBy,defaultValue:a.selectedTrendBy,isSearchable:!0,isClearable:!0,backspaceRemovesValue:!0,allowCustomValue:!0,onChange:t=>e("selectedTrendBy",t),onCreateOption:t=>e("selectedTrendBy",{label:t,value:t}),maxMenuHeight:200})),A().createElement(N.InlineField,null,A().createElement(N.Input,{name:"period",type:"number",max:300,min:1,width:20,defaultValue:a.trendPeriod,onBlur:t=>e("trendPeriod",t.target.value)}))))},k=({value:e,updateQuery:t})=>A().createElement(A().Fragment,null,A().createElement(N.InlineFieldRow,null,A().createElement(N.InlineField,{label:"Show Uptime %",labelWidth:20},A().createElement(N.RadioButtonGroup,{options:[{label:"False",value:!1},{label:"True",value:!0}],value:e||!1,onChange:e=>t("showPercent",e)}))));function G(e,t,a,l,r,n,o){try{var s=e[n](o),i=s.value}catch(e){return void a(e)}s.done?t(i):Promise.resolve(i).then(l,r)}const U=({query:e,updateQuery:t,datasource:a,table:l})=>{const[r,n]=(0,L.useState)([{label:"Loading ...",value:""}]);return(0,L.useEffect)((()=>{let t=[];console.log("SelectTableColumns - UseEffect");let r=!1;function o(){var s;return s=function*(){var o;t=yield a.snowConnection.getTableColumnOptions(null===(o=l)||void 0===o?void 0:o.value,"glide_date_time"),r||t.length>0&&(console.log("Setting tableColumn options: ",t),e.grafanaTimerangeColumn&&e.grafanaTimerangeColumn.length>0&&(t=t.concat(e.grafanaTimerangeColumn)),n(t))},o=function(){var e=this,t=arguments;return new Promise((function(a,l){var r=s.apply(e,t);function n(e){G(r,a,l,n,o,"next",e)}function o(e){G(r,a,l,n,o,"throw",e)}n(void 0)}))},o.apply(this,arguments)}return function(){o.apply(this,arguments)}(),()=>{r=!0}}),[a.snowConnection,l,e.grafanaTimerangeColumn]),A().createElement(A().Fragment,null,A().createElement(N.InlineFieldRow,null,A().createElement(N.InlineField,{label:"Grafana Timerange",labelWidth:20,tooltip:"If selected, only results that fit inbetween your Grafana Timerange will be returned"},A().createElement(N.InlineSwitch,{value:e.grafanaTimerange,onChange:e=>t("grafanaTimerange",e.target.checked)})),e.grafanaTimerange&&A().createElement(N.InlineField,null,A().createElement(N.Select,{options:r,value:e.grafanaTimerangeColumn,defaultValue:e.grafanaTimerangeColumn,width:40,isSearchable:!0,isClearable:!0,isMulti:!1,backspaceRemovesValue:!0,allowCustomValue:!0,onChange:e=>t("grafanaTimerangeColumn",e),onCreateOption:e=>t("grafanaTimerangeColumn",{label:e,value:e}),maxMenuHeight:200}))))},H=({value:e,updateQuery:t})=>A().createElement(A().Fragment,null,A().createElement(N.InlineFieldRow,null,A().createElement(N.InlineField,{label:"Compress Logs",labelWidth:20},A().createElement(N.InlineSwitch,{value:e,onChange:e=>t("compressLogs",e.target.checked)})))),K=({loadOptions:e,value:t,updateQuery:a})=>A().createElement(A().Fragment,null,A().createElement(N.InlineFieldRow,null,A().createElement(N.InlineField,{label:"CI",labelWidth:20},A().createElement(N.AsyncSelect,{width:40,value:t,isMulti:!0,isClearable:!0,maxMenuHeight:200,isSearchable:!0,defaultValue:t,menuPlacement:"bottom",allowCustomValue:!0,allowCreateWhileLoading:!0,loadOptions:e,backspaceRemovesValue:!0,onChange:e=>a("selectedSourceList",e),onCreateOption:e=>{let l=[];void 0!==t?(l=[...t],l[l.length]={label:e,value:e}):l=[{label:e,value:e}],a("selectedSourceList",l)}})))),z=({loadOptions:e,value:t,updateQuery:a})=>A().createElement(A().Fragment,null,A().createElement(N.InlineFieldRow,null,A().createElement(N.InlineField,{label:"Metric Name",labelWidth:20},A().createElement(N.AsyncSelect,{width:40,value:t,isMulti:!0,isClearable:!0,maxMenuHeight:200,isSearchable:!0,defaultValue:t,allowCustomValue:!0,allowCreateWhileLoading:!0,className:"coloredSelect",loadOptions:e,backspaceRemovesValue:!0,onChange:e=>a("selectedMetricNameList",e),onCreateOption:e=>{let l=[];void 0!==t?(l=[...t],l[l.length]={label:e,value:e}):l=[{label:e,value:e}],a("selectedMetricNameList",l)}})))),X=({updateQuery:e,defaultValue:t})=>A().createElement(A().Fragment,null,A().createElement(N.InlineFieldRow,null,A().createElement(N.InlineField,{label:"Sysparam Query",labelWidth:20},A().createElement(N.Input,{width:60,name:"sysparam_query",defaultValue:t,onBlur:t=>e("sysparam_query",t.target.value)})))),J=({loadOptions:e,value:t,updateQuery:a})=>A().createElement(A().Fragment,null,A().createElement(N.InlineFieldRow,null,A().createElement(N.InlineField,{label:"Service",labelWidth:20},A().createElement(N.AsyncSelect,{width:40,value:t,isClearable:!0,maxMenuHeight:200,isSearchable:!0,defaultValue:t,defaultOptions:!0,menuPlacement:"bottom",allowCustomValue:!0,allowCreateWhileLoading:!0,loadOptions:e,backspaceRemovesValue:!0,onChange:e=>a("selectedServiceList",e),onCreateOption:e=>a("selectedServiceList",{label:e,value:e})})))),Z=({loadOptions:e,value:t,updateQuery:a})=>A().createElement(A().Fragment,null,A().createElement(N.InlineFieldRow,null,A().createElement(N.InlineField,{label:"Resource ID",labelWidth:20},A().createElement(N.AsyncSelect,{width:40,value:t,isMulti:!0,isClearable:!0,isSearchable:!0,maxMenuHeight:200,defaultValue:t,allowCustomValue:!0,allowCreateWhileLoading:!0,loadOptions:e,backspaceRemovesValue:!0,onChange:e=>a("selectedMetricTypeList",e),onCreateOption:e=>{let l=[];void 0!==t?(l=[...t],l[l.length]={label:e,value:e}):l=[{label:e,value:e}],a("selectedMetricTypeList",l)}})))),ee=({options:e,value:t,updateQuery:a})=>A().createElement(A().Fragment,null,A().createElement(N.InlineFieldRow,null,A().createElement(N.InlineField,{label:"Alert Type Filter",labelWidth:20},A().createElement(N.Select,{width:20,value:t,options:e,isClearable:!0,maxMenuHeight:200,isSearchable:!0,defaultValue:t,onChange:e=>a("selectedAlertTypeList",e)})))),te=({updateQuery:e,defaultValue:t})=>A().createElement(A().Fragment,null,A().createElement(N.InlineFieldRow,null,A().createElement(N.InlineField,{label:"Child Depth",labelWidth:20},A().createElement(N.Input,{width:20,name:"child_depth",defaultValue:t,onBlur:t=>e("topology_child_depth",t.target.value)})))),ae=({loadTableOptions:e,value:t,updateQuery:a})=>A().createElement(A().Fragment,null,A().createElement(N.InlineFieldRow,null,A().createElement(N.InlineField,{label:"Table Name",labelWidth:20},A().createElement(N.AsyncSelect,{value:t,isClearable:!0,maxMenuHeight:200,isSearchable:!0,defaultValue:t,defaultOptions:!0,menuPlacement:"bottom",allowCustomValue:!0,allowCreateWhileLoading:!0,backspaceRemovesValue:!0,prefix:A().createElement(N.Icon,{name:"table"}),loadOptions:e,width:40,onChange:e=>a("tableName",e),onCreateOption:e=>a("tableName",{label:e,value:e})})))),le=({options:e,value:t,updateQuery:a})=>A().createElement(A().Fragment,null,A().createElement(N.InlineFieldRow,null,A().createElement(N.InlineField,{label:"Alert State Filter",labelWidth:20},A().createElement(N.Select,{width:20,value:t,options:e,isClearable:!0,maxMenuHeight:200,isSearchable:!0,defaultValue:t,onChange:e=>a("selectedAlertStateList",e)})))),re=({updateQuery:e,defaultValue:t})=>A().createElement(A().Fragment,null,A().createElement(N.InlineFieldRow,null,A().createElement(N.InlineField,{label:"Parent Depth",labelWidth:20},A().createElement(N.Input,{width:20,name:"parent_depth",defaultValue:t,onBlur:t=>e("topology_parent_depth",t.target.value)}))));function ne(e,t,a,l,r,n,o){try{var s=e[n](o),i=s.value}catch(e){return void a(e)}s.done?t(i):Promise.resolve(i).then(l,r)}const oe=({query:e,updateQuery:t,datasource:a,table:l})=>{const[r,n]=(0,L.useState)(e.selectedtableColumns),[o,s]=(0,L.useState)([{label:"Loading ...",value:""}]);return(0,L.useEffect)((()=>{let e=[];console.log("SelectTableColumns - UseEffect");let t=!1;function n(){var o;return o=function*(){var n;e=yield a.snowConnection.getTableColumnOptions(null===(n=l)||void 0===n?void 0:n.value),t||e.length>0&&(console.log("Setting tableColumn options: ",e),r&&r.length>0&&(e=e.concat(r)),s(e))},n=function(){var e=this,t=arguments;return new Promise((function(a,l){var r=o.apply(e,t);function n(e){ne(r,a,l,n,s,"next",e)}function s(e){ne(r,a,l,n,s,"throw",e)}n(void 0)}))},n.apply(this,arguments)}return function(){n.apply(this,arguments)}(),()=>{t=!0}}),[a.snowConnection,l,r]),A().createElement(A().Fragment,null,A().createElement(N.InlineFieldRow,null,A().createElement(N.InlineField,{labelWidth:20,label:"Table Columns",tooltip:"Leave columns blank to return all columns in the dictionary"},A().createElement(N.Select,{isMulti:!0,options:o,isClearable:!0,maxMenuHeight:200,value:r,isSearchable:!0,menuPlacement:"bottom",allowCustomValue:!0,defaultValue:r,backspaceRemovesValue:!0,prefix:A().createElement(N.Icon,{name:"columns"}),width:40,onChange:e=>{n(e),t("selectedtableColumns",e)},onCreateOption:e=>{let a=[];void 0!==r?(a=[...r],a[a.length]={label:e,value:e}):a=[{label:e,value:e}],n(a),t("selectedtableColumns",a)}}))))},se=({options:e,value:t,updateQuery:a})=>A().createElement(A().Fragment,null,A().createElement(N.InlineFieldRow,null,A().createElement(N.InlineField,{label:"Anomaly",labelWidth:20},A().createElement(N.Select,{width:20,value:t,options:e,isClearable:!0,maxMenuHeight:200,defaultValue:t,onChange:e=>a("selectedMetricAnomalyList",e)})))),ie=({loadOptions:e,value:t,updateQuery:a})=>A().createElement(A().Fragment,null,A().createElement(N.InlineFieldRow,null,A().createElement(N.InlineField,{label:"Starting Point",labelWidth:20},A().createElement(N.AsyncSelect,{width:40,value:t,isClearable:!0,isSearchable:!0,defaultValue:t,defaultOptions:!0,allowCustomValue:!0,allowCreateWhileLoading:!0,loadOptions:e,backspaceRemovesValue:!0,onCreateOption:e=>a("selectedServiceList",{label:e,value:e}),onChange:e=>a("selectedServiceList",e)}))));function ue(e,t,a,l,r,n,o){try{var s=e[n](o),i=s.value}catch(e){return void a(e)}s.done?t(i):Promise.resolve(i).then(l,r)}const ce=({query:e,updateQuery:t,datasource:a})=>{const[l,r]=(0,L.useState)(e.relationshipTypes),[n,o]=(0,L.useState)([{label:"Loading ...",value:""}]);return(0,L.useEffect)((()=>{let e=[],t=!1;function r(){var n;return n=function*(){e=yield a.snowConnection.getRelationshipTypeOptions(),t||(l&&l.length>0&&(e=e.concat(l)),e.length>0&&o(e))},r=function(){var e=this,t=arguments;return new Promise((function(a,l){var r=n.apply(e,t);function o(e){ue(r,a,l,o,s,"next",e)}function s(e){ue(r,a,l,o,s,"throw",e)}o(void 0)}))},r.apply(this,arguments)}return function(){r.apply(this,arguments)}(),()=>{t=!0}}),[a.snowConnection,l]),A().createElement(A().Fragment,null,A().createElement(N.InlineFieldRow,null,A().createElement(N.InlineField,{label:"Relationship Types",labelWidth:20,tooltip:"include"},A().createElement(N.Select,{width:40,value:l,defaultValue:l,options:n,isClearable:!0,isSearchable:!0,isMulti:!0,allowCustomValue:!0,backspaceRemovesValue:!0,onChange:e=>{r(e),t("relationshipTypes",e)},onCreateOption:e=>{r([...l,{label:e,value:e}]),t("relationshipTypes",[...l,{label:e,value:e}])}}))))},pe=({loadOptions:e,value:t,updateQuery:a})=>A().createElement(A().Fragment,null,A().createElement(N.InlineFieldRow,null,A().createElement(N.InlineField,{label:"Filter Classes",labelWidth:20,tooltip:"exclude"},A().createElement(N.AsyncSelect,{width:40,value:t,defaultValue:t,isClearable:!0,isSearchable:!0,isMulti:!0,backspaceRemovesValue:!0,defaultOptions:!0,loadOptions:e,allowCustomValue:!0,allowCreateWhileLoading:!0,onChange:e=>a("excludedClasses",e),onCreateOption:e=>a("excludedClasses",[...t,{label:e,value:e}])}))));function de(e,t,a,l,r,n,o){try{var s=e[n](o),i=s.value}catch(e){return void a(e)}s.done?t(i):Promise.resolve(i).then(l,r)}function me(e){return function(){var t=this,a=arguments;return new Promise((function(l,r){var n=e.apply(t,a);function o(e){de(n,l,r,o,s,"next",e)}function s(e){de(n,l,r,o,s,"throw",e)}o(void 0)}))}}const ge=({index:e,value:t,datasource:a,updateValue:l,addRow:r,deleteRow:n,columnOptions:o,table:s,showAddRow:i})=>{var u;const[c,p]=(0,L.useState)([{label:"Loading ...",value:""}]),[d,m]=(0,L.useState)([{label:"Loading ...",value:""}]);return(0,L.useEffect)((()=>{console.log("BasicSysparmRow useEffect")}),[t.column]),(0,L.useEffect)((()=>{let e=[],l=[],r=!1;const n=(o=me((function*(){let e="";t.column&&(e=t.column.label.substring(t.column.label.indexOf("(")+1,t.column.label.indexOf(")"))),l=yield a.snowConnection.getOperatorOptions(e),r||m(l)})),function(){return o.apply(this,arguments)});var o;const i=function(){var l=me((function*(){var l,r;let n="";t.column&&(n=t.column.label.substring(t.column.label.indexOf("(")+1,t.column.label.indexOf(")"))),e=yield a.snowConnection.loadColumnChoices(null===(l=s)||void 0===l?void 0:l.value,null===(r=t.column)||void 0===r?void 0:r.value,"",n),e.length>0&&p(e)}));return function(){return l.apply(this,arguments)}}();return i(),n(),()=>{r=!0}}),[a.snowConnection,t.column,s]),A().createElement(A().Fragment,null,A().createElement(N.InlineFieldRow,null,0!==e&&A().createElement(N.InlineField,null,A().createElement(N.RadioButtonGroup,{options:[{label:"AND",value:"^"},{label:"OR",value:"^OR"}],value:(null===(u=t.separator)||void 0===u?void 0:u.value)||"^",onChange:t=>l(e,"separator",{label:t,value:t})})),A().createElement(N.InlineField,{label:0===e?"Sysparam Query":void 0,labelWidth:0===e?20:void 0},A().createElement(N.Select,{width:40,options:o,value:t.column,defaultValue:t.column,isSearchable:!0,isClearable:!0,isMulti:!1,backspaceRemovesValue:!0,allowCustomValue:!0,onChange:t=>l(e,"column",t),onCreateOption:t=>l(e,"column",{label:t,value:t})})),A().createElement(N.InlineField,null,A().createElement(N.Select,{width:20,options:d,value:t.operator,defaultValue:t.operator,isClearable:!0,backspaceRemovesValue:!0,allowCustomValue:!0,onChange:t=>l(e,"operator",t),onCreateOption:t=>l(e,"operator",{label:t,value:t})})),A().createElement(N.InlineField,null,A().createElement(N.Select,{width:20,options:c,value:t.value,defaultValue:t.value,isSearchable:!0,isClearable:!0,isMulti:!1,backspaceRemovesValue:!0,allowCustomValue:!0,onChange:t=>l(e,"value",t),onCreateOption:t=>l(e,"value",{label:t,value:t})})),e>0&&A().createElement(N.InlineField,null,A().createElement(N.ToolbarButton,{icon:"trash-alt",variant:"destructive",iconOnly:!0,onClick:()=>n(e)}))),i&&A().createElement(N.InlineFieldRow,null,A().createElement(N.InlineField,null,A().createElement(N.ToolbarButton,{icon:"plus",variant:"primary",onClick:()=>r()}))))};function ve(e,t,a,l,r,n,o){try{var s=e[n](o),i=s.value}catch(e){return void a(e)}s.done?t(i):Promise.resolve(i).then(l,r)}const ye=({query:e,updateQuery:t,datasource:a,table:l,multiUpdateQuery:r})=>{const[n,o]=(0,L.useState)([{label:"Loading ...",value:""}]);(0,L.useEffect)((()=>{let t=[],n=!1;function s(){var e;return e=function*(){var e;t=yield a.snowConnection.getTableColumnOptions(null===(e=l)||void 0===e?void 0:e.value),n||t.length>0&&(console.log("BasicSysparmContainer - Setting table column options"),o(t))},s=function(){var t=this,a=arguments;return new Promise((function(l,r){var n=e.apply(t,a);function o(e){ve(n,l,r,o,s,"next",e)}function s(e){ve(n,l,r,o,s,"throw",e)}o(void 0)}))},s.apply(this,arguments)}return e.basic_sysparam.length>0&&function(){let t=e.basic_sysparam.map((e=>({column:e[1]||null,operator:e[2]||null,value:e[3]||null,separator:e[4]||{label:"AND",value:"^"}})));r({basic_sysparam:[],basicSysparm:t})}(),function(){s.apply(this,arguments)}(),()=>{n=!0}}),[a.snowConnection,l,e.basic_sysparam,r]);const s=[...e.basicSysparm],i=e=>{let a=s;a.splice(e,1),t("basicSysparm",a)},u=()=>{let e=s;e.push({column:null,operator:null,value:null,separator:{label:"AND",value:"^"}}),t("basicSysparm",e)},c=(e,a,l)=>{let r=s;r[e][a]=l,t("basicSysparm",r)};return A().createElement(A().Fragment,null,s.map(((e,t)=>A().createElement(ge,{index:t,value:e,datasource:a,updateValue:c,addRow:u,deleteRow:i,columnOptions:n,table:l,key:t,showAddRow:t===s.length-1}))))},he=({query:e,updateQuery:t})=>A().createElement(A().Fragment,null,A().createElement(N.InlineFieldRow,null,A().createElement(N.InlineField,{label:"Value Type",labelWidth:20},A().createElement(N.RadioButtonGroup,{options:[{label:"Timeseries",value:"timeseries"},{label:"Latest Value",value:"latest"}],value:e.metricValueType,onChange:e=>t("metricValueType",e)}))));function be(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function fe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},l=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(l=l.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),l.forEach((function(t){be(e,t,a[t])}))}return e}function Ee(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Se=new e.DataSourcePlugin(I).setConfigEditor((e=>{const{options:t,onOptionsChange:a}=e;""===t.url&&(t.url="https://<instance_name>.service-now.com/"),void 0===t.jsonData.apiPath&&(t.jsonData.apiPath="/api/x_opti8_itom_grafa/grafana_api"),void 0===t.jsonData.cacheTimeout&&(t.jsonData.cacheTimeout=60),void 0===t.jsonData.imageURL&&(t.jsonData.imageURL="https://www.servicenow.com/content/dam/servicenow-assets/public/en-us/images/og-images/favicon.ico"),console.log("config opitons: ",t);const l=(e,l)=>{a(V(P({},t),{jsonData:V(P({},t.jsonData),{[e]:l})}))};return A().createElement(A().Fragment,null,A().createElement(N.Alert,{title:"Need more information?",severity:"info",elevated:!0},A().createElement(N.VerticalGroup,null,A().createElement("p",null,"Local documentation can be found ",A().createElement("a",{href:"/plugins/optimiz-servicenow-datasource"},"Here")),A().createElement("p",null,"Or",A().createElement("a",{href:"https://github.com/optimizca/servicenow-grafana/blob/main/README.md"},"Click here to view the documentation on GitHub")))),A().createElement(N.InlineFieldRow,null,A().createElement(N.InlineField,{labelWidth:20,label:"Logo URL",tooltip:"To access this value in each dashboard, create a variable query using namespace: global_image."},A().createElement(N.Input,{defaultValue:void 0===t.jsonData.imageURL?"":t.jsonData.imageURL,onBlur:e=>l("imageURL",e.target.value),width:60}))),A().createElement(N.InlineFieldRow,null,A().createElement(N.InlineField,{labelWidth:20,label:"API Path"},A().createElement(N.Input,{defaultValue:void 0===t.jsonData.apiPath?"":t.jsonData.apiPath,onBlur:e=>l("apiPath",e.target.value),width:40}))),A().createElement(N.DataSourceHttpSettings,{defaultUrl:"https://<instance_name>.service-now.com/",dataSourceConfig:t,showAccessOptions:!0,sigV4AuthToggleEnabled:!1,showForwardOAuthIdentityOption:!1,onChange:e=>{let t="";-1!==e.url.indexOf("https://")?t=e.url.substring(8,e.url.indexOf(".service-now",8)):-1!==e.url.indexOf("http://")&&(t=e.url.substring(7,e.url.indexOf(".service-now",7))),e.jsonData.instanceName=t,a(e)}}))})).setQueryEditor((e=>{const{query:t,onChange:a,datasource:l}=e,n=(0,r.defaults)(t,o),s=l.snowConnection.getMetricAnomalyOptions(),i=l.snowConnection.getAlertTypeOptions(),u=l.snowConnection.getAlertStateOptions(),c=l.snowConnection.getTrendByOptions(),p=e=>new Promise((t=>{setTimeout((()=>{t(l.snowConnection.loadServiceOptions(e))}),500)})),d=e=>new Promise((t=>{setTimeout((()=>{var a;t(l.snowConnection.loadCIOptions(null===(a=n.selectedServiceList)||void 0===a?void 0:a.value,e))}),500)})),m=e=>new Promise((t=>{setTimeout((()=>{t(l.snowConnection.loadTableOptions(e))}),500)})),g=e=>new Promise((t=>{setTimeout((()=>{t(l.snowConnection.loadStartingPointOptions(e))}),500)})),v=(e,t)=>{var l,r;a((l=fe({},n),r=null!=(r={[e]:t})?r:{},Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(r)):function(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);a.push.apply(a,l)}return a}(Object(r)).forEach((function(e){Object.defineProperty(l,e,Object.getOwnPropertyDescriptor(r,e))})),l))},y=e=>{a(fe({},n,e))},h={Table:{title:"Table",description:"Choose your own table to gather data from",content:A().createElement(A().Fragment,null,A().createElement(ae,{updateQuery:v,loadTableOptions:m,value:n.tableName}),A().createElement(oe,{query:n,updateQuery:v,datasource:l,table:n.tableName}),A().createElement(ye,{query:n,updateQuery:v,datasource:l,table:n.tableName,multiUpdateQuery:y}),A().createElement($,{query:n,updateQuery:v,datasource:l,table:n.tableName}),A().createElement(j,{defaultValue:n.rowLimit,updateQuery:v}),A().createElement(D,{defaultValue:n.page,updateQuery:v}),A().createElement(F,{value:n.getAlertCount,updateQuery:v}),A().createElement(U,{query:n,updateQuery:v,datasource:l,table:n.tableName}))},Aggregate:{title:"Aggregate",description:"Group by and apply aggregate functions to table data",content:A().createElement(A().Fragment,null,A().createElement(ae,{updateQuery:v,loadTableOptions:m,value:n.tableName}),A().createElement(M,{query:n,updateQuery:v,datasource:l}),A().createElement(q,{query:n,updateQuery:v,datasource:l}),A().createElement(X,{updateQuery:v,defaultValue:n.sysparam_query}),A().createElement(j,{defaultValue:n.rowLimit,updateQuery:v}),A().createElement(U,{query:n,updateQuery:v,datasource:l,table:n.tableName}))},Alerts:{title:"Alerts",description:"Get Alerts",content:A().createElement(A().Fragment,null,A().createElement(J,{loadOptions:p,value:n.selectedServiceList,updateQuery:v}),A().createElement(K,{loadOptions:d,value:n.selectedSourceList,updateQuery:v}),A().createElement(ee,{options:i,value:n.selectedAlertTypeList,updateQuery:v}),A().createElement(le,{options:u,value:n.selectedAlertStateList,updateQuery:v}),A().createElement(X,{updateQuery:v,defaultValue:n.sysparam_query}),A().createElement($,{query:n,updateQuery:v,datasource:l,table:{value:"em_alert"}}),A().createElement(j,{defaultValue:n.rowLimit,updateQuery:v}),A().createElement(D,{defaultValue:n.page,updateQuery:v}),A().createElement(U,{query:n,updateQuery:v,datasource:l,table:{value:"em_alert"}}))},Anomaly:{title:"Anomaly",description:"Parse values out of Alert Anomalies table",content:A().createElement(A().Fragment,null,A().createElement(oe,{query:n,updateQuery:v,datasource:l,table:{value:"em_alert_anomaly"}}),A().createElement(ye,{query:n,updateQuery:v,datasource:l,table:{value:"em_alert_anomaly"},multiUpdateQuery:y}),A().createElement($,{query:n,updateQuery:v,datasource:l,table:{value:"em_alert_anomaly"}}),A().createElement(j,{defaultValue:n.rowLimit,updateQuery:v}),A().createElement(D,{defaultValue:n.page,updateQuery:v}))},Geohash_Map:{title:"GeoHash Map",description:"Get map data from AWS or Azure",content:A().createElement(A().Fragment,null,A().createElement(ae,{updateQuery:v,loadTableOptions:m,value:n.tableName}),A().createElement(M,{query:n,updateQuery:v,datasource:l}),A().createElement(X,{updateQuery:v,defaultValue:n.sysparam_query}))},Log_Data:{title:"Log Data",description:"Get log data",content:A().createElement(A().Fragment,null,A().createElement(H,{value:n.compressLogs,updateQuery:v}),A().createElement(ye,{query:n,updateQuery:v,datasource:l,table:{value:"sn_occ_log_viewer_parent"},multiUpdateQuery:y}),A().createElement(x,{updateQuery:v,defaultValue:n.elasticSearch}),A().createElement($,{query:n,updateQuery:v,datasource:l,table:{value:"sn_occ_log_viewer_parent"}}),A().createElement(j,{defaultValue:n.rowLimit,updateQuery:v}),A().createElement(D,{defaultValue:n.page,updateQuery:v}))},Metrics:{title:"Metrics",description:"Get Timeseries metrics",content:A().createElement(A().Fragment,null,A().createElement(J,{loadOptions:p,value:n.selectedServiceList,updateQuery:v}),A().createElement(K,{loadOptions:d,value:n.selectedSourceList,updateQuery:v}),A().createElement(Z,{loadOptions:e=>new Promise((t=>{setTimeout((()=>{t(l.snowConnection.loadResourceOptions(n.selectedSourceList,e))}),500)})),value:n.selectedMetricTypeList,updateQuery:v}),A().createElement(z,{loadOptions:e=>new Promise((t=>{setTimeout((()=>{t(l.snowConnection.loadMetricOptions(n.selectedSourceList,e))}),500)})),value:n.selectedMetricNameList,updateQuery:v}),A().createElement(se,{options:s,value:n.selectedMetricAnomalyList,updateQuery:v}),A().createElement(he,{query:n,updateQuery:v}),A().createElement(X,{updateQuery:v,defaultValue:n.sysparam_query}))},Outage_Status:{title:"Outage Status",description:"Gathers business service status over the last 90 days",content:A().createElement(A().Fragment,null,A().createElement(J,{loadOptions:p,value:n.selectedServiceList,updateQuery:v}),A().createElement(k,{value:n.showPercent,updateQuery:v}),A().createElement(X,{updateQuery:v,defaultValue:n.sysparam_query}),A().createElement(j,{defaultValue:n.rowLimit,updateQuery:v}),A().createElement(D,{defaultValue:n.page,updateQuery:v}))},Row_Count:{title:"Row Count",description:"Get row count from query",content:A().createElement(A().Fragment,null,A().createElement(ae,{updateQuery:v,loadTableOptions:m,value:n.tableName}),A().createElement(X,{updateQuery:v,defaultValue:n.sysparam_query}),A().createElement(U,{query:n,updateQuery:v,datasource:l,table:n.tableName}))},Node_Graph:{title:"Node Graph",description:"Show relationships in the node graph panel",content:A().createElement(A().Fragment,null,A().createElement(ie,{loadOptions:g,value:n.selectedServiceList,updateQuery:v}),A().createElement(ce,{query:n,updateQuery:v,datasource:l}),A().createElement(pe,{loadOptions:e=>new Promise((t=>{setTimeout((()=>{t(l.snowConnection.loadClassOptions(e))}),500)})),value:n.excludedClasses,updateQuery:v}),A().createElement(re,{updateQuery:v,defaultValue:n.topology_parent_depth}),A().createElement(te,{updateQuery:v,defaultValue:n.topology_child_depth}))},Topology:{title:"Topology (Deprecated)",description:"Get Topology",content:A().createElement(A().Fragment,null,A().createElement(ie,{loadOptions:g,value:n.selectedServiceList,updateQuery:v}),A().createElement(re,{updateQuery:v,defaultValue:n.topology_parent_depth}),A().createElement(te,{updateQuery:v,defaultValue:n.topology_child_depth}),A().createElement(X,{updateQuery:v,defaultValue:n.sysparam_query}))},Trend_Data:{title:"Trend Data",description:"Get timeseries data based on a time trend",content:A().createElement(A().Fragment,null,A().createElement(ae,{updateQuery:v,loadTableOptions:m,value:n.tableName}),A().createElement(ye,{query:n,updateQuery:v,datasource:l,table:n.tableName,multiUpdateQuery:y}),A().createElement(x,{updateQuery:v,defaultValue:n.elasticSearch}),A().createElement(M,{query:n,updateQuery:v,datasource:l}),A().createElement(Y,{query:n,updateQuery:v,trendByOptions:c,datasource:l}))}};var b;return A().createElement(A().Fragment,null,A().createElement(N.HorizontalGroup,{justify:"space-between"},A().createElement(N.InlineFieldRow,{style:{paddingTop:"8px"}},A().createElement(N.InlineField,{label:"Query Category",labelWidth:20},A().createElement(N.Select,{width:40,options:(()=>{let e=[];for(let t in h){let a=h[t];e.push({label:a.title,value:t,description:a.description})}return e})(),value:n.selectedQueryCategory,onChange:e=>{v("selectedQueryCategory",e)},menuPlacement:"bottom",maxMenuHeight:220})))),h[null!==(b=n.selectedQueryCategory.value)&&void 0!==b?b:""].content)})).setVariableQueryEditor((({onChange:e,query:t})=>{const[a,l]=(0,L.useState)(t),r=()=>{e(a,`${a.rawQuery} (${a.namespace}) ${a.showAsterisk}`)},n=(e,t)=>{var r,n;l((r=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},l=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(l=l.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),l.forEach((function(t){Ee(e,t,a[t])}))}return e}({},a),n=null!=(n={[e]:t})?n:{},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):function(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);a.push.apply(a,l)}return a}(Object(n)).forEach((function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))})),r))};return A().createElement(A().Fragment,null,A().createElement(N.InlineFieldRow,null,A().createElement(N.InlineField,{label:"Namespace",labelWidth:20},A().createElement(N.Select,{options:[{label:"global_image",value:"global_image"},{label:"global_instance_name",value:"global_instance_name"},{label:"metric_names",value:"metric_names"},{label:"golden_metric_names",value:"golden_metric_names"},{label:"custom_kpis",value:"custom_kpis"},{label:"generic",value:"generic"},{label:"group_by",value:"group_by"},{label:"nested_cis",value:"nested_cis"},{label:"v2_nested_cis",value:"v2_nested_cis"},{label:"nested_classes",value:"nested_classes"},{label:"v2_nested_classes",value:"v2_nested_classes"}],value:a.namespace,onChange:e=>n("namespace",e.value),allowCustomValue:!1,isClearable:!1,isSearchable:!0,onBlur:r,width:30}))),A().createElement(N.InlineFieldRow,null,A().createElement(N.InlineField,{label:"Query",labelWidth:20,grow:!0},A().createElement(N.Input,{name:"rawQuery",onChange:e=>n("rawQuery",e.target.value),onBlur:r,value:a.rawQuery}))),A().createElement(N.InlineFieldRow,null,A().createElement(N.InlineField,{labelWidth:20,label:"Add Asterisk",tooltip:'The "ALL" option represents all the available choices in the variable list, while the "*" option represents any value.'},A().createElement(N.InlineSwitch,{disabled:!1,onBlur:r,transparent:!1,value:a.showAsterisk,onChange:e=>n("showAsterisk",e.target.checked)}))),A().createElement(N.InlineFieldRow,null,A().createElement(N.InlineField,{labelWidth:20,label:"Add NULL",tooltip:'The "NULL" option represents an empty value'},A().createElement(N.InlineSwitch,{disabled:!1,onBlur:r,transparent:!1,value:a.showNull,onChange:e=>n("showNull",e.target.checked)}))),A().createElement(N.Alert,{title:"",severity:"info"},A().createElement(N.VerticalGroup,null,A().createElement("p",null,"Documentation for variables can be found"," ",A().createElement("a",{href:"https://github.com/optimizca/servicenow-grafana#variables",rel:"noopener noreferrer",target:"_blank"},"(Here)")))))}))})(),u})()));
//# sourceMappingURL=module.js.map