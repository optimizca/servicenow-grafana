/*! For license information please see module.js.LICENSE.txt */
define(["@grafana/data","@grafana/runtime","@grafana/ui","lodash","react","rxjs"],(e,t,r,n,a,o)=>(()=>{var i=[e=>{"use strict";e.exports=a},e=>{"use strict";e.exports=r},t=>{"use strict";t.exports=e},e=>{"use strict";e.exports=n},e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},e=>{"use strict";e.exports=t},(e,t,r)=>{var n=r(11),a=r(29),o=r(30),i=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":i&&i in Object(e)?a(e):o(e)}},(e,t,r)=>{var n=r(12),a="object"==typeof self&&self&&self.Object===Object&&self,o=n||a||Function("return this")();e.exports=o},e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},e=>{e.exports=function(e){return e}},(e,t,r)=>{var n=r(6),a=r(4);e.exports=function(e){if(!a(e))return!1;var t=n(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},(e,t,r)=>{var n=r(7).Symbol;e.exports=n},(e,t,r)=>{var n="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g;e.exports=n},e=>{e.exports=function(e,t){return e===t||e!=e&&t!=t}},(e,t,r)=>{var n=r(10),a=r(15);e.exports=function(e){return null!=e&&a(e.length)&&!n(e)}},e=>{e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},e=>{var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,r){var n=typeof e;return!!(r=null==r?9007199254740991:r)&&("number"==n||"symbol"!=n&&t.test(e))&&e>-1&&e%1==0&&e<r}},(e,t,r)=>{e=r.nmd(e);var n=r(7),a=r(43),o=t&&!t.nodeType&&t,i=o&&e&&!e.nodeType&&e,l=i&&i.exports===o?n.Buffer:void 0,u=(l?l.isBuffer:void 0)||a;e.exports=u},(e,t,r)=>{e=r.nmd(e);var n=r(12),a=t&&!t.nodeType&&t,o=a&&e&&!e.nodeType&&e,i=o&&o.exports===a&&n.process,l=function(){try{var e=o&&o.require&&o.require("util").types;return e||i&&i.binding&&i.binding("util")}catch(e){}}();e.exports=l},(e,t,r)=>{var n=r(20),a=r(13),o=r(36),i=r(37),l=Object.prototype,u=l.hasOwnProperty,c=n((function(e,t){e=Object(e);var r=-1,n=t.length,c=n>2?t[2]:void 0;for(c&&o(t[0],t[1],c)&&(n=1);++r<n;)for(var s=t[r],f=i(s),p=-1,h=f.length;++p<h;){var d=f[p],v=e[d];(void 0===v||a(v,l[d])&&!u.call(e,d))&&(e[d]=s[d])}return e}));e.exports=c},(e,t,r)=>{var n=r(9),a=r(21),o=r(23);e.exports=function(e,t){return o(a(e,t,n),e+"")}},(e,t,r)=>{var n=r(22),a=Math.max;e.exports=function(e,t,r){return t=a(void 0===t?e.length-1:t,0),function(){for(var o=arguments,i=-1,l=a(o.length-t,0),u=Array(l);++i<l;)u[i]=o[t+i];i=-1;for(var c=Array(t+1);++i<t;)c[i]=o[i];return c[t]=r(u),n(e,this,c)}}},e=>{e.exports=function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}},(e,t,r)=>{var n=r(24),a=r(35)(n);e.exports=a},(e,t,r)=>{var n=r(25),a=r(26),o=r(9),i=a?function(e,t){return a(e,"toString",{configurable:!0,enumerable:!1,value:n(t),writable:!0})}:o;e.exports=i},e=>{e.exports=function(e){return function(){return e}}},(e,t,r)=>{var n=r(27),a=function(){try{var e=n(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=a},(e,t,r)=>{var n=r(28),a=r(34);e.exports=function(e,t){var r=a(e,t);return n(r)?r:void 0}},(e,t,r)=>{var n=r(10),a=r(31),o=r(4),i=r(33),l=/^\[object .+?Constructor\]$/,u=Function.prototype,c=Object.prototype,s=u.toString,f=c.hasOwnProperty,p=RegExp("^"+s.call(f).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!o(e)||a(e))&&(n(e)?p:l).test(i(e))}},(e,t,r)=>{var n=r(11),a=Object.prototype,o=a.hasOwnProperty,i=a.toString,l=n?n.toStringTag:void 0;e.exports=function(e){var t=o.call(e,l),r=e[l];try{e[l]=void 0;var n=!0}catch(e){}var a=i.call(e);return n&&(t?e[l]=r:delete e[l]),a}},e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},(e,t,r)=>{var n,a=r(32),o=(n=/[^.]+$/.exec(a&&a.keys&&a.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";e.exports=function(e){return!!o&&o in e}},(e,t,r)=>{var n=r(7)["__core-js_shared__"];e.exports=n},e=>{var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},e=>{var t=Date.now;e.exports=function(e){var r=0,n=0;return function(){var a=t(),o=16-(a-n);if(n=a,o>0){if(++r>=800)return arguments[0]}else r=0;return e.apply(void 0,arguments)}}},(e,t,r)=>{var n=r(13),a=r(14),o=r(16),i=r(4);e.exports=function(e,t,r){if(!i(r))return!1;var l=typeof t;return!!("number"==l?a(r)&&o(t,r.length):"string"==l&&t in r)&&n(r[t],e)}},(e,t,r)=>{var n=r(38),a=r(47),o=r(14);e.exports=function(e){return o(e)?n(e,!0):a(e)}},(e,t,r)=>{var n=r(39),a=r(40),o=r(42),i=r(17),l=r(16),u=r(44),c=Object.prototype.hasOwnProperty;e.exports=function(e,t){var r=o(e),s=!r&&a(e),f=!r&&!s&&i(e),p=!r&&!s&&!f&&u(e),h=r||s||f||p,d=h?n(e.length,String):[],v=d.length;for(var y in e)!t&&!c.call(e,y)||h&&("length"==y||f&&("offset"==y||"parent"==y)||p&&("buffer"==y||"byteLength"==y||"byteOffset"==y)||l(y,v))||d.push(y);return d}},e=>{e.exports=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}},(e,t,r)=>{var n=r(41),a=r(8),o=Object.prototype,i=o.hasOwnProperty,l=o.propertyIsEnumerable,u=n(function(){return arguments}())?n:function(e){return a(e)&&i.call(e,"callee")&&!l.call(e,"callee")};e.exports=u},(e,t,r)=>{var n=r(6),a=r(8);e.exports=function(e){return a(e)&&"[object Arguments]"==n(e)}},e=>{var t=Array.isArray;e.exports=t},e=>{e.exports=function(){return!1}},(e,t,r)=>{var n=r(45),a=r(46),o=r(18),i=o&&o.isTypedArray,l=i?a(i):n;e.exports=l},(e,t,r)=>{var n=r(6),a=r(15),o=r(8),i={};i["[object Float32Array]"]=i["[object Float64Array]"]=i["[object Int8Array]"]=i["[object Int16Array]"]=i["[object Int32Array]"]=i["[object Uint8Array]"]=i["[object Uint8ClampedArray]"]=i["[object Uint16Array]"]=i["[object Uint32Array]"]=!0,i["[object Arguments]"]=i["[object Array]"]=i["[object ArrayBuffer]"]=i["[object Boolean]"]=i["[object DataView]"]=i["[object Date]"]=i["[object Error]"]=i["[object Function]"]=i["[object Map]"]=i["[object Number]"]=i["[object Object]"]=i["[object RegExp]"]=i["[object Set]"]=i["[object String]"]=i["[object WeakMap]"]=!1,e.exports=function(e){return o(e)&&a(e.length)&&!!i[n(e)]}},e=>{e.exports=function(e){return function(t){return e(t)}}},(e,t,r)=>{var n=r(4),a=r(48),o=r(49),i=Object.prototype.hasOwnProperty;e.exports=function(e){if(!n(e))return o(e);var t=a(e),r=[];for(var l in e)("constructor"!=l||!t&&i.call(e,l))&&r.push(l);return r}},e=>{var t=Object.prototype;e.exports=function(e){var r=e&&e.constructor;return e===("function"==typeof r&&r.prototype||t)}},e=>{e.exports=function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}},e=>{"use strict";function t(){var e=Object.create(null),t=0,r=0,n=0,a=!1;function o(t){n--,delete e[t]}this.put=function(t,r,a,i){if(void 0!==a&&("number"!=typeof a||isNaN(a)||a<=0))throw new Error("Cache timeout must be a positive number");if(void 0!==i&&"function"!=typeof i)throw new Error("Cache timeout callback must be a function");var l=e[t];l?clearTimeout(l.timeout):n++;var u={value:r,expire:a+Date.now()};return isNaN(u.expire)||(u.timeout=setTimeout(function(){o(t),i&&i(t,r)}.bind(this),a)),e[t]=u,r},this.del=function(t){var r=!0,n=e[t];return n?(clearTimeout(n.timeout),!isNaN(n.expire)&&n.expire<Date.now()&&(r=!1)):r=!1,r&&o(t),r},this.clear=function(){for(var o in e)clearTimeout(e[o].timeout);n=0,e=Object.create(null),a&&(t=0,r=0)},this.get=function(o){var i=e[o];if(void 0!==i){if(isNaN(i.expire)||i.expire>=Date.now())return a&&t++,i.value;a&&r++,n--,delete e[o]}else a&&r++;return null},this.size=function(){return n},this.memsize=function(){var t,r=0;for(t in e)r++;return r},this.debug=function(e){a=e},this.hits=function(){return t},this.misses=function(){return r},this.keys=function(){return Object.keys(e)},this.exportJson=function(){var t={};for(var r in e){var n=e[r];t[r]={value:n.value,expire:n.expire||"NaN"}}return JSON.stringify(t)},this.importJson=function(t,r){var n=JSON.parse(t),a=Date.now(),o=r&&r.skipDuplicates;for(var i in n)if(n.hasOwnProperty(i)){if(o)if(e[i])continue;var l=n[i],u=l.expire-a;if(u<=0){this.del(i);continue}u=u>0?u:void 0,this.put(i,l.value,u)}return this.size()}}e.exports=new t,e.exports.Cache=t},,e=>{"use strict";e.exports=o}],l={};function u(e){var t=l[e];if(void 0!==t)return t.exports;var r=l[e]={id:e,loaded:!1,exports:{}};return i[e](r,r.exports,u),r.loaded=!0,r.exports}u.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return u.d(t,{a:t}),t},u.d=(e,t)=>{for(var r in t)u.o(t,r)&&!u.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},u.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),u.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),u.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.nmd=e=>(e.paths=[],e.children||(e.children=[]),e);var c={};return(()=>{"use strict";u.r(c),u.d(c,{plugin:()=>Zt});var e=u(2),t=u(19),r=u.n(t),n=u(5),a=u(3),o=u.n(a),i={selectedQueryCategory:{label:"Metrics",value:"Metrics",description:"Get Timeseries metrics."},basic_sysparam:[],getAlertCount:{label:"No",value:"false"},cacheOverride:"",compressLogs:!1,grafanaTimerange:!1,sortDirection:"ASC",page:0,rowLimit:"2000",topology_child_depth:"3",topology_parent_depth:"3",relationshipTypes:[],excludedClasses:[],basicSysparm:[{column:null,operator:null,value:null,separator:null}]},l=u(50),s=u.n(l),f=u(52),p=["sys_created_on","created_on","last_event_time","sys_updated_on","time","start_time","end_time","start_date","end_date","Updated","work_start","work_end"];function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){var r=(0,n.getTemplateSrv)().replace(e,t,"csv"),a=r.indexOf(",");if(a>=0){for(;a>=0;)a=(r=r.replace(",","|")).indexOf(",");r="("+r+")"}return r.startsWith("(")&&r.endsWith(")")?"/"+r+"/":r}function v(e,t){return(0,n.getTemplateSrv)().replace(e,t,"csv")}function y(t,r,n,a,o){var i,l={name:e.TIME_SERIES_TIME_FIELD_NAME,type:e.FieldType.time,config:{custom:{}},values:new e.ArrayVector(t.map((function(e){return e[1]})))};i=(e.FieldType.string,new e.ArrayVector(t.map((function(e){return e[0]}))));var u=[l,{name:e.TIME_SERIES_VALUE_FIELD_NAME,type:null!=o?o:e.FieldType.number,labels:{},config:{displayName:r,custom:{}},values:i}];return{name:r,refId:n.refId,fields:u,length:t.length}}function m(e){1}function g(e){return")"===e.charAt(e.length-2)&&"("===e.charAt(1)&&(e=e.charAt(0)+e.slice(2,-2)+e.charAt(e.length-1)),e}function b(e){var t="";if(1===e.length)return e[0];if("string"==typeof e)return e;for(var r=0;r<e.length;r++)t+="|"+e[r];return"|"===t.charAt(0)&&(t="/"+(t=t.substring(1,t.length))+"/"),t}function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(){return(E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function S(){S=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function c(e,t,r,a){var o=t&&t.prototype instanceof p?t:p,i=Object.create(o.prototype),l=new _(a||[]);return n(i,"_invoke",{value:L(e,r,l)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var f={};function p(){}function h(){}function d(){}var v={};u(v,o,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(C([])));m&&m!==t&&r.call(m,o)&&(v=m);var g=d.prototype=p.prototype=Object.create(v);function b(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){var a;n(this,"_invoke",{value:function(n,o){function i(){return new t((function(a,i){!function n(a,o,i,l){var u=s(e[a],e,o);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==w(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,i,l)}),(function(e){n("throw",e,i,l)})):t.resolve(f).then((function(e){c.value=e,i(c)}),(function(e){return n("throw",e,i,l)}))}l(u.arg)}(n,o,a,i)}))}return a=a?a.then(i,i):i()}})}function L(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return I()}for(r.method=a,r.arg=o;;){var i=r.delegate;if(i){var l=T(i,r);if(l){if(l===f)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function T(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,T(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=s(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,f;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function C(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:I}}function I(){return{value:void 0,done:!0}}return h.prototype=d,n(g,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:h,configurable:!0}),h.displayName=u(d,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,u(e,l,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(E.prototype),u(E.prototype,i,(function(){return this})),e.AsyncIterator=E,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new E(c(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(g),u(g,l,"Generator"),u(g,o,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=C,_.prototype={constructor:_,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var l=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(l&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;x(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:C(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function L(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return T(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return T(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function O(e,t,r,n,a,o,i){try{var l=e[o](i),u=l.value}catch(e){return void r(e)}l.done?t(u):Promise.resolve(u).then(n,a)}function x(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var C,I=u(3),A=(C=I)&&C.__esModule?C:{default:C};var j=function(){function t(e,r,n,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),_(this,"requestOptions",void 0),_(this,"cache",void 0),_(this,"lastCacheDuration",void 0),_(this,"cacheTimeout",void 0),this.requestOptions={headers:e,withCredentials:r,url:n},this.cacheTimeout=a,this.cache=new(s().Cache)}var r,a,i,l,u;return r=t,(a=[{key:"cachedGet",value:(l=S().mark((function e(t,r,a,o,i,l,u){var c,s,f,p,h,d,v,y,m,g,b,w,E,T,O,x,_;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=60,c=void 0!==o&&o?o:this.cacheTimeout,s=this.requestOptions.url+r,f=s+="/body/"+l,a&&Object.keys(a).length>0&&(s=s+(s.search(/\?/)>=0?"&":"?")+a.map((function(e){var t=L(e,2),r=t[0],n=t[1];return"".concat(encodeURIComponent(r),"=").concat(encodeURIComponent(n))})).join("&")),this.lastCacheDuration!==c&&this.cache.del(s),this.lastCacheDuration=c,(p=this.cache.get(s))||!s.includes("?")){e.next=36;break}h=this.cache.keys(),d=0;case 15:if(!(d<h.length)){e.next=36;break}if(!(v=h[d]).includes(f)||!v.includes("?")){e.next=33;break}if(y=(y=v.substring(v.indexOf("?")+1,v.length)).split("&"),m=y[0].substring(y[0].indexOf("=")+1,y[0].length),g=y[1].substring(y[1].indexOf("=")+1,y[1].length),b=(b=s.substring(s.indexOf("?")+1,s.length)).split("&"),w=b[0].substring(b[0].indexOf("=")+1,b[0].length),E=b[1].substring(b[1].indexOf("=")+1,b[1].length),O=E-g,!((T=w-m)>=0)){e.next=33;break}if(!(T<=1e3*c&&O<=1e3*c)){e.next=33;break}return p=this.cache.get(v),e.abrupt("break",36);case 33:d++,e.next=15;break;case 36:if(!p){e.next=39;break}return e.abrupt("return",Promise.resolve(p));case 39:return x="",a.length>0&&(x="?"+a.map((function(e){var t=L(e,2),r=t[0],n=t[1];return"".concat(encodeURIComponent(r),"=").concat(encodeURIComponent(n))})).join("&")),_="","GET"===t?_=(0,n.getBackendSrv)().get(this.requestOptions.url+r,x):"POST"===t&&(_=(0,n.getBackendSrv)().post(this.requestOptions.url+r+x,l)),this.cache.put(s,_,1e3*c),e.abrupt("return",_);case 45:case"end":return e.stop()}}),e,this)})),u=function(){var e=this,t=arguments;return new Promise((function(r,n){var a=l.apply(e,t);function o(e){O(a,r,n,o,i,"next",e)}function i(e){O(a,r,n,o,i,"throw",e)}o(void 0)}))},function(e,t,r,n,a,o,i){return u.apply(this,arguments)})},{key:"request",value:function(e){e.withCredentials=this.requestOptions.withCredentials,e.headers=this.requestOptions.headers;var t=e.url;e.url=this.requestOptions.url+t;var r=(0,n.getBackendSrv)().fetch(E({},e));return(0,f.lastValueFrom)(r)}},{key:"mapResponseToVariable",value:function(e,t){var r=A.default.map(e,(function(e,t){if(void 0!==e.name&&void 0!==e.id)return""!==e.name&&null!==e.name||(e.name="NULL"),""!==e.id&&null!==e.id||(e.id="NULL"),{text:e.name,value:e.id};var r=Object.keys(e);return""!==e[r[0]]&&null!==e[r[0]]||(e[r[0]]="NULL"),!r[1]||""!==e[r[1]]&&null!==e[r[1]]||(e[r[1]]="NULL"),{text:e[r[0]],value:r[1]?e[r[1]]:e[r[0]]}}));return r.some((function(e){return"NULL"===e.text&&"NULL"===e.value}))||r.push({text:"NULL",value:"NULL"}),t&&r.push({text:"*",value:"*"}),r}},{key:"mapChecksToValue",value:function(e){return A.default.map(e,(function(e,t){if(void 0!==e.name&&void 0!==e.id)return""!==e.name&&null!==e.name||(e.name="NULL"),""!==e.id&&null!==e.id||(e.id="NULL"),{label:e.name,value:e.id};var r=Object.keys(e);return""!==e[r[0]]&&null!==e[r[0]]||(e[r[0]]="NULL"),!r[1]||""!==e[r[1]]&&null!==e[r[1]]||(e[r[1]]="NULL"),{label:e[r[0]],value:r[1]?e[r[1]]:e[r[0]]}}))}},{key:"mapChecksToValuePlusSuffix",value:function(e){return A.default.map(e,(function(e,t){var r=Object.keys(e);return{label:e[r[0]],value:r[1]?e[r[1]]:e[r[0]],suffix:e[r[2]]}}))}},{key:"mapValueSuffixToColumns",value:function(e){var t=A.default.map(e,(function(e,t){return{label:e.label+":display",value:e.value+":d"}})),r=A.default.map(e,(function(e,t){return{label:e.label+":value",value:e.value+":v"}})),n=t.concat(r);return n=o().orderBy(n,["label"],["asc"])}},{key:"mapValueAsSuffix",value:function(e,t){var r=A.default.map(e,(function(e){var r={label:t?e.label+" ("+e.type+")":e.label,value:e.value,description:e.value};return void 0!==e.options&&(r.options=A.default.map(e.options,(function(e){return{label:t?e.label+" ("+e.type+")":e.label,value:e.value,description:e.value}}))),r}));return r=o().orderBy(r,["label"],["asc"])}},{key:"mapSuffixToLabel",value:function(e){return A.default.map(e,(function(e){return{label:e.label+" ("+e.suffix+")",value:e.value}}))}},{key:"appendInstanceNameToResponse",value:function(e,t){return e=A.default.map(e,(function(e,r){return e.instanceName=t,e}))}},{key:"mapToTextValue",value:function(e){return A.default.map(e,(function(e,t){return e&&e.text&&e.value?{text:e.text,value:e.value}:A.default.isObject(e)?{text:e,value:t}:{text:e,value:e}}))}},{key:"mapOutageResponseToFrame",value:function(t,r){return t.map((function(t){var n=t.ci;return y(t.datapoints,n,r,0,e.FieldType.string)}))}},{key:"mapTrendResponseToFrame",value:function(t,r){return Object.keys(t[0]).map((function(n){return y(t[0][n].datapoints,n,r,0,e.FieldType.number)}))}},{key:"mapMetricsResponseToFrame",value:function(t,r){return t.map((function(t){var n=t.source+":"+t.metricName;return t.type.length>0&&(n+=":"+t.type),y(t.datapoints,n,r,0,e.FieldType.number)}))}},{key:"mapAnamMetricsResponseToFrame",value:function(t,r){var n=t.map((function(t){var n=t.ci_name,a=t.metric_name;return t.data.series.map((function(t){var o=n+":"+a+":"+t.type;return function(t,r,n,a,o){var i,l={name:e.TIME_SERIES_TIME_FIELD_NAME,type:e.FieldType.time,config:{custom:{}},values:new e.ArrayVector(t.map((function(e){return e.time})))};e.FieldType.string,i=new e.ArrayVector(t.map((function(e){return e.value})));var u=[l,{name:e.TIME_SERIES_VALUE_FIELD_NAME,type:o||e.FieldType.number,labels:{},config:{displayName:r,custom:{}},values:i}];return{name:r,refId:n.refId,fields:u,length:t.length}}(t.data,o,r,0,e.FieldType.number)}))}));return n=[].concat.apply([],n)}},{key:"mapTextResponseToFrame",value:function(t,r){var n=this,a=new e.MutableDataFrame({fields:[],refId:r});if(m(),!(t.length>0))return[];for(var o=Object.keys(t[0]),i=function(r){var i=t.map((function(e){return e[o[r]]}));"new"!==o[r]&&"value:display"!==o[r]||(i=n.sanitizeValues(i));var l,u,c=e.FieldType.string;i.length>=0&&(l=i[0],u=o[r],c=p.includes(u)?e.FieldType.time:"number"==typeof l?e.FieldType.number:e.FieldType.string),a.addField({name:o[r],type:c,values:i})},l=0;l<o.length;l++)i(l);return m(),a}},{key:"createTopologyFrame",value:function(e,t){return[{columns:[{text:"type"},{type:"time",text:"Time"},{text:"app"},{text:"target_app"},{text:"req_rate"},{text:"error_rate"}],rows:e.rows,refId:t||void 0,meta:void 0}]}},{key:"sanitizeValues",value:function(e){var t=[];return e.map((function(e){for(;-1!==e.indexOf("[code]");){var r=e.substring(0,e.indexOf("[code]")),n=e.substring(e.indexOf("[/code]")+7,e.length);if(-1!==e.indexOf("<a")){var a=e.substring(e.indexOf("<a"),e.indexOf("</a>",e.indexOf("<a"))),o=a.substring(a.indexOf(">")+1,a.length);-1!==o.indexOf("<")&&(o=o.substring(0,o.indexOf("<"))),e=r+o+n}else e=r+n}t.push(e)})),t}}])&&x(r.prototype,a),i&&x(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}();function N(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return P(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return P(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){l=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(l)throw o}}}}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function V(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var M=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),V(this,"apiClient",void 0),V(this,"apiPath",void 0);var r=e.basicAuth,n=e.withCredentials,a=e.url,o=e.apiPath,i=e.cacheTimeout;this.apiPath=o;var l={"Content-Type":"application/json"};"string"==typeof r&&r.length>0&&(l.Authorization=r),this.apiClient=new j(l,n,a,i)}var r,n,a;return r=t,(n=[{key:"queryNodeGraph",value:function(t,r,n){var a=null==t.selectedServiceList?"":v(t.selectedServiceList.value,r.scopedVars),o=t.relationshipTypes.map((function(e){return v(e.value,r.scopedVars)})),i=t.excludedClasses.map((function(e){return v(e.value,r.scopedVars)})),l={starting_point:a,parent_limit:""===t.topology_parent_depth?0:parseInt(v(t.topology_parent_depth,r.scopedVars),10),child_limit:""===t.topology_child_depth?0:parseInt(v(t.topology_child_depth,r.scopedVars),10),relationship_types:o,excluded_classes:i};return this.apiClient.request({url:this.apiPath+"/v1/query/node-graph",data:l,method:"POST",cacheOverride:""===n?null:n}).then((function(r){if(r.data.result.error.length>0)throw new Error(r.data.result.error);return function(t,r){var n=[];if(t.result.nodes.length>0){var a=new e.MutableDataFrame;a.name="Nodes",a.refId=r,a.meta={preferredVisualisationType:"nodeGraph"};var o=function(r){var n=t.result.nodes[0][r],o=e.FieldType.string;"object"===h(n)?o=e.FieldType.other:isNaN(n)||(o=e.FieldType.number);var i={};switch(r){case"id":i={links:[{url:"/d/AEOITnWnz?var-ci=${__data.fields.id}&var-ciClasses=${__data.fields.subtitle}",title:"Generic CI 360 Degree View",targetBlank:!0}]};break;case"arc__impact_clear":i={color:{mode:"fixed",fixedColor:"#77B27B"}};break;case"arc__impact_critical":i={color:{mode:"fixed",fixedColor:"#DD8581"}};break;case"arc__impact_major":i={color:{mode:"fixed",fixedColor:"#EABA75"}};break;case"arc__impact_minor":i={color:{mode:"fixed",fixedColor:"#E3D960"}};break;case"arc__impact_warning":i={color:{mode:"fixed",fixedColor:"#68ABDB"}};break;case"arc__impact_ok":i={color:{mode:"fixed",fixedColor:"#77B27B"}};break;default:i={}}var l={name:r,type:o,config:i,values:new e.ArrayVector(t.result.nodes.map((function(e){return e[r]})))};a.addField(l)};for(var i in t.result.nodes[0])o(i);n.push(a)}if(t.result.edges.length>0){var l=new e.MutableDataFrame;l.name="Edges",l.refId=r,l.meta={preferredVisualisationType:"nodeGraph"};var u=function(r){var n={name:r,type:e.FieldType.string,config:{},values:new e.ArrayVector(t.result.edges.map((function(e){return e[r]})))};l.addField(n)};for(var c in t.result.edges[0])u(c);n.push(l)}return n}(r.data,t.refId)})).catch((function(e){throw new Error(e.data.error)}))}},{key:"getTopology",value:function(e,t,r){var n=this,a="";e.selectedServiceList&&e.selectedServiceList.value&&(a=v(e.selectedServiceList.value,t.scopedVars));var o="";e.topology_child_depth&&(o=d(e.topology_child_depth,t.scopedVars));var i="";e.topology_parent_depth&&(i=d(e.topology_parent_depth,t.scopedVars));var l="";if(e.sysparam_query){var u=this.singleSysParamQuery(e.sysparam_query);l=this.parseBasicSysparm(u,t.scopedVars)}var c='{"targets":[{"target":"'.concat(a,'","child_depth":"').concat(o,'","parent_depth":"').concat(i,'","sysparm_query":"').concat(l,'"}]}');return this.apiClient.request({url:this.apiPath+"/v1/query/topology",data:c,method:"POST",cacheOverride:""===r?null:r}).then((function(t){return m(),m(),m(),n.apiClient.createTopologyFrame(t.data,e.refId)})).catch((function(e){throw new Error(e.data.error.message)}))}},{key:"getMetrics",value:function(e,t,r,n,a){var o=this,i=!1,l="",u=[],c="",s=[],f="",p="";if(e.selectedSourceList){var h=[];e.selectedSourceList.map((function(e){h.push(d(e.value,n.scopedVars))})),l=b(h)}if(e.selectedMetricTypeList&&(e.selectedMetricTypeList.map((function(e){u.push(d(e.value,n.scopedVars))})),c=b(u)),e.selectedMetricNameList&&(e.selectedMetricNameList.map((function(e){s.push(d(e.value,n.scopedVars))})),f=b(s)),e.selectedMetricAnomalyList&&e.selectedMetricAnomalyList.value&&"true"===d(e.selectedMetricAnomalyList.value,n.scopedVars)&&(i=!0),e.sysparam_query){var v=this.singleSysParamQuery(e.sysparam_query);p=this.parseBasicSysparm(v,n.scopedVars)}f=g(f),l=g(l);var y='{"targets":[{"target":"'.concat(l,'","resourceName":"').concat(c,'","metricName":"').concat(f,'","sysparm_query":"').concat(p,'"}]}'),m=this.apiPath+"/v1/query/single_metric?startTime="+t+"&endTime="+r;return"*"===f&&(m=this.apiPath+"/v1/query/all_metrics?startTime="+t+"&endTime="+r),!0===i&&(m=this.apiPath+"/v1/query/anomaly_metrics?startTime="+t+"&endTime="+r),this.apiClient.request({url:m,data:y,method:"POST",cacheOverride:""===a?null:a}).then((function(t){return!0===i?o.apiClient.mapAnamMetricsResponseToFrame(t.data,e):o.apiClient.mapMetricsResponseToFrame(t.data,e)})).catch((function(e){throw new Error(e)}))}},{key:"getAlerts",value:function(e,t,r,n,a,o){var i=this,l="";e.selectedServiceList&&e.selectedServiceList.value&&(l=v(e.selectedServiceList.value,n.scopedVars));var u="";if(e.selectedSourceList){var c=[];e.selectedSourceList.map((function(e){c.push(d(e.value,n.scopedVars))})),u=b(c)}var s=l,f="All",p="none",h="";if(e.selectedAlertStateList&&e.selectedAlertStateList.value&&(f=e.selectedAlertStateList.value),e.selectedAlertTypeList&&("CI"===e.selectedAlertTypeList.value?(p="ci",s=u):"OS"===e.selectedAlertTypeList.value?(p="os",-1!==(s=u).indexOf("(")&&(s=s.substring(s.indexOf("(")+1,s.indexOf(")")))):"None"===e.selectedAlertTypeList.value&&(p="none")),e.sysparam_query){var y=this.singleSysParamQuery(e.sysparam_query);h=this.parseBasicSysparm(y,n.scopedVars)}var g="";if(e.tagKeys&&e.tagValues)for(var w=0;w<e.tagKeys.length;w++)"$"===e.tagKeys[w].value.charAt(0)?v(e.tagKeys[w].value,n.scopedVars).split(",").map((function(t){for(var r=0;r<e.tagValues.length;r++)if("$"===e.tagValues[r].value.charAt(0))v(e.tagValues[r].value,n.scopedVars).split(",").map((function(e){""!==t&&""!==e&&(g+=t+"="+e+",")}));else{var a=e.tagValues[r].value;""!==t&&""!==a&&(g+=t+"="+a+",")}})):function(){for(var t=e.tagKeys[w].value,r=0;r<e.tagValues.length;r++)if("$"===e.tagValues[r].value.charAt(0))v(e.tagValues[r].value,n.scopedVars).split(",").map((function(e){""!==t&&""!==e&&(g+=t+"="+e+",")}));else{var a=e.tagValues[r].value;""!==t&&""!==a&&(g+=t+"="+a+",")}}();","===g.charAt(g.length-1)&&(g=g.substring(0,g.length-1));var E="",S="";e.sortBy&&e.sortDirection&&e.sortBy.value&&(E=v(e.sortBy.value,n.scopedVars),S=e.sortDirection);var L=9999;e.rowLimit&&e.rowLimit>0&&e.rowLimit<1e4&&(L=e.rowLimit);var T=0;e.page&&e.page>=0&&(T=e.page);var O="sys_updated_on";e.grafanaTimerangeColumn&&e.grafanaTimerangeColumn.value&&(O=v(e.grafanaTimerangeColumn.value,n.scopedVars));var x='{"targets":[{"target":"'.concat(s,'","sysparm_query":"').concat(h,'","alertType":"').concat(p,'","alertState":"').concat(f,'","sortBy":"').concat(E,'","sortDirection":"').concat(S,'","limit":').concat(L,',"page":').concat(T,',"tagFilters":"').concat(g,'"}]}'),_=this.apiPath+"/v1/query/alerts";return e.grafanaTimerange&&(_+="?startTime="+t+"&endTime="+r+"&timerangeColumn="+O),this.apiClient.request({url:_,data:x,method:"POST",cacheOverride:""===o?null:o}).then((function(t){return m(),m(),t=i.apiClient.appendInstanceNameToResponse(t.data,a),m(),i.apiClient.mapTextResponseToFrame(t,e.refId)})).catch((function(e){throw new Error(e.data.error.message)}))}},{key:"queryTable",value:function(e,t,r,n,a){var o=this,i="";e.tableName&&e.tableName.value&&(i=d(e.tableName.value,n.scopedVars));var l="";e.selectedtableColumns&&(e.selectedtableColumns.map((function(e){l+=d(e.value,n.scopedVars)+","})),","===l.charAt(l.length-1)&&(l=l.substring(0,l.length-1)));var u="";-1!==e.basicSysparm.constructor.toString().indexOf("Array")&&(u=this.parseBasicSysparm(e.basicSysparm,n));var c=9999;e.rowLimit&&e.rowLimit>0&&e.rowLimit<1e4&&(c=e.rowLimit);var s=0;e.page&&e.page>=0&&(s=e.page);var f="",p="";e.sortBy&&e.sortDirection&&e.sortBy.value&&(f=v(e.sortBy.value,n.scopedVars),p=e.sortDirection);var h="false";e.getAlertCount&&(h=e.getAlertCount.value);var y="sys_updated_on";e.grafanaTimerangeColumn&&e.grafanaTimerangeColumn.value&&(y=v(e.grafanaTimerangeColumn.value,n.scopedVars));var g='{"targets":[{"target":"'.concat(i,'","columns":"').concat(l,'","sysparm":"').concat(u,'","limit":').concat(c,',"page":').concat(s,',"sortBy":"').concat(f,'","sortDirection":"').concat(p,'","getAlertCount":').concat(h,"}]}"),b=this.apiPath+"/v1/query/table";return e.grafanaTimerange&&(b+="?startTime="+t+"&endTime="+r+"&timerangeColumn="+y),this.apiClient.request({url:b,data:g,method:"POST",cacheOverride:""===a?null:a}).then((function(t){return m(),m(),o.apiClient.mapTextResponseToFrame(t.data,e.refId)})).catch((function(e){throw new Error(e.data.error.message)}))}},{key:"getRowCount",value:function(e,t,r,n,a){var o=this,i="";e.tableName&&e.tableName.value&&(i=d(e.tableName.value,n.scopedVars));var l="";if(e.sysparam_query){var u=this.singleSysParamQuery(e.sysparam_query);l=this.parseBasicSysparm(u,n.scopedVars)}var c="sys_updated_on";e.grafanaTimerangeColumn&&e.grafanaTimerangeColumn.value&&(c=v(e.grafanaTimerangeColumn.value,n.scopedVars));var s='{"targets":[{"target":"'.concat(i,'","sysparm":"').concat(l,'"}]}'),f=this.apiPath+"/v1/query/row_count";return e.grafanaTimerange&&(f+="?startTime="+t+"&endTime="+r+"&timerangeColumn="+c),this.apiClient.request({url:f,data:s,method:"POST",cacheOverride:""===a?null:a}).then((function(t){return m(),m(),o.apiClient.mapTextResponseToFrame(t.data,e.refId)})).catch((function(e){throw new Error(e.data.error.message)}))}},{key:"getAggregateQuery",value:function(e,t,r,n,a){var o=this,i="",l="",u="",c="",s="";if(e.tableName&&e.tableName.value&&(i=d(e.tableName.value,n.scopedVars)),"string"==typeof e.groupBy?""!==e.groupBy&&(l=v(e.groupBy,n.scopedVars)):e.groupBy&&e.groupBy.value&&(l=v(e.groupBy.value,n.scopedVars)),e.selectedAggregateType&&e.selectedAggregateType.value&&(u=e.selectedAggregateType.value),e.aggregateColumn&&e.aggregateColumn.value&&(c=v(e.aggregateColumn.value,n.scopedVars)),e.sysparam_query){var f=this.singleSysParamQuery(e.sysparam_query);s=this.parseBasicSysparm(f,n.scopedVars)}var p=9999;e.rowLimit&&e.rowLimit>0&&e.rowLimit<1e4&&(p=e.rowLimit);var h="sys_updated_on";e.grafanaTimerangeColumn&&e.grafanaTimerangeColumn.value&&(h=v(e.grafanaTimerangeColumn.value,n.scopedVars));var y='{"targets":[{"target":"'.concat(i,'","type":"').concat(u,'","column":"').concat(c,'","groupBy":"').concat(l,'","sysparm":"').concat(s,'","limit":').concat(p,"}]}"),m=this.apiPath+"/v1/query/aggregate";return e.grafanaTimerange&&(m+="?startTime="+t+"&endTime="+r+"&timerangeColumn="+h),this.apiClient.request({url:m,data:y,method:"POST",cacheOverride:""===a?null:a}).then((function(t){return o.apiClient.mapTextResponseToFrame(t.data.result,e.refId)})).catch((function(e){throw new Error(e.data.error.message)}))}},{key:"getGeohashMap",value:function(e,t,r){var n=this,a="",o="",i="";if(e.tableName&&e.tableName.value&&(a=d(e.tableName.value,t.scopedVars)),"string"==typeof e.groupBy?""!==e.groupBy&&(o=v(e.groupBy,t.scopedVars)):"object"===k(e.groupBy)&&null!==e.groupBy&&""!==e.groupBy.value&&(o=v(e.groupBy.value,t.scopedVars)),e.sysparam_query){var l=this.singleSysParamQuery(e.sysparam_query);i=this.parseBasicSysparm(l,t.scopedVars)}var u='{"targets":[{"target":"'.concat(a,'","column":"').concat(o,'","sysparm":"').concat(i,'"}]}');return this.apiClient.request({url:this.apiPath+"/v1/query/geohash_map",data:u,method:"POST",cacheOverride:""===r?null:r}).then((function(t){return m(),m(),n.apiClient.mapTextResponseToFrame(t.data,e.refId)})).catch((function(e){throw new Error(e.data.error.message)}))}},{key:"queryLogData",value:function(e,t,r,n,a){var o=this,i=e.compressLogs,l="";-1!==e.basicSysparm.constructor.toString().indexOf("Array")&&(l=this.parseBasicSysparm(e.basicSysparm,n));var u=9999;e.rowLimit&&e.rowLimit>0&&e.rowLimit<1e4&&(u=e.rowLimit);var c=0;e.page&&e.page>=0&&(c=e.page);var s="",f="";e.sortBy&&e.sortDirection&&e.sortBy.value&&(s=v(e.sortBy.value,n.scopedVars),f=e.sortDirection);var p="";e.elasticSearch&&(p=v(e.elasticSearch,n.scopedVars));var h='{"targets":[{"sysparm":"'.concat(l,'","limit":').concat(u,',"page":').concat(c,',"sortBy":"').concat(s,'","sortDirection":"').concat(f,'","esSearch":"').concat(p,'","startTime":').concat(t,',"endTime":').concat(r,',"compressLog":').concat(i,"}]}");return this.apiClient.request({url:this.apiPath+"/v1/query/logs",data:h,method:"POST",cacheOverride:""===a?null:a}).then((function(t){return m(),m(),o.apiClient.mapTextResponseToFrame(t.data,e.refId)})).catch((function(e){throw new Error(e.data.error.message)}))}},{key:"getTrendData",value:function(e,t,r,n,a){var o=this,i="",l="",u="",c="",s="",f="",p=1;e.tableName&&e.tableName.value&&(i=d(e.tableName.value,n.scopedVars)),-1!==e.basicSysparm.constructor.toString().indexOf("Array")&&(l=this.parseBasicSysparm(e.basicSysparm,n)),e.elasticSearch&&(u=v(e.elasticSearch,n.scopedVars)),"string"==typeof e.groupBy?""!==e.groupBy&&(c=v(e.groupBy,n.scopedVars)):"object"===k(e.groupBy)&&null!==e.groupBy&&""!==e.groupBy.value&&(c=v(e.groupBy.value,n.scopedVars)),e.selectedTrendColumn&&e.selectedTrendColumn.value&&(s=v(e.selectedTrendColumn.value,n.scopedVars)),e.selectedTrendBy&&e.selectedTrendBy.value&&(f=v(e.selectedTrendBy.value,n.scopedVars)),e.trendPeriod&&e.trendPeriod>0&&(p=e.trendPeriod);var h='{"targets":[{"target":"'.concat(i,'","sysparm":"').concat(l,'","esSearch":"').concat(u,'","trendColumn":"').concat(s,'","trendBy":"').concat(f,'","period":').concat(p,',"groupBy":"').concat(c,'"}]}');return this.apiClient.request({url:this.apiPath+"/v1/query/trend?startTime="+t+"&endTime="+r,data:h,method:"POST",cacheOverride:""===a?null:a}).then((function(t){return m(),m(),o.apiClient.mapTrendResponseToFrame(t.data,e)})).catch((function(e){throw new Error(e.data.error.message)}))}},{key:"getOutageStatus",value:function(e,t,r,n,a){var o=this,i="";e.selectedServiceList&&e.selectedServiceList.value&&(i=v(e.selectedServiceList.value,n.scopedVars));var l=!1;"boolean"==typeof e.showPercent&&(l=e.showPercent);var u="";if(e.sysparam_query){var c=this.singleSysParamQuery(e.sysparam_query);u=this.parseBasicSysparm(c,n.scopedVars)}var s=9999;e.rowLimit&&e.rowLimit>0&&e.rowLimit<1e4&&(s=e.rowLimit);var f=0;e.page&&e.page>=0&&(f=e.page);var p='{"targets":[{"target":"'.concat(i,'","showPercent":').concat(l,',"sysparm":"').concat(u,'","limit":').concat(s,',"page":').concat(f,"}]}");return this.apiClient.request({url:this.apiPath+"/v1/query/outage",data:p,method:"POST",cacheOverride:""===a?null:a}).then((function(t){return m(),m(),l?o.apiClient.mapTextResponseToFrame(t.data,e.refId):o.apiClient.mapOutageResponseToFrame(t.data,e)})).catch((function(e){throw new Error(e.data.error.message)}))}},{key:"getAnomaly",value:function(e,t,r,n,a){var o=this,i="";e.selectedtableColumns&&e.selectedtableColumns.length>0&&(e.selectedtableColumns.map((function(e){i+=d(e.value,n.scopedVars)+","})),","===i.charAt(i.length-1)&&(i=i.substring(0,i.length-1)));var l="";-1!==e.basicSysparm.constructor.toString().indexOf("Array")&&(l=this.parseBasicSysparm(e.basicSysparm,n));var u=9999;e.rowLimit&&e.rowLimit>0&&e.rowLimit<1e4&&(u=e.rowLimit);var c=0;e.page&&e.page>=0&&(c=e.page);var s="",f="";e.sortBy&&e.sortDirection&&e.sortBy.value&&(s=v(e.sortBy.value,n.scopedVars),f=e.sortDirection);var p='{"targets":[{"columns":"'.concat(i,'","sysparm":"').concat(l,'","limit":').concat(u,',"page":').concat(c,',"sortBy":"').concat(s,'","sortDirection":"').concat(f,'"}]}');return this.apiClient.request({url:this.apiPath+"/v1/query/anomaly",data:p,method:"POST",cacheOverride:""===a?null:a}).then((function(t){return m(),m(),o.apiClient.mapTextResponseToFrame(t.data,e.refId)})).catch((function(e){throw new Error(e.data.error.message)}))}},{key:"getGenericVariable",value:function(e,t,r,n,a,o){var i=this,l='{"targets":[{"tableName":"'.concat(e,'","nameColumn":"').concat(t,'","idColumn":"').concat(r,'","sysparm":"').concat(n,'","limit":').concat(a,"}]}");return this.apiClient.request({url:this.apiPath+"/v1/variable/generic",data:l,method:"POST"}).then((function(e){return m(),i.apiClient.mapResponseToVariable(e.data,o)})).catch((function(e){throw new Error(e.data.error.message)}))}},{key:"getMetricNamesInCIs",value:function(e,t,r){var n=this,a=b(t),o='{"targets":[{"target":"'+(a=g(a))+'","metricType":"'+e+'"}]}',i=this.apiPath+"/v1/variable/metrics";return this.apiClient.request({url:i,data:o,method:"POST"}).then((function(e){return m(),n.apiClient.mapResponseToVariable(e.data,r)})).catch((function(e){throw new Error(e.data.error.message)}))}},{key:"getNestedCIS",value:function(e,t){var r=this,n='{"targets":[{"ci": "'.concat(e.ci,'",\n      "parentDepth":"').concat(e.parentDepth,'",\n      "childDepth":"').concat(e.childDepth,'",\n      "sysparm":"').concat(e.sysparam,'",\n      "type":"ci"}]}');return this.apiClient.request({url:this.apiPath+"/v1/variable/nested_value",data:n,method:"POST"}).then((function(e){return m(),r.apiClient.mapResponseToVariable(e.data,t)})).catch((function(e){throw new Error(e.data.error.message)}))}},{key:"getNestedClasses",value:function(e,t){var r=this,n='{"targets":[{"ci": "'.concat(e.ci,'",\n      "parentDepth":"').concat(e.parentDepth,'",\n      "childDepth":"').concat(e.childDepth,'",\n      "sysparm":"').concat(e.sysparam,'",\n      "type":"class"}]}');return this.apiClient.request({url:this.apiPath+"/v1/variable/nested_value",data:n,method:"POST"}).then((function(e){return m(),r.apiClient.mapResponseToVariable(e.data,t)})).catch((function(e){throw new Error(e.data.error.message)}))}},{key:"getV2NestedValues",value:function(e,t){var r=this;return this.apiClient.request({url:this.apiPath+"/v2/variable/nested_value",data:e,method:"POST"}).then((function(e){return r.apiClient.mapResponseToVariable(e.data.result,t)})).catch((function(e){throw new Error(e.data.error.message)}))}},{key:"getMetricAnomalyOptions",value:function(){return[{label:"true",value:"true"},{label:"false",value:"false"}]}},{key:"getAlertTypeOptions",value:function(){return[{label:"CI",value:"CI",description:"Get Alerts at the CI level"},{label:"Service",value:"Service",description:"Get Alerts at the Service level"},{label:"None",value:"None",description:"Ignore CI selection and use sysparam_query"}]}},{key:"getAlertStateOptions",value:function(){return[{label:"Active",value:"Active",description:"Get Open and Reopen Alerts"},{label:"All",value:"All",description:"Get All alerts Open,Reopen, and Closed"}]}},{key:"getAggregateTypeOptions",value:function(){return[{label:"AVG",value:"AVG"},{label:"COUNT",value:"COUNT"},{label:"MIN",value:"MIN"},{label:"MAX",value:"MAX"},{label:"STDDEV",value:"STDDEV"},{label:"SUM",value:"SUM"}]}},{key:"getOperatorOptions",value:function(e){return"True/False"===e?[{label:"is",value:"=",description:"="},{label:"is not",value:"!=",description:"!="},{label:"is empty",value:"ISEMPTY",description:"ISEMPTY"},{label:"is not empty",value:"ISNOTEMPTY",description:"ISNOTEMPTY"},{label:"is anything",value:"ANYTHING",description:"ANYTHING"},{label:"is same",value:"SAMEAS",description:"SAMEAS"},{label:"is different",value:"NSAMEAS",description:"NSAMEAS"}]:"Integer"===e||"Long"===e||"Decimal"===e||"Floating Point Number"===e?[{label:"is",value:"=",description:"="},{label:"is not",value:"!=",description:"!="},{label:"is empty",value:"ISEMPTY",description:"ISEMPTY"},{label:"is not empty",value:"ISNOTEMPTY",description:"ISNOTEMPTY"},{label:"less than",value:"<",description:"<"},{label:"greater than",value:">",description:">"},{label:"less than or is",value:"<=",description:"<="},{label:"greater than or is",value:">=",description:">="},{label:"between",value:"BETWEEN",description:"BETWEEN"},{label:"is anything",value:"ANYTHING",description:"ANYTHING"},{label:"is same",value:"SAMEAS",description:"SAMEAS"},{label:"is different",value:"NSAMEAS",description:"NSAMEAS"},{label:"greater than field",value:"GT_FIELD",description:"GT_FIELD"},{label:"less than field",value:"LT_FIELD",description:"LT_FIELD"},{label:"greater than or is field",value:"GT_OR_EQUALS_FIELD",description:"GT_OR_EQUALS_FIELD"},{label:"less than or is field",value:"LT_OR_EQUALS_FIELD",description:"LT_OR_EQUALS_FIELD"}]:"Date/Time"===e||"Date"===e||"Time"===e?[{label:"on",value:"ON",description:"ON"},{label:"not on",value:"NOTON",description:"NOTON"},{label:"before",value:"<",description:"<"},{label:"at or before",value:"<=",description:"<="},{label:"after",value:">",description:">"},{label:"at or after",value:">=",description:">="},{label:"between",value:"BETWEEN",description:"BETWEEN"},{label:"relative (on or after)",value:"RELATIVEGE",description:"RELATIVEGE"},{label:"relative (on or before)",value:"RELATIVELE",description:"RELATIVELE"},{label:"relative (after)",value:"RELATIVEGT",description:"RELATIVEGT"},{label:"relative (before)",value:"RELATIVELT",description:"RELATIVELT"},{label:"relative (on)",value:"RELATIVEEE",description:"RELATIVEEE"},{label:"is empty",value:"ISEMPTY",description:"ISEMPTY"},{label:"is not empty",value:"ISNOTEMPTY",description:"ISNOTEMPTY"},{label:"is anything",value:"ANYTHING",description:"ANYTHING"},{label:"is same",value:"SAMEAS",description:"SAMEAS"},{label:"is different",value:"NSAMEAS",description:"NSAMEAS"},{label:"is more than",value:"MORETHAN",description:"MORETHAN"},{label:"is less than",value:"LESSTHAN",description:"LESSTHAN"}]:"Choice"===e?[{label:"is",value:"=",description:"="},{label:"is not",value:"!=",description:"!="},{label:"is one of",value:"IN",description:"IN"},{label:"is not one of",value:"NOT IN",description:"NOT IN"},{label:"contains",value:"LIKE",description:"LIKE"},{label:"does not contain",value:"NOT LIKE",description:"NOT LIKE"},{label:"starts with",value:"STARTSWITH",description:"STARTSWITH"},{label:"ends with",value:"ENDSWITH",description:"ENDSWITH"},{label:"is anything",value:"ANYTHING",description:"ANYTHING"},{label:"is same",value:"SAMEAS",description:"SAMEAS"},{label:"is different",value:"NSAMEAS",description:"NSAMEAS"},{label:"less than",value:"<",description:"<"},{label:"greater than",value:">",description:">"},{label:"less than or is",value:"<=",description:"<="},{label:"greater than or is",value:">=",description:">="},{label:"between",value:"BETWEEN",description:"BETWEEN"}]:"Reference"===e?[{label:"is",value:"=",description:"="},{label:"is not",value:"!=",description:"!="},{label:"is empty",value:"ISEMPTY",description:"ISEMPTY"},{label:"is not empty",value:"ISNOTEMPTY",description:"ISNOTEMPTY"},{label:"starts with",value:"STARTSWITH",description:"STARTSWITH"},{label:"ends with",value:"ENDSWITH",description:"ENDSWITH"},{label:"contains",value:"LIKE",description:"LIKE"},{label:"does not contain",value:"NOT LIKE",description:"NOT LIKE"},{label:"is one of",value:"IN",description:"IN"},{label:"is not one of",value:"NOT IN",description:"NOT IN"},{label:"is anything",value:"ANYTHING",description:"ANYTHING"},{label:"is same",value:"SAMEAS",description:"SAMEAS"},{label:"is different",value:"NSAMEAS",description:"NSAMEAS"},{label:"is empty string",value:"EMPTYSTRING",description:"EMPTYSTRING"},{label:"is (dynamic)",value:"DYNAMIC",description:"DYNAMIC"}]:[{label:"is",value:"=",description:"="},{label:"is not",value:"!=",description:"!="},{label:"is empty",value:"ISEMPTY",description:"ISEMPTY"},{label:"is not empty",value:"ISNOTEMPTY",description:"ISNOTEMPTY"},{label:"starts with",value:"STARTSWITH",description:"STARTSWITH"},{label:"ends with",value:"ENDSWITH",description:"ENDSWITH"},{label:"contains",value:"LIKE",description:"LIKE"},{label:"does not contain",value:"NOT LIKE",description:"NOT LIKE"},{label:"is one of",value:"IN",description:"IN"},{label:"is not one of",value:"NOT IN",description:"NOT IN"},{label:"is empty",value:"ISEMPTY",description:"ISEMPTY"},{label:"is not empty",value:"ISNOTEMPTY",description:"ISNOTEMPTY"},{label:"is empty string",value:"EMPTYSTRING",description:"EMPTYSTRING"},{label:"is anything",value:"ANYTHING",description:"ANYTHING"},{label:"less than or is",value:"<=",description:"<="},{label:"greater than or is",value:">=",description:">="},{label:"between",value:"BETWEEN",description:"BETWEEN"},{label:"is same",value:"SAMEAS",description:"SAMEAS"},{label:"is different",value:"NSAMEAS",description:"NSAMEAS"}]}},{key:"getSysparmTypeOptions",value:function(){return[{label:"is",value:"=",description:"="},{label:"is not",value:"!=",description:"!="},{label:"starts with",value:"STARTSWITH",description:"STARTSWITH"},{label:"ends with",value:"ENDSWITH",description:"ENDSWITH"},{label:"contains",value:"LIKE",description:"LIKE"},{label:"does not contain",value:"NOT LIKE",description:"NOT LIKE"},{label:"is empty",value:"ISEMPTY",description:"ISEMPTY"},{label:"is not empty",value:"ISNOTEMPTY",description:"ISNOTEMPTY"},{label:"is anything",value:"ANYTHING",description:"ANYTHING"},{label:"is one of",value:"IN",description:"IN"},{label:"is not one of",value:"NOT IN",description:"NOT IN"},{label:"is empty string",value:"EMPTYSTRING",description:"EMPTYSTRING"},{label:"less than or is",value:"<=",description:"<="},{label:"greater than or is",value:">=",description:">="},{label:"between",value:"BETWEEN",description:"BETWEEN"},{label:"instance of",value:"INSTANCEOF",description:"INSTANCEOF"}]}},{key:"getTrendByOptions",value:function(){return[{label:"Minute",value:"minute"},{label:"Week",value:"week"}]}},{key:"loadServiceOptions",value:function(e){var t=this,r='{"targets":[{"target":"cmdb_ci_service","columns":"name:d,sys_id:v","sysparm":"operational_status=1^name!=All^nameLIKE'.concat(e||"",'","limit":100,"sortBy":"name","sortDirection":"ASC"}]}');return this.apiClient.request({url:this.apiPath+"/v1/query/table",data:r,method:"POST"}).then((function(e){return m(),m(),t.apiClient.mapChecksToValue(e.data)})).catch((function(e){throw new Error(e.data.error.message)}))}},{key:"loadCIOptions",value:function(e,t){var r=this,n=t||"",a="";return a=e?'{"targets":[{"target":"em_impact_graph","columns":"child_name:d,child_id:v,child_id:d","sysparm":"business_service='.concat(e,"^child_nameLIKE").concat(n,'","limit":100,"sortBy":"ci_name","sortDirection":"ASC"}]}'):'{"targets":[{"target":"cmdb_ci","columns":"name:d,sys_id:v,sys_class_name:d","sysparm":"nameLIKE'.concat(n,'^name!=NULL","limit":100,"sortBy":"cmdb_ci.name","sortDirection":"ASC"}]}'),this.apiClient.request({url:this.apiPath+"/v1/query/table",data:a,method:"POST"}).then((function(e){m(),m();var t=r.apiClient.mapChecksToValuePlusSuffix(e.data);return m(),r.apiClient.mapSuffixToLabel(t)})).catch((function(e){throw new Error(e.data.error.message)}))}},{key:"loadResourceOptions",value:function(e,t){var r=this,n="",a=t||"";if(e){var o=e.map((function(e){return e.value}));n='{"targets":[{"target":"sa_metric_map","columns":"resource_id:d,resource_id:v","sysparm":"cmdb_ciIN'.concat(o,"^resource_idLIKE").concat(a,'^resource_id!=NULL","limit":100,"sortBy":"resource_id","sortDirection":"ASC"}]}')}return this.apiClient.request({url:this.apiPath+"/v1/query/table",data:n,method:"POST"}).then((function(e){m(),m();var t=[{label:"*",value:"*"}].concat(r.apiClient.mapChecksToValue(e.data));return t=t.filter((function(e,t,r){return t===r.findIndex((function(t){return t.value===e.value}))}))})).catch((function(e){throw new Error(e.data.error.message)}))}},{key:"loadMetricOptions",value:function(e,t){var r=this,n="",a=t||"";if(void 0!==e){var o=e.map((function(e){return e.value}));n='{"targets":[{"target":"sa_metric_map","columns":"metric_type_id.metric_type_tiny_name:d,metric_type_id:v","sysparm":"cmdb_ciIN'.concat(o,"^metric_type_id.metric_type_tiny_nameLIKE").concat(a,'","limit":100,"sortBy":"","sortDirection":"ASC"}]}')}return this.apiClient.request({url:this.apiPath+"/v1/query/table",data:n,method:"POST"}).then((function(e){m(),m();var t=[{label:"*",value:"*"}].concat(r.apiClient.mapChecksToValue(e.data));return t=t.filter((function(e,t,r){return t===r.findIndex((function(t){return t.value===e.value}))}))})).catch((function(e){throw new Error(e.data.error.message)}))}},{key:"loadColumnChoices",value:function(e,t,r,n){var a=this;if(!t)return[];if("True/False"===n)return[{label:"True",value:"true"},{label:"False",value:"false"}];var o='{"targets":[{"target":"sys_choice","columns":"label,value","sysparm":"name='.concat(e,"^element!=NULL^elementLIKE").concat(t,"^labelLIKE").concat(r,'^language=en","limit":100,"sortBy":"label","sortDirection":"ASC"}]}');return this.apiClient.request({url:this.apiPath+"/v1/query/table",data:o,method:"POST"}).then((function(e){return a.apiClient.mapChecksToValue(e.data)})).catch((function(e){throw new Error(e.data.error.message)}))}},{key:"getDateTimePresetChoices",value:function(){return[{label:"Today",value:"Today@javascript:gs.beginningOfToday()@javascript:gs.endOfToday()"},{label:"Yesterday",value:"Yesterday@javascript:gs.beginningOfYesterday()@javascript:gs.endOfYesterday()"},{label:"Tomorrow",value:"Tomorrow@javascript:gs.beginningOfTomorrow()@javascript:gs.endOfTomorrow()"},{label:"This Week",value:"This week@javascript:gs.beginningOfThisWeek()@javascript:gs.endOfThisWeek()"},{label:"Last Week",value:"Last week@javascript:gs.beginningOfLastWeek()@javascript:gs.endOfLastWeek()"},{label:"Next Week",value:"Next week@javascript:gs.beginningOfNextWeek()@javascript:gs.endOfNextWeek()"},{label:"This Month",value:"This month@javascript:gs.beginningOfThisMonth()@javascript:gs.endOfThisMonth()"},{label:"Last Week",value:"Last month@javascript:gs.beginningOfLastMonth()@javascript:gs.endOfLastMonth()"},{label:"Next Month",value:"Next month@javascript:gs.beginningOfNextMonth()@javascript:gs.endOfNextMonth()"},{label:"Last 3 Months",value:"Last 3 months@javascript:gs.beginningOfLast3Months()@javascript:gs.endOfLast3Months()"},{label:"Last 6 Months",value:"Last 6 months@javascript:gs.beginningOfLast6Months()@javascript:gs.endOfLast6Months()"},{label:"Last 9 Months",value:"Last 9 months@javascript:gs.beginningOfLast9Months()@javascript:gs.endOfLast9Months()"},{label:"Last 12 Months",value:"Last 12 months@javascript:gs.beginningOfLast12Months()@javascript:gs.endOfLast12Months()"},{label:"This Quarter",value:"This quarter@javascript:gs.beginningOfThisQuarter()@javascript:gs.endOfThisQuarter()"},{label:"Last Quarter",value:"Last quarter@javascript:gs.beginningOfLastQuarter()@javascript:gs.endOfLastQuarter()"},{label:"Last 2 Quarters",value:"Last 2 quarters@javascript:gs.beginningOfLast2Quarters()@javascript:gs.endOfLast2Quarters()"},{label:"Next Quarter",value:"Next quarter@javascript:gs.beginningOfNextQuarter()@javascript:gs.endOfNextQuarter()"},{label:"Next 2 Quarter",value:"Next 2 quarters@javascript:gs.beginningOfNext2Quarters()@javascript:gs.endOfNext2Quarters()"},{label:"This Year",value:"This year@javascript:gs.beginningOfThisYear()@javascript:gs.endOfThisYear()"},{label:"Next Year",value:"Next year@javascript:gs.beginningOfNextYear()@javascript:gs.endOfNextYear()"},{label:"Last Year",value:"Last year@javascript:gs.beginningOfLastYear()@javascript:gs.endOfLastYear()"},{label:"Last 2 Years",value:"Last 2 years@javascript:gs.beginningOfLast2Years()@javascript:gs.endOfLast2Years()"},{label:"Last 7 Days",value:"Last 7 days@javascript:gs.beginningOfLast7Days()@javascript:gs.endOfLast7Days()"},{label:"Last 30 Days",value:"Last 30 days@javascript:gs.beginningOfLast30Days()@javascript:gs.endOfLast30Days()"},{label:"Last 60 Days",value:"Last 60 days@javascript:gs.beginningOfLast60Days()@javascript:gs.endOfLast60Days()"},{label:"Last 90 Days",value:"Last 90 days@javascript:gs.beginningOfLast90Days()@javascript:gs.endOfLast90Days()"},{label:"Last 30 Days",value:"Last 30 days@javascript:gs.beginningOfLast30Days()@javascript:gs.endOfLast30Days()"},{label:"Last 30 Days",value:"Last 30 days@javascript:gs.beginningOfLast30Days()@javascript:gs.endOfLast30Days()"},{label:"Last 30 Days",value:"Last 30 days@javascript:gs.beginningOfLast30Days()@javascript:gs.endOfLast30Days()"},{label:"Last 30 Days",value:"Last 30 days@javascript:gs.beginningOfLast30Days()@javascript:gs.endOfLast30Days()"},{label:"Last 30 Days",value:"Last 30 days@javascript:gs.beginningOfLast30Days()@javascript:gs.endOfLast30Days()"},{label:"Last 30 Days",value:"Last 30 days@javascript:gs.beginningOfLast30Days()@javascript:gs.endOfLast30Days()"},{label:"Last 30 Days",value:"Last 30 days@javascript:gs.beginningOfLast30Days()@javascript:gs.endOfLast30Days()"}]}},{key:"getTableColumnOptions",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(void 0===e)return[];var n='{"targets":[{"table":"'.concat(e,'", "typeFilter":"').concat(r,'"}]}');return this.apiClient.request({url:this.apiPath+"/v1/select/table_columns",data:n,method:"POST"}).then((function(e){return m(),m(),t.apiClient.mapValueAsSuffix(e.data,!0)})).catch((function(e){throw new Error(e.data.error.message)}))}},{key:"loadTableOptions",value:function(e){var t=this,r='{"targets":[{"target":"sys_db_object","columns":"label,name","sysparm":"nameLIKE'.concat(e,"^ORlabelLIKE").concat(e,'","limit":100}]}');return this.apiClient.request({url:this.apiPath+"/v1/query/table",data:r,method:"POST"}).then((function(e){m(),m();var r=t.apiClient.mapChecksToValue(e.data);return m(),t.apiClient.mapValueAsSuffix(r,!1)})).catch((function(e){throw new Error(e.data.error.message)}))}},{key:"getRelationshipTypeOptions",value:function(){var e=this;return this.apiClient.request({url:this.apiPath+"/v1/variable/generic",data:'{"targets":[{"tableName":"cmdb_rel_type","nameColumn":"name","idColumn":"sys_id","sysparm":"","limit":500}]}',method:"POST"}).then((function(t){return e.apiClient.mapChecksToValue(t.data)})).catch((function(e){throw new Error(e.data.error.message)}))}},{key:"loadStartingPointOptions",value:function(e){var t=this,r='{"targets":[{"tableName":"cmdb_ci","nameColumn":"name","idColumn":"sys_id","sysparm":"nameLIKE'.concat(e,'","limit":50}]}');return this.apiClient.request({url:this.apiPath+"/v1/variable/generic",data:r,method:"POST"}).then((function(e){return t.apiClient.mapChecksToValue(e.data)})).catch((function(e){throw new Error(e.data.error.message)}))}},{key:"loadClassOptions",value:function(e){var t=this,r='{"targets":[{"tableName":"sys_db_object","nameColumn":"label","idColumn":"name","sysparm":"nameSTARTSWITHcmdb_ci^labelLIKE'.concat(e,'","limit":50}]}');return this.apiClient.request({url:this.apiPath+"/v1/variable/generic",data:r,method:"POST"}).then((function(e){return t.apiClient.mapChecksToValue(e.data)})).catch((function(e){throw new Error(e.data.error.message)}))}},{key:"getTopologyCISummary",value:function(e){var t='{"targets":[{"target":"'+e+'"}]}';return this.apiClient.request({url:this.apiPath+"/query/ci_summary",data:t,method:"POST"}).then((function(e){return m(),m(),e.data}))}},{key:"removeFiltersWithAll",value:function(e){var t=e.split("^").filter((function(e){return!e.includes("*")}));return e=t.length>1?t.join("^"):t[0]||""}},{key:"parseBasicSysparm",value:function(e,t){var r=this,n=[];return e.forEach((function(e,a){if(null!==e.column){var o="",i=e.column;null!=i&&i.value&&(o=v(i.value,t.scopedVars));var l="",u=e.operator;null!=u&&u.value&&(l=v(u.value,t.scopedVars));var c="",s=e.value;null!=s&&s.value&&(c=v(s.value,t.scopedVars));var f=r.queryInstanceFormatter(o,l,c);""!==f.trim()&&n.push(f)}})),n.join("^")}},{key:"singleSysParamQuery",value:function(e){var t=e.split("^"),r=["=","!=","ISEMPTY","ISNOTEMPTY","ANYTHING","SAMEAS","NSAMEAS","<",">","<=",">=","BETWEEN","GT_FIELD","LT_FIELD","GT_OR_EQUALS_FIELD","LT_OR_EQUALS_FIELD","ON","NOTON","RELATIVEGE","RELATIVELE","RELATIVEGT","RELATIVELT","RELATIVEEE","MORETHAN","LESSTHAN","IN","NOT IN","LIKE","NOT LIKE","STARTSWITH","ENDSWITH","EMPTYSTRING","DYNAMIC"];r.sort((function(e,t){return t.length-e.length}));var n,a=[],o=[],i=N(t);try{for(i.s();!(n=i.n()).done;){var l,u=n.value,c=N(r);try{for(c.s();!(l=c.n()).done;){var s=l.value,f=u.indexOf(s);if(-1!==f){var p=u.slice(0,f).trim(),h=u.slice(f+s.length).trim();a.push({column:p,operator:s,value:h});break}}}catch(e){c.e(e)}finally{c.f()}}}catch(e){i.e(e)}finally{i.f()}for(var d=0,v=a;d<v.length;d++){var y=v[d],m={column:{value:y.column},operator:{value:y.operator},value:{value:y.value},separator:{value:"^"}};o.push(m)}return o}},{key:"queryInstanceFormatter",value:function(e,t,r){var n="";if(r.includes("*"))return"";if(r.includes("NULL")){var a=r.split(",");n=e+t+(r=a.filter((function(e){return"NULL"!==e})).join(","))+"^OR"+e+("IN"===t||"LIKE"===t?"=":"NOT IN"===t||"NOT LIKE"===t?"!=":t)+"NULL"}else n=e+t+r;return n}}])&&F(r.prototype,n),a&&F(r,a),Object.defineProperty(r,"prototype",{writable:!1}),t}();function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(){D=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function c(e,t,r,a){var o=t&&t.prototype instanceof p?t:p,i=Object.create(o.prototype),l=new O(a||[]);return n(i,"_invoke",{value:E(e,r,l)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var f={};function p(){}function h(){}function d(){}var v={};u(v,o,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(x([])));m&&m!==t&&r.call(m,o)&&(v=m);var g=d.prototype=p.prototype=Object.create(v);function b(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){var a;n(this,"_invoke",{value:function(n,o){function i(){return new t((function(a,i){!function n(a,o,i,l){var u=s(e[a],e,o);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==R(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,i,l)}),(function(e){n("throw",e,i,l)})):t.resolve(f).then((function(e){c.value=e,i(c)}),(function(e){return n("throw",e,i,l)}))}l(u.arg)}(n,o,a,i)}))}return a=a?a.then(i,i):i()}})}function E(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return _()}for(r.method=a,r.arg=o;;){var i=r.delegate;if(i){var l=S(i,r);if(l){if(l===f)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function S(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=s(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,f;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function x(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:_}}function _(){return{value:void 0,done:!0}}return h.prototype=d,n(g,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:h,configurable:!0}),h.displayName=u(d,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,u(e,l,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(w.prototype),u(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new w(c(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(g),u(g,l,"Generator"),u(g,o,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(T),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var l=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(l&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;T(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:x(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function G(e,t,r,n,a,o,i){try{var l=e[o](i),u=l.value}catch(e){return void r(e)}l.done?t(u):Promise.resolve(u).then(n,a)}function Q(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){G(o,n,a,i,l,"next",e)}function l(e){G(o,n,a,i,l,"throw",e)}i(void 0)}))}}function q(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function B(e,t){return(B=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=H(e);if(t){var a=H(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return W(this,r)}}function W(e,t){if(t&&("object"===R(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return U(e)}function U(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function H(e){return(H=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function K(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var $,z=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&B(e,t)}(p,t);var a,l,u,c,s,f=Y(p);function p(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),K(U(t=f.call(this,e)),"snowConnection",void 0),K(U(t),"annotations",void 0),K(U(t),"instanceName",void 0),K(U(t),"globalImage",void 0),K(U(t),"apiPath",void 0);var r={type:e.type,url:e.url,name:e.name,basicAuth:e.basicAuth,withCredentials:e.withCredentials,apiPath:e.jsonData.apiPath,cacheTimeout:e.jsonData.cacheTimeout};return t.globalImage=e.jsonData.imageURL,t.instanceName=e.jsonData.instanceName,t.apiPath=r.apiPath,t.snowConnection=new M(r),t.annotations={},t}return a=p,(l=[{key:"metricFindQuery",value:(s=Q(D().mark((function e(t,r){var a,o,i,l,u,c,s,f,p,h,d,v,y,m,g,b,w,E,S,L,T;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.showAsterisk,"global_image"!==t.namespace){e.next=4;break}return e.abrupt("return",[{label:this.globalImage,value:this.globalImage}]);case 4:if("global_instance_name"!==t.namespace){e.next=6;break}return e.abrupt("return",[{label:this.instanceName,value:this.instanceName}]);case 6:if("generic"!==t.namespace){e.next=19;break}if(void 0===t.rawQuery){e.next=18;break}return o=t.rawQuery.split("||"),i=void 0===o[0]?"":(0,n.getTemplateSrv)().replace(o[0],r.scopedVars,"csv"),l=void 0===o[1]?"":(0,n.getTemplateSrv)().replace(o[1],r.scopedVars,"csv"),u=void 0===o[2]?"":(0,n.getTemplateSrv)().replace(o[2],r.scopedVars,"csv"),c=void 0===o[3]?"":(0,n.getTemplateSrv)().replace(o[3],r.scopedVars,"csv"),s=void 0===o[4]?"9999":(0,n.getTemplateSrv)().replace(o[4],r.scopedVars,"csv"),e.abrupt("return",this.snowConnection.getGenericVariable(i,l,u,c,s,a));case 18:return e.abrupt("return",[]);case 19:if("metric_names"!==t.namespace){e.next=26;break}return f=(0,n.getTemplateSrv)().replace(t.rawQuery,r.scopedVars,"csv"),p=f.split(","),e.abrupt("return",this.snowConnection.getMetricNamesInCIs("",p,a));case 26:if("golden_metric_names"!==t.namespace){e.next=33;break}return h=(0,n.getTemplateSrv)().replace(t.rawQuery,r.scopedVars,"csv"),d=h.split(","),e.abrupt("return",this.snowConnection.getMetricNamesInCIs("GOLDEN",d,a));case 33:if("custom_kpis"!==t.namespace){e.next=40;break}return v=(0,n.getTemplateSrv)().replace(t.rawQuery,r.scopedVars,"csv"),y=v.split(","),e.abrupt("return",this.snowConnection.getMetricNamesInCIs("CUSTOM_KPIS",y,a));case 40:if("nested_cis"!==t.namespace){e.next=49;break}return(m=t.rawQuery.split("||")).map((function(e,t){m[t]=(0,n.getTemplateSrv)().replace(e,r.scopedVars,"csv"),0===m[t].indexOf("$")&&(m=m.splice(t))})),g={ci:void 0===m[0]?"":m[0],parentDepth:void 0===m[1]?"":m[1],childDepth:void 0===m[2]?"":m[2],sysparam:void 0===m[3]?"":m[3]},b=this.snowConnection.getNestedCIS(g,a),e.abrupt("return",b);case 49:if("nested_classes"!==t.namespace){e.next=56;break}return(w=t.rawQuery.split("||")).map((function(e,t){w[t]=(0,n.getTemplateSrv)().replace(e,r.scopedVars,"csv"),0===w[t].indexOf("$")&&(w=w.splice(t))})),E={ci:void 0===w[0]?"":w[0],parentDepth:void 0===w[1]?"":w[1],childDepth:void 0===w[2]?"":w[2],sysparam:void 0===w[3]?"":w[3]},e.abrupt("return",this.snowConnection.getNestedClasses(E,a));case 56:if("v2_nested_cis"!==t.namespace&&"v2_nested_classes"!==t.namespace){e.next=66;break}return(S=t.rawQuery.split("||")).map((function(e,t){S[t]=(0,n.getTemplateSrv)().replace(e,r.scopedVars,"csv"),0===S[t].indexOf("$")&&(S=S.splice(t))})),L={starting_point:void 0===S[0]?"":S[0],relationship_types:void 0===S[1]?"":S[1],excluded_classes:void 0===S[2]?"":S[2],parent_limit:void 0===S[3]?"":S[3],child_limit:void 0===S[4]?"":S[4],type:"v2_nested_cis"===t.namespace?"ci":"class"},e.next=63,this.snowConnection.getV2NestedValues(L,a);case 63:return T=e.sent,e.abrupt("return",T);case 66:case"end":return e.stop()}}),e,this)}))),function(e,t){return s.apply(this,arguments)})},{key:"query",value:(c=Q(D().mark((function t(n){var a,l,u,c,s=this;return D().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.range,l=a.from.valueOf(),u=a.to.valueOf(),c=o().map(n.targets,(function(e){if(e.hide)return[];var t=o().cloneDeep(e),a=r()(t,i),c=a.selectedQueryCategory.value,f=a.cacheOverride;switch(void 0!==a.basic_sysparam&&null!==a.basic_sysparam&&a.basic_sysparam.length>0&&(a.basicSysparm=s.basicSysparmBackwardsCompatFix(a.basic_sysparam)),c){case"Topology":return s.snowConnection.getTopology(t,n,f);case"Node_Graph":return s.snowConnection.queryNodeGraph(t,n,f);case"Metrics":return s.snowConnection.getMetrics(t,l,u,n,f);case"Alerts":return s.snowConnection.getAlerts(t,l,u,n,s.instanceName,f);case"Table":return s.snowConnection.queryTable(t,l,u,n,f);case"Row_Count":return s.snowConnection.getRowCount(t,l,u,n,f);case"Aggregate":return s.snowConnection.getAggregateQuery(t,l,u,n,f);case"Geohash_Map":return s.snowConnection.getGeohashMap(t,n,f);case"Log_Data":return s.snowConnection.queryLogData(t,l,u,n,f);case"Trend_Data":return s.snowConnection.getTrendData(t,l,u,n,f);case"Outage_Status":return s.snowConnection.getOutageStatus(t,l,u,n,f);case"Anomaly":return s.snowConnection.getAnomaly(t,l,u,n,f);default:return[]}})),t.abrupt("return",Promise.all(o().flatten(c)).then(o().flatten).then((function(t){return{data:t,state:e.LoadingState.Done,key:n.requestId}})));case 5:case"end":return t.stop()}}),t)}))),function(e){return c.apply(this,arguments)})},{key:"testDatasource",value:function(){return this.snowConnection.apiClient.request({url:this.apiPath,method:"GET"}).then((function(){return{status:"success",message:"Data source connection is successful",title:"Success"}})).catch((function(e){return{status:"error",message:"Data source connection failed: ".concat(e.statusText),title:"Error"}}))}},{key:"basicSysparmBackwardsCompatFix",value:function(e){return e.map((function(e){return{column:e[1]||null,operator:e[2]||null,value:e[3]||null,separator:e[4]||{label:"AND",value:"^"}}}))}}])&&q(a.prototype,l),u&&q(a,u),Object.defineProperty(a,"prototype",{writable:!1}),p}(e.DataSourceApi),J=u(0),X=u.n(J),Z=u(1);function ee(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function te(){return(te=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var re=function(e){var t=e.value,r=e.updateQuery;return X().createElement(X().Fragment,null,X().createElement(Z.InlineFieldRow,null,X().createElement(Z.InlineField,{label:"Query Alert Count",labelWidth:20,tooltip:"Extra query per row to get the number of alerts on a ci. Adds extra processing, use wisely!"},X().createElement(Z.RadioButtonGroup,{value:t.value,options:[{label:"No",value:"false"},{label:"Yes",value:"true"}],onChange:function(e){return r("getAlertCount",{label:e,value:e})}}))))},ne=function(e){var t=e.updateQuery,r=e.defaultValue;return X().createElement(X().Fragment,null,X().createElement(Z.InlineFieldRow,null,X().createElement(Z.InlineField,{label:"Elastic Search Query",labelWidth:20},X().createElement(Z.Input,{name:"elasticSearch",width:60,defaultValue:r,onBlur:function(e){return t("elasticSearch",e.target.value)}}))))};function ae(e){return(ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oe(){oe=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function c(e,t,r,a){var o=t&&t.prototype instanceof p?t:p,i=Object.create(o.prototype),l=new O(a||[]);return n(i,"_invoke",{value:E(e,r,l)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var f={};function p(){}function h(){}function d(){}var v={};u(v,o,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(x([])));m&&m!==t&&r.call(m,o)&&(v=m);var g=d.prototype=p.prototype=Object.create(v);function b(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){var a;n(this,"_invoke",{value:function(n,o){function i(){return new t((function(a,i){!function n(a,o,i,l){var u=s(e[a],e,o);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==ae(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,i,l)}),(function(e){n("throw",e,i,l)})):t.resolve(f).then((function(e){c.value=e,i(c)}),(function(e){return n("throw",e,i,l)}))}l(u.arg)}(n,o,a,i)}))}return a=a?a.then(i,i):i()}})}function E(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return _()}for(r.method=a,r.arg=o;;){var i=r.delegate;if(i){var l=S(i,r);if(l){if(l===f)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function S(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=s(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,f;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function x(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:_}}function _(){return{value:void 0,done:!0}}return h.prototype=d,n(g,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:h,configurable:!0}),h.displayName=u(d,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,u(e,l,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(w.prototype),u(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new w(c(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(g),u(g,l,"Generator"),u(g,o,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(T),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var l=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(l&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;T(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:x(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function ie(e,t,r,n,a,o,i){try{var l=e[o](i),u=l.value}catch(e){return void r(e)}l.done?t(u):Promise.resolve(u).then(n,a)}function le(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){ie(o,n,a,i,l,"next",e)}function l(e){ie(o,n,a,i,l,"throw",e)}i(void 0)}))}}function ue(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ce(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ce(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var se=function(e){var t=e.query,r=e.updateQuery,n=e.datasource,a=ue((0,J.useState)(t.groupBy),2),o=a[0],i=a[1],l=ue((0,J.useState)([{label:"Loading ...",value:""}]),2),u=l[0],c=l[1];return(0,J.useEffect)((function(){var e=[],r=!1;function a(){return(a=le(oe().mark((function a(){var o;return oe().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,n.snowConnection.getTableColumnOptions(null===(o=t.tableName)||void 0===o?void 0:o.value);case 2:e=a.sent,r||e.length>0&&c(e);case 4:case"end":return a.stop()}}),a)})))).apply(this,arguments)}return function(){a.apply(this,arguments)}(),function(){r=!0}}),[n.snowConnection,t.tableName]),X().createElement(X().Fragment,null,X().createElement(Z.InlineFieldRow,null,X().createElement(Z.InlineField,{labelWidth:20,label:"Group By",tooltip:"Select a column which will be used to group the results by."},X().createElement(Z.Select,{width:40,isMulti:!1,options:u,isClearable:!0,value:o,isSearchable:!0,menuPlacement:"top",maxMenuHeight:200,allowCustomValue:!0,defaultValue:o,backspaceRemovesValue:!0,onChange:function(e){i(e),r("groupBy",e)},onCreateOption:function(e){i({label:e,value:e}),r("groupBy",{label:e,value:e})}}))))},fe=function(e){var t=e.updateQuery,r=e.defaultValue;return X().createElement(X().Fragment,null,X().createElement(Z.InlineFieldRow,null,X().createElement(Z.InlineField,{label:"Limit",labelWidth:20,tooltip:"Limit the number of results. Expects a number between 1 - 9999"},X().createElement(Z.Input,{name:"limit",type:"number",max:9999,min:1,width:20,defaultValue:r,onBlur:function(e){return t("rowLimit",e.target.value)}}))))},pe=function(e){var t=e.defaultValue,r=e.updateQuery;return X().createElement(X().Fragment,null,X().createElement(Z.InlineFieldRow,null,X().createElement(Z.InlineField,{label:"Page",labelWidth:20,tooltip:"Page number used for pagination. Starts at page 0"},X().createElement(Z.Input,{name:"page",type:"number",max:9999,min:0,width:20,defaultValue:t,onBlur:function(e){return r("page",e.target.valueAsNumber)}}))))};function he(e){return(he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function de(e){return function(e){if(Array.isArray(e))return we(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||be(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ve(){ve=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function c(e,t,r,a){var o=t&&t.prototype instanceof p?t:p,i=Object.create(o.prototype),l=new O(a||[]);return n(i,"_invoke",{value:E(e,r,l)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var f={};function p(){}function h(){}function d(){}var v={};u(v,o,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(x([])));m&&m!==t&&r.call(m,o)&&(v=m);var g=d.prototype=p.prototype=Object.create(v);function b(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){var a;n(this,"_invoke",{value:function(n,o){function i(){return new t((function(a,i){!function n(a,o,i,l){var u=s(e[a],e,o);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==he(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,i,l)}),(function(e){n("throw",e,i,l)})):t.resolve(f).then((function(e){c.value=e,i(c)}),(function(e){return n("throw",e,i,l)}))}l(u.arg)}(n,o,a,i)}))}return a=a?a.then(i,i):i()}})}function E(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return _()}for(r.method=a,r.arg=o;;){var i=r.delegate;if(i){var l=S(i,r);if(l){if(l===f)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function S(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=s(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,f;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function x(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:_}}function _(){return{value:void 0,done:!0}}return h.prototype=d,n(g,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:h,configurable:!0}),h.displayName=u(d,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,u(e,l,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(w.prototype),u(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new w(c(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(g),u(g,l,"Generator"),u(g,o,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(T),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var l=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(l&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;T(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:x(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function ye(e,t,r,n,a,o,i){try{var l=e[o](i),u=l.value}catch(e){return void r(e)}l.done?t(u):Promise.resolve(u).then(n,a)}function me(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){ye(o,n,a,i,l,"next",e)}function l(e){ye(o,n,a,i,l,"throw",e)}i(void 0)}))}}function ge(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}(e,t)||be(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function be(e,t){if(e){if("string"==typeof e)return we(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?we(e,t):void 0}}function we(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ee=function(e){var t=e.query,r=e.updateQuery,n=e.datasource,a=n.snowConnection.getAggregateTypeOptions(),o=ge((0,J.useState)([{label:"Loading ...",value:""}]),2),i=o[0],l=o[1];return(0,J.useEffect)((function(){var e=[],r=!1;function a(){return(a=me(ve().mark((function a(){var o;return ve().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,n.snowConnection.getTableColumnOptions(null===(o=t.tableName)||void 0===o?void 0:o.value);case 2:e=a.sent,r||e.length>0&&(t.aggregateColumn&&t.aggregateColumn.length>0&&(e=e.concat(t.aggregateColumn)),l(e));case 4:case"end":return a.stop()}}),a)})))).apply(this,arguments)}return function(){a.apply(this,arguments)}(),function(){r=!0}}),[n.snowConnection,t.tableName,t.aggregateColumn]),X().createElement(X().Fragment,null,X().createElement(Z.InlineFieldRow,null,X().createElement(Z.InlineField,{label:"Aggregate Function",labelWidth:20,tooltip:"Choose your aggregation function then the column to run this function on"},X().createElement(Z.Select,{width:20,options:a,value:t.selectedAggregateType,defaultValue:t.selectedAggregateType,isSearchable:!0,isClearable:!0,isMulti:!1,backspaceRemovesValue:!0,allowCustomValue:!0,onCreateOption:function(e){return r("selectedAggregateType",{label:e,value:e})},onChange:function(e){return r("selectedAggregateType",e)},maxMenuHeight:200})),X().createElement(Z.InlineField,null,X().createElement(Z.Select,{options:i,value:t.aggregateColumn,defaultValue:t.aggregateColumn,width:40,isSearchable:!0,isClearable:!0,isMulti:!1,backspaceRemovesValue:!0,allowCustomValue:!0,onChange:function(e){return r("aggregateColumn",e)},onCreateOption:function(e){var n=[];void 0!==t.aggregateColumn?(n=de(t.aggregateColumn))[n.length]={label:e,value:e}:n=[{label:e,value:e}],r("aggregateColumn",n)},maxMenuHeight:200}))))};function Se(e){return(Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Le(){Le=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function c(e,t,r,a){var o=t&&t.prototype instanceof p?t:p,i=Object.create(o.prototype),l=new O(a||[]);return n(i,"_invoke",{value:E(e,r,l)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var f={};function p(){}function h(){}function d(){}var v={};u(v,o,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(x([])));m&&m!==t&&r.call(m,o)&&(v=m);var g=d.prototype=p.prototype=Object.create(v);function b(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){var a;n(this,"_invoke",{value:function(n,o){function i(){return new t((function(a,i){!function n(a,o,i,l){var u=s(e[a],e,o);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==Se(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,i,l)}),(function(e){n("throw",e,i,l)})):t.resolve(f).then((function(e){c.value=e,i(c)}),(function(e){return n("throw",e,i,l)}))}l(u.arg)}(n,o,a,i)}))}return a=a?a.then(i,i):i()}})}function E(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return _()}for(r.method=a,r.arg=o;;){var i=r.delegate;if(i){var l=S(i,r);if(l){if(l===f)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function S(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=s(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,f;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function x(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:_}}function _(){return{value:void 0,done:!0}}return h.prototype=d,n(g,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:h,configurable:!0}),h.displayName=u(d,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,u(e,l,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(w.prototype),u(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new w(c(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(g),u(g,l,"Generator"),u(g,o,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(T),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var l=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(l&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;T(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:x(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function Te(e,t,r,n,a,o,i){try{var l=e[o](i),u=l.value}catch(e){return void r(e)}l.done?t(u):Promise.resolve(u).then(n,a)}function Oe(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){Te(o,n,a,i,l,"next",e)}function l(e){Te(o,n,a,i,l,"throw",e)}i(void 0)}))}}function xe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return _e(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _e(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _e(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ce=function(e){var t=e.query,r=e.updateQuery,n=e.datasource,a=e.table,o=xe((0,J.useState)([{label:"Loading ...",value:""}]),2),i=o[0],l=o[1];return(0,J.useEffect)((function(){var e=[],r=!1;function o(){return(o=Oe(Le().mark((function o(){return Le().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,n.snowConnection.getTableColumnOptions(null==a?void 0:a.value);case 2:e=o.sent,r||e.length>0&&(t.sortBy&&t.sortBy.length>0&&(e=e.concat(t.sortBy)),l(e));case 4:case"end":return o.stop()}}),o)})))).apply(this,arguments)}return function(){o.apply(this,arguments)}(),function(){r=!0}}),[n.snowConnection,a,t.sortBy]),X().createElement(X().Fragment,null,X().createElement(Z.InlineFieldRow,null,X().createElement(Z.InlineField,{label:"Sort By",labelWidth:20},X().createElement(Z.Select,{width:40,options:i,value:t.sortBy,defaultValue:t.sortBy,isSearchable:!0,isClearable:!0,isMulti:!1,backspaceRemovesValue:!0,allowCustomValue:!0,onChange:function(e){return r("sortBy",e)},onCreateOption:function(e){return r("sortBy",{label:e,value:e})},maxMenuHeight:200,menuPlacement:"top"})),X().createElement(Z.InlineField,null,X().createElement(Z.RadioButtonGroup,{value:t.sortDirection,options:[{label:"ASC",value:"ASC",icon:"arrow-up"},{label:"DESC",value:"DESC",icon:"arrow-down"}],onChange:function(e){return r("sortDirection",e)}}))))};function Ie(e){return(Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ae(){Ae=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function c(e,t,r,a){var o=t&&t.prototype instanceof p?t:p,i=Object.create(o.prototype),l=new O(a||[]);return n(i,"_invoke",{value:E(e,r,l)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var f={};function p(){}function h(){}function d(){}var v={};u(v,o,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(x([])));m&&m!==t&&r.call(m,o)&&(v=m);var g=d.prototype=p.prototype=Object.create(v);function b(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){var a;n(this,"_invoke",{value:function(n,o){function i(){return new t((function(a,i){!function n(a,o,i,l){var u=s(e[a],e,o);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==Ie(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,i,l)}),(function(e){n("throw",e,i,l)})):t.resolve(f).then((function(e){c.value=e,i(c)}),(function(e){return n("throw",e,i,l)}))}l(u.arg)}(n,o,a,i)}))}return a=a?a.then(i,i):i()}})}function E(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return _()}for(r.method=a,r.arg=o;;){var i=r.delegate;if(i){var l=S(i,r);if(l){if(l===f)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function S(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=s(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,f;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function x(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:_}}function _(){return{value:void 0,done:!0}}return h.prototype=d,n(g,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:h,configurable:!0}),h.displayName=u(d,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,u(e,l,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(w.prototype),u(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new w(c(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(g),u(g,l,"Generator"),u(g,o,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(T),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var l=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(l&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;T(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:x(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function je(e,t,r,n,a,o,i){try{var l=e[o](i),u=l.value}catch(e){return void r(e)}l.done?t(u):Promise.resolve(u).then(n,a)}function Ne(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){je(o,n,a,i,l,"next",e)}function l(e){je(o,n,a,i,l,"throw",e)}i(void 0)}))}}function Pe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ke(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ke(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Fe=function(e){var t=e.updateQuery,r=e.trendByOptions,n=e.query,a=e.datasource,o=Pe((0,J.useState)([{label:"Loading ...",value:""}]),2),i=o[0],l=o[1];return(0,J.useEffect)((function(){var e=[],t=!1;function r(){return(r=Ne(Ae().mark((function r(){var o;return Ae().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,a.snowConnection.getTableColumnOptions(null===(o=n.tableName)||void 0===o?void 0:o.value,"glide_date_time");case 2:e=r.sent,t||e.length>0&&l(e);case 4:case"end":return r.stop()}}),r)})))).apply(this,arguments)}return function(){r.apply(this,arguments)}(),function(){t=!0}}),[a.snowConnection,n.tableName]),X().createElement(X().Fragment,null,X().createElement(Z.InlineFieldRow,null,X().createElement(Z.InlineField,{label:"Trend",labelWidth:20},X().createElement(Z.Select,{width:40,options:i,value:n.selectedTrendColumn,defaultValue:n.selectedTrendColumn,isSearchable:!0,isClearable:!0,backspaceRemovesValue:!0,allowCustomValue:!0,onChange:function(e){return t("selectedTrendColumn",e)},onCreateOption:function(e){return t("selectedTrendColumn",{label:e,value:e})},maxMenuHeight:200})),X().createElement(Z.InlineField,null,X().createElement(Z.Select,{width:20,options:r,value:n.selectedTrendBy,defaultValue:n.selectedTrendBy,isSearchable:!0,isClearable:!0,backspaceRemovesValue:!0,allowCustomValue:!0,onChange:function(e){return t("selectedTrendBy",e)},onCreateOption:function(e){return t("selectedTrendBy",{label:e,value:e})},maxMenuHeight:200})),X().createElement(Z.InlineField,null,X().createElement(Z.Input,{name:"period",type:"number",max:300,min:1,width:20,defaultValue:n.trendPeriod,onBlur:function(e){return t("trendPeriod",e.target.value)}}))))},Ve=function(e){var t=e.value,r=e.updateQuery;return X().createElement(X().Fragment,null,X().createElement(Z.InlineFieldRow,null,X().createElement(Z.InlineField,{label:"Show Uptime %",labelWidth:20},X().createElement(Z.RadioButtonGroup,{options:[{label:"False",value:!1},{label:"True",value:!0}],value:t||!1,onChange:function(e){return r("showPercent",e)}}))))};function Me(e){return(Me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Re(){Re=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function c(e,t,r,a){var o=t&&t.prototype instanceof p?t:p,i=Object.create(o.prototype),l=new O(a||[]);return n(i,"_invoke",{value:E(e,r,l)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var f={};function p(){}function h(){}function d(){}var v={};u(v,o,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(x([])));m&&m!==t&&r.call(m,o)&&(v=m);var g=d.prototype=p.prototype=Object.create(v);function b(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){var a;n(this,"_invoke",{value:function(n,o){function i(){return new t((function(a,i){!function n(a,o,i,l){var u=s(e[a],e,o);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==Me(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,i,l)}),(function(e){n("throw",e,i,l)})):t.resolve(f).then((function(e){c.value=e,i(c)}),(function(e){return n("throw",e,i,l)}))}l(u.arg)}(n,o,a,i)}))}return a=a?a.then(i,i):i()}})}function E(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return _()}for(r.method=a,r.arg=o;;){var i=r.delegate;if(i){var l=S(i,r);if(l){if(l===f)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function S(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=s(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,f;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function x(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:_}}function _(){return{value:void 0,done:!0}}return h.prototype=d,n(g,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:h,configurable:!0}),h.displayName=u(d,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,u(e,l,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(w.prototype),u(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new w(c(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(g),u(g,l,"Generator"),u(g,o,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(T),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var l=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(l&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;T(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:x(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function De(e,t,r,n,a,o,i){try{var l=e[o](i),u=l.value}catch(e){return void r(e)}l.done?t(u):Promise.resolve(u).then(n,a)}function Ge(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){De(o,n,a,i,l,"next",e)}function l(e){De(o,n,a,i,l,"throw",e)}i(void 0)}))}}function Qe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return qe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return qe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Be=function(e){var t=e.query,r=e.updateQuery,n=e.datasource,a=e.table,o=Qe((0,J.useState)([{label:"Loading ...",value:""}]),2),i=o[0],l=o[1];return(0,J.useEffect)((function(){var e=[],r=!1;function o(){return(o=Ge(Re().mark((function o(){return Re().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,n.snowConnection.getTableColumnOptions(null==a?void 0:a.value,"glide_date_time");case 2:e=o.sent,r||e.length>0&&(t.grafanaTimerangeColumn&&t.grafanaTimerangeColumn.length>0&&(e=e.concat(t.grafanaTimerangeColumn)),l(e));case 4:case"end":return o.stop()}}),o)})))).apply(this,arguments)}return function(){o.apply(this,arguments)}(),function(){r=!0}}),[n.snowConnection,a,t.grafanaTimerangeColumn]),X().createElement(X().Fragment,null,X().createElement(Z.InlineFieldRow,null,X().createElement(Z.InlineField,{label:"Grafana Timerange",labelWidth:20,tooltip:"If selected, only results that fit inbetween your Grafana Timerange will be returned"},X().createElement(Z.InlineSwitch,{value:t.grafanaTimerange,onChange:function(e){return r("grafanaTimerange",e.target.checked)}})),t.grafanaTimerange&&X().createElement(Z.InlineField,null,X().createElement(Z.Select,{options:i,value:t.grafanaTimerangeColumn,defaultValue:t.grafanaTimerangeColumn,width:40,isSearchable:!0,isClearable:!0,isMulti:!1,backspaceRemovesValue:!0,allowCustomValue:!0,onChange:function(e){return r("grafanaTimerangeColumn",e)},onCreateOption:function(e){return r("grafanaTimerangeColumn",{label:e,value:e})},maxMenuHeight:200}))))},Ye=function(e){var t=e.value,r=e.updateQuery;return X().createElement(X().Fragment,null,X().createElement(Z.InlineFieldRow,null,X().createElement(Z.InlineField,{label:"Compress Logs",labelWidth:20},X().createElement(Z.InlineSwitch,{value:t,onChange:function(e){return r("compressLogs",e.target.checked)}}))))};function We(e){return function(e){if(Array.isArray(e))return Ue(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Ue(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ue(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var He=function(e){var t=e.loadOptions,r=e.value,n=e.updateQuery;return X().createElement(X().Fragment,null,X().createElement(Z.InlineFieldRow,null,X().createElement(Z.InlineField,{label:"CI",labelWidth:20},X().createElement(Z.AsyncSelect,{width:40,value:r,isMulti:!0,isClearable:!0,maxMenuHeight:200,isSearchable:!0,defaultValue:r,menuPlacement:"bottom",allowCustomValue:!0,loadOptions:t,backspaceRemovesValue:!0,onChange:function(e){return n("selectedSourceList",e)},onCreateOption:function(e){var t=[];void 0!==r?(t=We(r))[t.length]={label:e,value:e}:t=[{label:e,value:e}],n("selectedSourceList",t)}}))))};function Ke(e){return function(e){if(Array.isArray(e))return $e(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return $e(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $e(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $e(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ze=function(e){var t=e.loadOptions,r=e.value,n=e.updateQuery;return X().createElement(X().Fragment,null,X().createElement(Z.InlineFieldRow,null,X().createElement(Z.InlineField,{label:"Metric Name",labelWidth:20},X().createElement(Z.AsyncSelect,{width:40,value:r,isMulti:!0,isClearable:!0,maxMenuHeight:200,isSearchable:!0,defaultValue:r,allowCustomValue:!0,className:"coloredSelect",loadOptions:t,backspaceRemovesValue:!0,onChange:function(e){return n("selectedMetricNameList",e)},onCreateOption:function(e){var t=[];void 0!==r?(t=Ke(r))[t.length]={label:e,value:e}:t=[{label:e,value:e}],n("selectedMetricNameList",t)}}))))},Je=function(e){var t=e.updateQuery,r=e.defaultValue;return X().createElement(X().Fragment,null,X().createElement(Z.InlineFieldRow,null,X().createElement(Z.InlineField,{label:"Sysparam Query",labelWidth:20},X().createElement(Z.Input,{width:60,name:"sysparam_query",defaultValue:r,onBlur:function(e){return t("sysparam_query",e.target.value)}}))))},Xe=function(e){var t=e.loadOptions,r=e.value,n=e.updateQuery;return X().createElement(X().Fragment,null,X().createElement(Z.InlineFieldRow,null,X().createElement(Z.InlineField,{label:"Service",labelWidth:20},X().createElement(Z.AsyncSelect,{width:40,value:r,isClearable:!0,maxMenuHeight:200,isSearchable:!0,defaultValue:r,defaultOptions:!0,menuPlacement:"bottom",allowCustomValue:!0,loadOptions:t,backspaceRemovesValue:!0,onChange:function(e){return n("selectedServiceList",e)},onCreateOption:function(e){return n("selectedServiceList",{label:e,value:e})}}))))};function Ze(e){return function(e){if(Array.isArray(e))return et(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return et(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return et(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function et(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var tt,rt,nt=function(e){var t=e.loadOptions,r=e.value,n=e.updateQuery;return X().createElement(X().Fragment,null,X().createElement(Z.InlineFieldRow,null,X().createElement(Z.InlineField,{label:"Resource ID",labelWidth:20},X().createElement(Z.AsyncSelect,{width:40,value:r,isMulti:!0,isClearable:!0,isSearchable:!0,maxMenuHeight:200,defaultValue:r,allowCustomValue:!0,loadOptions:t,backspaceRemovesValue:!0,onChange:function(e){return n("selectedMetricTypeList",e)},onCreateOption:function(e){var t=[];void 0!==r?(t=Ze(r))[t.length]={label:e,value:e}:t=[{label:e,value:e}],n("selectedMetricTypeList",t)}}))))},at=function(e){var t=e.options,r=e.value,n=e.updateQuery;return X().createElement(X().Fragment,null,X().createElement(Z.InlineFieldRow,null,X().createElement(Z.InlineField,{label:"Alert Type Filter",labelWidth:20},X().createElement(Z.Select,{width:20,value:r,options:t,isClearable:!0,maxMenuHeight:200,isSearchable:!0,defaultValue:r,onChange:function(e){return n("selectedAlertTypeList",e)}}))))},ot=function(e){var t=e.updateQuery,r=e.defaultValue;return X().createElement(X().Fragment,null,X().createElement(Z.InlineFieldRow,null,X().createElement(Z.InlineField,{label:"Child Depth",labelWidth:20},X().createElement(Z.Input,{width:20,name:"child_depth",defaultValue:r,onBlur:function(e){return t("topology_child_depth",e.target.value)}}))))},it=function(e){var t=e.loadTableOptions,r=e.value,n=e.updateQuery;return X().createElement(X().Fragment,null,X().createElement(Z.InlineFieldRow,null,X().createElement(Z.InlineField,{label:"Table Name",labelWidth:20},X().createElement(Z.AsyncSelect,{value:r,isClearable:!0,maxMenuHeight:200,isSearchable:!0,defaultValue:r,defaultOptions:!0,menuPlacement:"bottom",allowCustomValue:!0,backspaceRemovesValue:!0,prefix:tt||(tt=X().createElement(Z.Icon,{name:"table"})),loadOptions:t,width:40,onChange:function(e){return n("tableName",e)},onCreateOption:function(e){return n("tableName",{label:e,value:e})}}))))},lt=function(e){var t=e.options,r=e.value,n=e.updateQuery;return X().createElement(X().Fragment,null,X().createElement(Z.InlineFieldRow,null,X().createElement(Z.InlineField,{label:"Alert State Filter",labelWidth:20},X().createElement(Z.Select,{width:20,value:r,options:t,isClearable:!0,maxMenuHeight:200,isSearchable:!0,defaultValue:r,onChange:function(e){return n("selectedAlertStateList",e)}}))))},ut=function(e){var t=e.updateQuery,r=e.defaultValue;return X().createElement(X().Fragment,null,X().createElement(Z.InlineFieldRow,null,X().createElement(Z.InlineField,{label:"Parent Depth",labelWidth:20},X().createElement(Z.Input,{width:20,name:"parent_depth",defaultValue:r,onBlur:function(e){return t("topology_parent_depth",e.target.value)}}))))};function ct(e){return(ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function st(e){return function(e){if(Array.isArray(e))return yt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||vt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ft(){ft=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function c(e,t,r,a){var o=t&&t.prototype instanceof p?t:p,i=Object.create(o.prototype),l=new O(a||[]);return n(i,"_invoke",{value:E(e,r,l)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var f={};function p(){}function h(){}function d(){}var v={};u(v,o,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(x([])));m&&m!==t&&r.call(m,o)&&(v=m);var g=d.prototype=p.prototype=Object.create(v);function b(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){var a;n(this,"_invoke",{value:function(n,o){function i(){return new t((function(a,i){!function n(a,o,i,l){var u=s(e[a],e,o);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==ct(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,i,l)}),(function(e){n("throw",e,i,l)})):t.resolve(f).then((function(e){c.value=e,i(c)}),(function(e){return n("throw",e,i,l)}))}l(u.arg)}(n,o,a,i)}))}return a=a?a.then(i,i):i()}})}function E(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return _()}for(r.method=a,r.arg=o;;){var i=r.delegate;if(i){var l=S(i,r);if(l){if(l===f)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function S(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=s(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,f;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function x(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:_}}function _(){return{value:void 0,done:!0}}return h.prototype=d,n(g,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:h,configurable:!0}),h.displayName=u(d,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,u(e,l,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(w.prototype),u(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new w(c(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(g),u(g,l,"Generator"),u(g,o,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(T),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var l=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(l&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;T(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:x(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function pt(e,t,r,n,a,o,i){try{var l=e[o](i),u=l.value}catch(e){return void r(e)}l.done?t(u):Promise.resolve(u).then(n,a)}function ht(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){pt(o,n,a,i,l,"next",e)}function l(e){pt(o,n,a,i,l,"throw",e)}i(void 0)}))}}function dt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}(e,t)||vt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vt(e,t){if(e){if("string"==typeof e)return yt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?yt(e,t):void 0}}function yt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var mt=function(e){var t=e.query,r=e.updateQuery,n=e.datasource,a=e.table,o=dt((0,J.useState)(t.selectedtableColumns),2),i=o[0],l=o[1],u=dt((0,J.useState)([{label:"Loading ...",value:""}]),2),c=u[0],s=u[1];return(0,J.useEffect)((function(){var e=[],t=!1;function r(){return(r=ht(ft().mark((function r(){return ft().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.snowConnection.getTableColumnOptions(null==a?void 0:a.value);case 2:e=r.sent,t||e.length>0&&(i&&i.length>0&&(e=e.concat(i)),s(e));case 4:case"end":return r.stop()}}),r)})))).apply(this,arguments)}return function(){r.apply(this,arguments)}(),function(){t=!0}}),[n.snowConnection,a,i]),X().createElement(X().Fragment,null,X().createElement(Z.InlineFieldRow,null,X().createElement(Z.InlineField,{labelWidth:20,label:"Table Columns",tooltip:"Leave columns blank to return all columns in the dictionary"},X().createElement(Z.Select,{isMulti:!0,options:c,isClearable:!0,maxMenuHeight:200,value:i,isSearchable:!0,menuPlacement:"bottom",allowCustomValue:!0,defaultValue:i,backspaceRemovesValue:!0,prefix:rt||(rt=X().createElement(Z.Icon,{name:"columns"})),width:40,onChange:function(e){l(e),r("selectedtableColumns",e)},onCreateOption:function(e){var t=[];void 0!==i?(t=st(i))[t.length]={label:e,value:e}:t=[{label:e,value:e}],l(t),r("selectedtableColumns",t)}}))))},gt=function(e){var t=e.options,r=e.value,n=e.updateQuery;return X().createElement(X().Fragment,null,X().createElement(Z.InlineFieldRow,null,X().createElement(Z.InlineField,{label:"Anomaly",labelWidth:20},X().createElement(Z.Select,{width:20,value:r,options:t,isClearable:!0,maxMenuHeight:200,defaultValue:r,onChange:function(e){return n("selectedMetricAnomalyList",e)}}))))},bt=function(e){var t=e.loadOptions,r=e.value,n=e.updateQuery;return X().createElement(X().Fragment,null,X().createElement(Z.InlineFieldRow,null,X().createElement(Z.InlineField,{label:"Starting Point",labelWidth:20},X().createElement(Z.AsyncSelect,{width:40,value:r,isClearable:!0,isSearchable:!0,defaultValue:r,defaultOptions:!0,allowCustomValue:!0,loadOptions:t,backspaceRemovesValue:!0,onCreateOption:function(e){return n("selectedServiceList",{label:e,value:e})},onChange:function(e){return n("selectedServiceList",e)}}))))};function wt(e){return(wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Et(e){return function(e){if(Array.isArray(e))return _t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||xt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function St(){St=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function c(e,t,r,a){var o=t&&t.prototype instanceof p?t:p,i=Object.create(o.prototype),l=new O(a||[]);return n(i,"_invoke",{value:E(e,r,l)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var f={};function p(){}function h(){}function d(){}var v={};u(v,o,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(x([])));m&&m!==t&&r.call(m,o)&&(v=m);var g=d.prototype=p.prototype=Object.create(v);function b(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){var a;n(this,"_invoke",{value:function(n,o){function i(){return new t((function(a,i){!function n(a,o,i,l){var u=s(e[a],e,o);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==wt(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,i,l)}),(function(e){n("throw",e,i,l)})):t.resolve(f).then((function(e){c.value=e,i(c)}),(function(e){return n("throw",e,i,l)}))}l(u.arg)}(n,o,a,i)}))}return a=a?a.then(i,i):i()}})}function E(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return _()}for(r.method=a,r.arg=o;;){var i=r.delegate;if(i){var l=S(i,r);if(l){if(l===f)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function S(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=s(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,f;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function x(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:_}}function _(){return{value:void 0,done:!0}}return h.prototype=d,n(g,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:h,configurable:!0}),h.displayName=u(d,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,u(e,l,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(w.prototype),u(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new w(c(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(g),u(g,l,"Generator"),u(g,o,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(T),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var l=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(l&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;T(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:x(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function Lt(e,t,r,n,a,o,i){try{var l=e[o](i),u=l.value}catch(e){return void r(e)}l.done?t(u):Promise.resolve(u).then(n,a)}function Tt(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){Lt(o,n,a,i,l,"next",e)}function l(e){Lt(o,n,a,i,l,"throw",e)}i(void 0)}))}}function Ot(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}(e,t)||xt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xt(e,t){if(e){if("string"==typeof e)return _t(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_t(e,t):void 0}}function _t(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ct=function(e){var t=e.query,r=e.updateQuery,n=e.datasource,a=Ot((0,J.useState)(t.relationshipTypes),2),o=a[0],i=a[1],l=Ot((0,J.useState)([{label:"Loading ...",value:""}]),2),u=l[0],c=l[1];return(0,J.useEffect)((function(){var e=[],t=!1;function r(){return(r=Tt(St().mark((function r(){return St().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.snowConnection.getRelationshipTypeOptions();case 2:e=r.sent,t||(o&&o.length>0&&(e=e.concat(o)),e.length>0&&c(e));case 4:case"end":return r.stop()}}),r)})))).apply(this,arguments)}return function(){r.apply(this,arguments)}(),function(){t=!0}}),[n.snowConnection,o]),X().createElement(X().Fragment,null,X().createElement(Z.InlineFieldRow,null,X().createElement(Z.InlineField,{label:"Relationship Types",labelWidth:20,tooltip:"include"},X().createElement(Z.Select,{width:40,value:o,defaultValue:o,options:u,isClearable:!0,isSearchable:!0,isMulti:!0,allowCustomValue:!0,backspaceRemovesValue:!0,onChange:function(e){i(e),r("relationshipTypes",e)},onCreateOption:function(e){i([].concat(Et(o),[{label:e,value:e}])),r("relationshipTypes",[].concat(Et(o),[{label:e,value:e}]))}}))))};function It(e){return function(e){if(Array.isArray(e))return At(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return At(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return At(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function At(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var jt=function(e){var t=e.loadOptions,r=e.value,n=e.updateQuery;return X().createElement(X().Fragment,null,X().createElement(Z.InlineFieldRow,null,X().createElement(Z.InlineField,{label:"Filter Classes",labelWidth:20,tooltip:"exclude"},X().createElement(Z.AsyncSelect,{width:40,value:r,defaultValue:r,isClearable:!0,isSearchable:!0,isMulti:!0,backspaceRemovesValue:!0,defaultOptions:!0,loadOptions:t,allowCustomValue:!0,onChange:function(e){return n("excludedClasses",e)},onCreateOption:function(e){return n("excludedClasses",[].concat(It(r),[{label:e,value:e}]))}}))))};function Nt(e){return(Nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pt(){Pt=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function c(e,t,r,a){var o=t&&t.prototype instanceof p?t:p,i=Object.create(o.prototype),l=new O(a||[]);return n(i,"_invoke",{value:E(e,r,l)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var f={};function p(){}function h(){}function d(){}var v={};u(v,o,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(x([])));m&&m!==t&&r.call(m,o)&&(v=m);var g=d.prototype=p.prototype=Object.create(v);function b(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){var a;n(this,"_invoke",{value:function(n,o){function i(){return new t((function(a,i){!function n(a,o,i,l){var u=s(e[a],e,o);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==Nt(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,i,l)}),(function(e){n("throw",e,i,l)})):t.resolve(f).then((function(e){c.value=e,i(c)}),(function(e){return n("throw",e,i,l)}))}l(u.arg)}(n,o,a,i)}))}return a=a?a.then(i,i):i()}})}function E(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return _()}for(r.method=a,r.arg=o;;){var i=r.delegate;if(i){var l=S(i,r);if(l){if(l===f)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function S(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=s(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,f;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function x(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:_}}function _(){return{value:void 0,done:!0}}return h.prototype=d,n(g,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:h,configurable:!0}),h.displayName=u(d,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,u(e,l,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(w.prototype),u(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new w(c(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(g),u(g,l,"Generator"),u(g,o,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(T),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var l=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(l&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;T(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:x(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function kt(e,t,r,n,a,o,i){try{var l=e[o](i),u=l.value}catch(e){return void r(e)}l.done?t(u):Promise.resolve(u).then(n,a)}function Ft(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){kt(o,n,a,i,l,"next",e)}function l(e){kt(o,n,a,i,l,"throw",e)}i(void 0)}))}}function Vt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Mt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Mt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Rt=function(e){var t,r=e.index,n=e.value,a=e.datasource,o=e.updateValue,i=e.addRow,l=e.deleteRow,u=e.columnOptions,c=e.table,s=e.showAddRow,f=Vt((0,J.useState)([{label:"Loading ...",value:""}]),2),p=f[0],h=f[1],d=Vt((0,J.useState)([{label:"Loading ...",value:""}]),2),v=d[0],y=d[1];(0,J.useEffect)((function(){}),[n.column]),(0,J.useEffect)((function(){var e=[],t=[],r=!1,o=function(){var e=Ft(Pt().mark((function e(){var o;return Pt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o="",n.column&&(o=n.column.label.substring(n.column.label.indexOf("(")+1,n.column.label.indexOf(")"))),e.next=4,a.snowConnection.getOperatorOptions(o);case 4:t=e.sent,r||y(t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return function(){var t=Ft(Pt().mark((function t(){var r,o;return Pt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o="",n.column&&(o=n.column.label.substring(n.column.label.indexOf("(")+1,n.column.label.indexOf(")"))),t.next=4,a.snowConnection.loadColumnChoices(null==c?void 0:c.value,null===(r=n.column)||void 0===r?void 0:r.value,"",o);case 4:(e=t.sent).length>0&&h(e);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()(),o(),function(){r=!0}}),[a.snowConnection,n.column,c]);return X().createElement(X().Fragment,null,X().createElement(Z.InlineFieldRow,null,0!==r&&X().createElement(Z.InlineField,null,X().createElement(Z.RadioButtonGroup,{options:[{label:"AND",value:"^"},{label:"OR",value:"^OR"}],value:(null===(t=n.separator)||void 0===t?void 0:t.value)||"^",onChange:function(e){return o(r,"separator",{label:e,value:e})}})),X().createElement(Z.InlineField,{label:0===r?"Sysparam Query":void 0,labelWidth:0===r?20:void 0},X().createElement(Z.Select,{width:40,options:u,value:n.column,defaultValue:n.column,isSearchable:!0,isClearable:!0,isMulti:!1,backspaceRemovesValue:!0,allowCustomValue:!0,onChange:function(e){return o(r,"column",e)},onCreateOption:function(e){return o(r,"column",{label:e,value:e})}})),X().createElement(Z.InlineField,null,X().createElement(Z.Select,{width:20,options:v,value:n.operator,defaultValue:n.operator,isClearable:!0,backspaceRemovesValue:!0,allowCustomValue:!0,onChange:function(e){return o(r,"operator",e)},onCreateOption:function(e){return o(r,"operator",{label:e,value:e})}})),X().createElement(Z.InlineField,null,X().createElement(Z.Select,{width:20,options:p,value:n.value,defaultValue:n.value,isSearchable:!0,isClearable:!0,isMulti:!1,backspaceRemovesValue:!0,allowCustomValue:!0,onChange:function(e){return o(r,"value",e)},onCreateOption:function(e){return o(r,"value",{label:e,value:e})}})),r>0&&X().createElement(Z.InlineField,null,X().createElement(Z.ToolbarButton,{icon:"trash-alt",variant:"destructive",iconOnly:!0,onClick:function(){return l(r)}}))),s&&X().createElement(Z.InlineFieldRow,null,X().createElement(Z.InlineField,null,X().createElement(Z.ToolbarButton,{icon:"plus",variant:"primary",onClick:function(){return i()}}))))};function Dt(e){return(Dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gt(e){return function(e){if(Array.isArray(e))return Ut(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Wt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qt(){Qt=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function c(e,t,r,a){var o=t&&t.prototype instanceof p?t:p,i=Object.create(o.prototype),l=new O(a||[]);return n(i,"_invoke",{value:E(e,r,l)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var f={};function p(){}function h(){}function d(){}var v={};u(v,o,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(x([])));m&&m!==t&&r.call(m,o)&&(v=m);var g=d.prototype=p.prototype=Object.create(v);function b(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){var a;n(this,"_invoke",{value:function(n,o){function i(){return new t((function(a,i){!function n(a,o,i,l){var u=s(e[a],e,o);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==Dt(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,i,l)}),(function(e){n("throw",e,i,l)})):t.resolve(f).then((function(e){c.value=e,i(c)}),(function(e){return n("throw",e,i,l)}))}l(u.arg)}(n,o,a,i)}))}return a=a?a.then(i,i):i()}})}function E(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return _()}for(r.method=a,r.arg=o;;){var i=r.delegate;if(i){var l=S(i,r);if(l){if(l===f)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function S(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=s(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,f;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function x(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:_}}function _(){return{value:void 0,done:!0}}return h.prototype=d,n(g,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:h,configurable:!0}),h.displayName=u(d,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,u(e,l,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(w.prototype),u(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new w(c(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(g),u(g,l,"Generator"),u(g,o,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(T),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var l=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(l&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;T(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:x(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function qt(e,t,r,n,a,o,i){try{var l=e[o](i),u=l.value}catch(e){return void r(e)}l.done?t(u):Promise.resolve(u).then(n,a)}function Bt(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){qt(o,n,a,i,l,"next",e)}function l(e){qt(o,n,a,i,l,"throw",e)}i(void 0)}))}}function Yt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}(e,t)||Wt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wt(e,t){if(e){if("string"==typeof e)return Ut(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ut(e,t):void 0}}function Ut(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ht=function(e){var t=e.query,r=e.updateQuery,n=e.datasource,a=e.table,o=e.multiUpdateQuery,i=Yt((0,J.useState)([{label:"Loading ...",value:""}]),2),l=i[0],u=i[1];(0,J.useEffect)((function(){var e,r=[],i=!1;function l(){return(l=Bt(Qt().mark((function e(){return Qt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.snowConnection.getTableColumnOptions(null==a?void 0:a.value);case 2:r=e.sent,i||r.length>0&&u(r);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return t.basic_sysparam.length>0&&(e=t.basic_sysparam.map((function(e){return{column:e[1]||null,operator:e[2]||null,value:e[3]||null,separator:e[4]||{label:"AND",value:"^"}}})),o({basic_sysparam:[],basicSysparm:e})),function(){l.apply(this,arguments)}(),function(){i=!0}}),[n.snowConnection,a,t.basic_sysparam,o]);var c=Gt(t.basicSysparm),s=function(e){var t=c;t.splice(e,1),r("basicSysparm",t)},f=function(){var e=c;e.push({column:null,operator:null,value:null,separator:{label:"AND",value:"^"}}),r("basicSysparm",e)},p=function(e,t,n){var a=c;a[e][t]=n,r("basicSysparm",a)};return X().createElement(X().Fragment,null,c.map((function(e,t){return X().createElement(Rt,{index:t,value:e,datasource:n,updateValue:p,addRow:f,deleteRow:s,columnOptions:l,table:a,key:t,showAddRow:t===c.length-1})})))};function Kt(){return(Kt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var $t;function zt(){return(zt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Jt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Xt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Xt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Zt=new e.DataSourcePlugin(z).setConfigEditor((function(e){var t=e.options,r=e.onOptionsChange;""===t.url&&(t.url="https://<instance_name>.service-now.com/"),void 0===t.jsonData.apiPath&&(t.jsonData.apiPath="/api/x_opti8_itom_grafa/grafana_api"),void 0===t.jsonData.cacheTimeout&&(t.jsonData.cacheTimeout=60),void 0===t.jsonData.imageURL&&(t.jsonData.imageURL="https://www.servicenow.com/content/dam/servicenow-assets/public/en-us/images/og-images/favicon.ico");var n=function(e,n){r(te({},t,{jsonData:te({},t.jsonData,ee({},e,n))}))};return X().createElement(X().Fragment,null,$||($=X().createElement(Z.Alert,{title:"Need more information?",severity:"info",elevated:!0},X().createElement(Z.VerticalGroup,null,X().createElement("p",null,"Local documentation can be found ",X().createElement("a",{href:"/plugins/optimiz-servicenow-datasource"},"Here")),X().createElement("p",null,"Or",X().createElement("a",{href:"https://github.com/optimizca/servicenow-grafana/blob/main/README.md"},"Click here to view the documentation on GitHub"))))),X().createElement(Z.InlineFieldRow,null,X().createElement(Z.InlineField,{labelWidth:20,label:"Logo URL",tooltip:"To access this value in each dashboard, create a variable query using namespace: global_image."},X().createElement(Z.Input,{defaultValue:void 0===t.jsonData.imageURL?"":t.jsonData.imageURL,onBlur:function(e){return n("imageURL",e.target.value)},width:60}))),X().createElement(Z.InlineFieldRow,null,X().createElement(Z.InlineField,{labelWidth:20,label:"API Path"},X().createElement(Z.Input,{defaultValue:void 0===t.jsonData.apiPath?"":t.jsonData.apiPath,onBlur:function(e){return n("apiPath",e.target.value)},width:40}))),X().createElement(Z.DataSourceHttpSettings,{defaultUrl:"https://<instance_name>.service-now.com/",dataSourceConfig:t,showAccessOptions:!0,sigV4AuthToggleEnabled:!1,showForwardOAuthIdentityOption:!1,onChange:function(e){var t="";-1!==e.url.indexOf("https://")?t=e.url.substring(8,e.url.indexOf(".service-now",8)):-1!==e.url.indexOf("http://")&&(t=e.url.substring(7,e.url.indexOf(".service-now",7))),e.jsonData.instanceName=t,r(e)}}))})).setQueryEditor((function(e){var t,r=e.query,n=e.onChange,o=e.datasource,l=(0,a.defaults)(r,i),u=o.snowConnection.getMetricAnomalyOptions(),c=o.snowConnection.getAlertTypeOptions(),s=o.snowConnection.getAlertStateOptions(),f=o.snowConnection.getTrendByOptions(),p=function(e){return new Promise((function(t){setTimeout((function(){t(o.snowConnection.loadServiceOptions(e))}),500)}))},h=function(e){return new Promise((function(t){setTimeout((function(){var r;t(o.snowConnection.loadCIOptions(null===(r=l.selectedServiceList)||void 0===r?void 0:r.value,e))}),500)}))},d=function(e){return new Promise((function(t){setTimeout((function(){t(o.snowConnection.loadTableOptions(e))}),500)}))},v=function(e){return new Promise((function(t){setTimeout((function(){t(o.snowConnection.loadStartingPointOptions(e))}),500)}))},y=function(e,t){n(Kt({},l,function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}({},e,t)))},m=function(e){n(Kt({},l,e))},g={Table:{title:"Table",description:"Choose your own table to gather data from",content:X().createElement(X().Fragment,null,X().createElement(it,{updateQuery:y,loadTableOptions:d,value:l.tableName}),X().createElement(mt,{query:l,updateQuery:y,datasource:o,table:l.tableName}),X().createElement(Ht,{query:l,updateQuery:y,datasource:o,table:l.tableName,multiUpdateQuery:m}),X().createElement(Ce,{query:l,updateQuery:y,datasource:o,table:l.tableName}),X().createElement(fe,{defaultValue:l.rowLimit,updateQuery:y}),X().createElement(pe,{defaultValue:l.page,updateQuery:y}),X().createElement(re,{value:l.getAlertCount,updateQuery:y}),X().createElement(Be,{query:l,updateQuery:y,datasource:o,table:l.tableName}))},Aggregate:{title:"Aggregate",description:"Group by and apply aggregate functions to table data",content:X().createElement(X().Fragment,null,X().createElement(it,{updateQuery:y,loadTableOptions:d,value:l.tableName}),X().createElement(se,{query:l,updateQuery:y,datasource:o}),X().createElement(Ee,{query:l,updateQuery:y,datasource:o}),X().createElement(Je,{updateQuery:y,defaultValue:l.sysparam_query}),X().createElement(fe,{defaultValue:l.rowLimit,updateQuery:y}),X().createElement(Be,{query:l,updateQuery:y,datasource:o,table:l.tableName}))},Alerts:{title:"Alerts",description:"Get Alerts",content:X().createElement(X().Fragment,null,X().createElement(Xe,{loadOptions:p,value:l.selectedServiceList,updateQuery:y}),X().createElement(He,{loadOptions:h,value:l.selectedSourceList,updateQuery:y}),X().createElement(at,{options:c,value:l.selectedAlertTypeList,updateQuery:y}),X().createElement(lt,{options:s,value:l.selectedAlertStateList,updateQuery:y}),X().createElement(Je,{updateQuery:y,defaultValue:l.sysparam_query}),X().createElement(Ce,{query:l,updateQuery:y,datasource:o,table:{value:"em_alert"}}),X().createElement(fe,{defaultValue:l.rowLimit,updateQuery:y}),X().createElement(pe,{defaultValue:l.page,updateQuery:y}),X().createElement(Be,{query:l,updateQuery:y,datasource:o,table:{value:"em_alert"}}))},Anomaly:{title:"Anomaly",description:"Parse values out of Alert Anomalies table",content:X().createElement(X().Fragment,null,X().createElement(mt,{query:l,updateQuery:y,datasource:o,table:{value:"em_alert_anomaly"}}),X().createElement(Ht,{query:l,updateQuery:y,datasource:o,table:{value:"em_alert_anomaly"},multiUpdateQuery:m}),X().createElement(Ce,{query:l,updateQuery:y,datasource:o,table:{value:"em_alert_anomaly"}}),X().createElement(fe,{defaultValue:l.rowLimit,updateQuery:y}),X().createElement(pe,{defaultValue:l.page,updateQuery:y}))},Geohash_Map:{title:"GeoHash Map",description:"Get map data from AWS or Azure",content:X().createElement(X().Fragment,null,X().createElement(it,{updateQuery:y,loadTableOptions:d,value:l.tableName}),X().createElement(se,{query:l,updateQuery:y,datasource:o}),X().createElement(Je,{updateQuery:y,defaultValue:l.sysparam_query}))},Log_Data:{title:"Log Data",description:"Get log data",content:X().createElement(X().Fragment,null,X().createElement(Ye,{value:l.compressLogs,updateQuery:y}),X().createElement(Ht,{query:l,updateQuery:y,datasource:o,table:{value:"sn_occ_log_viewer_parent"},multiUpdateQuery:m}),X().createElement(ne,{updateQuery:y,defaultValue:l.elasticSearch}),X().createElement(Ce,{query:l,updateQuery:y,datasource:o,table:{value:"sn_occ_log_viewer_parent"}}),X().createElement(fe,{defaultValue:l.rowLimit,updateQuery:y}),X().createElement(pe,{defaultValue:l.page,updateQuery:y}))},Metrics:{title:"Metrics",description:"Get Timeseries metrics",content:X().createElement(X().Fragment,null,X().createElement(Xe,{loadOptions:p,value:l.selectedServiceList,updateQuery:y}),X().createElement(He,{loadOptions:h,value:l.selectedSourceList,updateQuery:y}),X().createElement(nt,{loadOptions:function(e){return new Promise((function(t){setTimeout((function(){t(o.snowConnection.loadResourceOptions(l.selectedSourceList,e))}),500)}))},value:l.selectedMetricTypeList,updateQuery:y}),X().createElement(ze,{loadOptions:function(e){return new Promise((function(t){setTimeout((function(){t(o.snowConnection.loadMetricOptions(l.selectedSourceList,e))}),500)}))},value:l.selectedMetricNameList,updateQuery:y}),X().createElement(gt,{options:u,value:l.selectedMetricAnomalyList,updateQuery:y}),X().createElement(Je,{updateQuery:y,defaultValue:l.sysparam_query}))},Outage_Status:{title:"Outage Status",description:"Gathers business service status over the last 90 days",content:X().createElement(X().Fragment,null,X().createElement(Xe,{loadOptions:p,value:l.selectedServiceList,updateQuery:y}),X().createElement(Ve,{value:l.showPercent,updateQuery:y}),X().createElement(Je,{updateQuery:y,defaultValue:l.sysparam_query}),X().createElement(fe,{defaultValue:l.rowLimit,updateQuery:y}),X().createElement(pe,{defaultValue:l.page,updateQuery:y}))},Row_Count:{title:"Row Count",description:"Get row count from query",content:X().createElement(X().Fragment,null,X().createElement(it,{updateQuery:y,loadTableOptions:d,value:l.tableName}),X().createElement(Je,{updateQuery:y,defaultValue:l.sysparam_query}),X().createElement(Be,{query:l,updateQuery:y,datasource:o,table:l.tableName}))},Node_Graph:{title:"Node Graph",description:"Show relationships in the node graph panel",content:X().createElement(X().Fragment,null,X().createElement(bt,{loadOptions:v,value:l.selectedServiceList,updateQuery:y}),X().createElement(Ct,{query:l,updateQuery:y,datasource:o}),X().createElement(jt,{loadOptions:function(e){return new Promise((function(t){setTimeout((function(){t(o.snowConnection.loadClassOptions(e))}),500)}))},value:l.excludedClasses,updateQuery:y}),X().createElement(ut,{updateQuery:y,defaultValue:l.topology_parent_depth}),X().createElement(ot,{updateQuery:y,defaultValue:l.topology_child_depth}))},Topology:{title:"Topology (Deprecated)",description:"Get Topology",content:X().createElement(X().Fragment,null,X().createElement(bt,{loadOptions:v,value:l.selectedServiceList,updateQuery:y}),X().createElement(ut,{updateQuery:y,defaultValue:l.topology_parent_depth}),X().createElement(ot,{updateQuery:y,defaultValue:l.topology_child_depth}),X().createElement(Je,{updateQuery:y,defaultValue:l.sysparam_query}))},Trend_Data:{title:"Trend Data",description:"Get timeseries data based on a time trend",content:X().createElement(X().Fragment,null,X().createElement(it,{updateQuery:y,loadTableOptions:d,value:l.tableName}),X().createElement(Ht,{query:l,updateQuery:y,datasource:o,table:l.tableName,multiUpdateQuery:m}),X().createElement(ne,{updateQuery:y,defaultValue:l.elasticSearch}),X().createElement(se,{query:l,updateQuery:y,datasource:o}),X().createElement(Fe,{query:l,updateQuery:y,trendByOptions:f,datasource:o}))}};return X().createElement(X().Fragment,null,X().createElement(Z.HorizontalGroup,{justify:"space-between"},X().createElement(Z.InlineFieldRow,{style:{paddingTop:"8px"}},X().createElement(Z.InlineField,{label:"Query Category",labelWidth:20},X().createElement(Z.Select,{width:40,options:function(){var e=[];for(var t in g){var r=g[t];e.push({label:r.title,value:t,description:r.description})}return e}(),value:l.selectedQueryCategory,onChange:function(e){y("selectedQueryCategory",e)},menuPlacement:"bottom",maxMenuHeight:220})))),g[null!==(t=l.selectedQueryCategory.value)&&void 0!==t?t:""].content)})).setVariableQueryEditor((function(e){var t=e.onChange,r=e.query,n=Jt((0,J.useState)(r),2),a=n[0],o=n[1],i=function(){t(a,"".concat(a.rawQuery," (").concat(a.namespace,") ").concat(a.showAsterisk))},l=function(e,t){o(zt({},a,function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}({},e,t)))};return X().createElement(X().Fragment,null,X().createElement(Z.InlineFieldRow,null,X().createElement(Z.InlineField,{label:"Namespace",labelWidth:20},X().createElement(Z.Select,{options:[{label:"global_image",value:"global_image"},{label:"global_instance_name",value:"global_instance_name"},{label:"metric_names",value:"metric_names"},{label:"golden_metric_names",value:"golden_metric_names"},{label:"custom_kpis",value:"custom_kpis"},{label:"generic",value:"generic"},{label:"nested_cis",value:"nested_cis"},{label:"v2_nested_cis",value:"v2_nested_cis"},{label:"nested_classes",value:"nested_classes"},{label:"v2_nested_classes",value:"v2_nested_classes"}],value:a.namespace,onChange:function(e){return l("namespace",e.value)},allowCustomValue:!1,isClearable:!1,isSearchable:!0,onBlur:i,width:30}))),X().createElement(Z.InlineFieldRow,null,X().createElement(Z.InlineField,{label:"Query",labelWidth:20,grow:!0},X().createElement(Z.Input,{name:"rawQuery",onChange:function(e){return l("rawQuery",e.target.value)},onBlur:i,value:a.rawQuery}))),X().createElement(Z.InlineFieldRow,null,X().createElement(Z.InlineField,{labelWidth:20,label:"Show Asterisk",tooltip:'The "ALL" option represents all the available choices in the variable list, while the "*" option represents any value.'},X().createElement(Z.InlineSwitch,{disabled:!1,onBlur:i,transparent:!1,value:a.showAsterisk,onChange:function(e){return l("showAsterisk",e.target.checked)}}))),$t||($t=X().createElement(Z.Alert,{title:"",severity:"info"},X().createElement(Z.VerticalGroup,null,X().createElement("p",null,"Documentation for variables can be found"," ",X().createElement("a",{href:"https://github.com/optimizca/servicenow-grafana#variables",rel:"noopener noreferrer",target:"_blank"},"(Here)"))))))}))})(),c})());
//# sourceMappingURL=module.js.map